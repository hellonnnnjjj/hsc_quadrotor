ARM GAS  /tmp/ccA1Y6N5.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"control.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.PID_DItemFilterPitchRate,"ax",%progbits
  18              		.align	1
  19              		.arch armv7e-m
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv4-sp-d16
  25              	PID_DItemFilterPitchRate:
  26              	.LVL0:
  27              	.LFB131:
  28              		.file 1 "./app/control/control.c"
   1:./app/control/control.c **** #include "control.h"
   2:./app/control/control.c **** 
   3:./app/control/control.c **** 
   4:./app/control/control.c **** #include <math.h>
   5:./app/control/control.c **** #include <stdint.h>
   6:./app/control/control.c **** 
   7:./app/control/control.c **** 
   8:./app/control/control.c **** 
   9:./app/control/control.c **** #include "motor_config.h"
  10:./app/control/control.c **** #include "mpu6050_config.h"
  11:./app/control/control.c **** #include "bmp280_cfg.h"
  12:./app/control/control.c **** #include "spl06_cfg.h"
  13:./app/control/control.c **** 
  14:./app/control/control.c **** 
  15:./app/control/control.c **** 
  16:./app/control/control.c **** #include "remote_data.h"
  17:./app/control/control.c **** 
  18:./app/control/control.c **** #include "quaternion.h"
  19:./app/control/control.c **** #include "remote_task.h"
  20:./app/control/control.c **** #include "pid.h"
  21:./app/control/control.c **** #include "common.h"
  22:./app/control/control.c **** #include "filter.h"
  23:./app/control/control.c **** 
  24:./app/control/control.c **** 
  25:./app/control/control.c **** #include "main.h"
  26:./app/control/control.c **** 
  27:./app/control/control.c **** biquadFilter_t biquad_PitchDItemParam = {0};
  28:./app/control/control.c **** biquadFilter_t biquad_RollDItemParam = {0};
  29:./app/control/control.c **** biquadFilter_t biquad_YawDItemParam = {0};
  30:./app/control/control.c **** 
ARM GAS  /tmp/ccA1Y6N5.s 			page 2


  31:./app/control/control.c **** 
  32:./app/control/control.c **** static PID_Base_t PID_DItemFilterPitchRate(PID_Base_t in)
  33:./app/control/control.c **** {
  29              		.loc 1 33 1 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		.loc 1 33 1 is_stmt 0 view .LVU1
  34 0000 08B5     		push	{r3, lr}
  35              	.LCFI0:
  36              		.cfi_def_cfa_offset 8
  37              		.cfi_offset 3, -8
  38              		.cfi_offset 14, -4
  34:./app/control/control.c **** 	return  biquad_filter(&biquad_PitchDItemParam, in);
  39              		.loc 1 34 2 is_stmt 1 view .LVU2
  40              		.loc 1 34 10 is_stmt 0 view .LVU3
  41 0002 0248     		ldr	r0, .L3
  42 0004 FFF7FEFF 		bl	biquad_filter
  43              	.LVL1:
  35:./app/control/control.c **** }
  44              		.loc 1 35 1 view .LVU4
  45 0008 08BD     		pop	{r3, pc}
  46              	.L4:
  47 000a 00BF     		.align	2
  48              	.L3:
  49 000c 00000000 		.word	.LANCHOR0
  50              		.cfi_endproc
  51              	.LFE131:
  53              		.section	.text.PID_DItemFilterRollRate,"ax",%progbits
  54              		.align	1
  55              		.syntax unified
  56              		.thumb
  57              		.thumb_func
  58              		.fpu fpv4-sp-d16
  60              	PID_DItemFilterRollRate:
  61              	.LVL2:
  62              	.LFB132:
  36:./app/control/control.c **** 
  37:./app/control/control.c **** static PID_Base_t PID_DItemFilterRollRate(PID_Base_t in)
  38:./app/control/control.c **** {
  63              		.loc 1 38 1 is_stmt 1 view -0
  64              		.cfi_startproc
  65              		@ args = 0, pretend = 0, frame = 0
  66              		@ frame_needed = 0, uses_anonymous_args = 0
  67              		.loc 1 38 1 is_stmt 0 view .LVU6
  68 0000 08B5     		push	{r3, lr}
  69              	.LCFI1:
  70              		.cfi_def_cfa_offset 8
  71              		.cfi_offset 3, -8
  72              		.cfi_offset 14, -4
  39:./app/control/control.c **** 	return  biquad_filter(&biquad_RollDItemParam, in);
  73              		.loc 1 39 2 is_stmt 1 view .LVU7
  74              		.loc 1 39 10 is_stmt 0 view .LVU8
  75 0002 0248     		ldr	r0, .L7
  76 0004 FFF7FEFF 		bl	biquad_filter
  77              	.LVL3:
  40:./app/control/control.c **** }
ARM GAS  /tmp/ccA1Y6N5.s 			page 3


  78              		.loc 1 40 1 view .LVU9
  79 0008 08BD     		pop	{r3, pc}
  80              	.L8:
  81 000a 00BF     		.align	2
  82              	.L7:
  83 000c 00000000 		.word	.LANCHOR1
  84              		.cfi_endproc
  85              	.LFE132:
  87              		.section	.text.PID_DItemFilterYawRate,"ax",%progbits
  88              		.align	1
  89              		.syntax unified
  90              		.thumb
  91              		.thumb_func
  92              		.fpu fpv4-sp-d16
  94              	PID_DItemFilterYawRate:
  95              	.LVL4:
  96              	.LFB133:
  41:./app/control/control.c **** 
  42:./app/control/control.c **** static PID_Base_t PID_DItemFilterYawRate(PID_Base_t in)
  43:./app/control/control.c **** {
  97              		.loc 1 43 1 is_stmt 1 view -0
  98              		.cfi_startproc
  99              		@ args = 0, pretend = 0, frame = 0
 100              		@ frame_needed = 0, uses_anonymous_args = 0
 101              		.loc 1 43 1 is_stmt 0 view .LVU11
 102 0000 08B5     		push	{r3, lr}
 103              	.LCFI2:
 104              		.cfi_def_cfa_offset 8
 105              		.cfi_offset 3, -8
 106              		.cfi_offset 14, -4
  44:./app/control/control.c **** 	return  biquad_filter(&biquad_YawDItemParam, in);
 107              		.loc 1 44 2 is_stmt 1 view .LVU12
 108              		.loc 1 44 10 is_stmt 0 view .LVU13
 109 0002 0248     		ldr	r0, .L11
 110 0004 FFF7FEFF 		bl	biquad_filter
 111              	.LVL5:
  45:./app/control/control.c **** }
 112              		.loc 1 45 1 view .LVU14
 113 0008 08BD     		pop	{r3, pc}
 114              	.L12:
 115 000a 00BF     		.align	2
 116              	.L11:
 117 000c 00000000 		.word	.LANCHOR2
 118              		.cfi_endproc
 119              	.LFE133:
 121              		.section	.text.MotorStopAll,"ax",%progbits
 122              		.align	1
 123              		.syntax unified
 124              		.thumb
 125              		.thumb_func
 126              		.fpu fpv4-sp-d16
 128              	MotorStopAll:
 129              	.LFB135:
  46:./app/control/control.c **** 
  47:./app/control/control.c **** 
  48:./app/control/control.c **** 
  49:./app/control/control.c **** //俯仰角角速度环PID
ARM GAS  /tmp/ccA1Y6N5.s 			page 4


  50:./app/control/control.c **** PID_t PID_PitchRate = 
  51:./app/control/control.c **** {
  52:./app/control/control.c **** 	.P = 3.6,
  53:./app/control/control.c **** 	.I = 0.02,
  54:./app/control/control.c **** 	.D = 52,    //18
  55:./app/control/control.c **** 	.LastDeviation = 0,
  56:./app/control/control.c **** 	.ISum = 0,
  57:./app/control/control.c **** 	.ISumMin = -500,
  58:./app/control/control.c **** 	.ISumMax = 500,
  59:./app/control/control.c **** 	.OutMin = -ATTITUDE_CONTROL_OUT_MAX,
  60:./app/control/control.c **** 	.OutMax = ATTITUDE_CONTROL_OUT_MAX,
  61:./app/control/control.c **** 
  62:./app/control/control.c **** 	.DFilterFunc = PID_DItemFilterPitchRate,
  63:./app/control/control.c **** };
  64:./app/control/control.c **** 
  65:./app/control/control.c **** //俯仰角角度环PID
  66:./app/control/control.c **** PID_t PID_PitchAngle = 
  67:./app/control/control.c **** {
  68:./app/control/control.c **** 	.P = 5,       
  69:./app/control/control.c **** 	.I = 0.0,
  70:./app/control/control.c **** 	.D = 0.0,     
  71:./app/control/control.c **** 	.ISum = 0,
  72:./app/control/control.c **** 	.LastDeviation = 0,
  73:./app/control/control.c **** 	.ISumMin = -0,
  74:./app/control/control.c **** 	.ISumMax = 0,
  75:./app/control/control.c **** 	.OutMin = -300,
  76:./app/control/control.c **** 	.OutMax = 300,
  77:./app/control/control.c **** 
  78:./app/control/control.c **** 	.DFilterFunc = NULL,
  79:./app/control/control.c **** };
  80:./app/control/control.c **** 
  81:./app/control/control.c **** //横滚角角速度环PID
  82:./app/control/control.c **** PID_t PID_RollRate = 
  83:./app/control/control.c **** {
  84:./app/control/control.c **** 	.P = 3.6 * 0.75,
  85:./app/control/control.c **** 	.I = 0.02 * 0.75,
  86:./app/control/control.c **** 	.D = 52 * 0.75,
  87:./app/control/control.c **** 	.ISum = 0,
  88:./app/control/control.c **** 	.LastDeviation = 0,
  89:./app/control/control.c **** 	.ISumMin = -500,
  90:./app/control/control.c **** 	.ISumMax = 500,
  91:./app/control/control.c **** 	.OutMin = -ATTITUDE_CONTROL_OUT_MAX,
  92:./app/control/control.c **** 	.OutMax = ATTITUDE_CONTROL_OUT_MAX,
  93:./app/control/control.c **** 
  94:./app/control/control.c **** 	.DFilterFunc = PID_DItemFilterRollRate,
  95:./app/control/control.c **** };
  96:./app/control/control.c **** 
  97:./app/control/control.c **** //横滚角角度环PID
  98:./app/control/control.c **** PID_t PID_RollAngle = 
  99:./app/control/control.c **** {
 100:./app/control/control.c **** 	.P = 5,
 101:./app/control/control.c **** 	.I = 0,
 102:./app/control/control.c **** 	.D = 0,
 103:./app/control/control.c **** 	.ISum = 0,
 104:./app/control/control.c **** 	.LastDeviation = 0,
 105:./app/control/control.c **** 	.ISumMin = 0,
 106:./app/control/control.c **** 	.ISumMax = 0,
ARM GAS  /tmp/ccA1Y6N5.s 			page 5


 107:./app/control/control.c **** 	.OutMin = -300,
 108:./app/control/control.c **** 	.OutMax = 300,
 109:./app/control/control.c **** 
 110:./app/control/control.c **** 	.DFilterFunc = NULL,
 111:./app/control/control.c **** };
 112:./app/control/control.c **** 
 113:./app/control/control.c **** //偏航角角速度环PID
 114:./app/control/control.c **** PID_t PID_YawRate = 
 115:./app/control/control.c **** {
 116:./app/control/control.c **** 	.P = 8,
 117:./app/control/control.c **** 	.I = 0.010,
 118:./app/control/control.c **** 	.D = 0,
 119:./app/control/control.c **** 	.ISum = 0,
 120:./app/control/control.c **** 	.LastDeviation = 0,
 121:./app/control/control.c **** 	.ISumMin = -500,
 122:./app/control/control.c **** 	.ISumMax = 500,
 123:./app/control/control.c **** 	.OutMin = -ATTITUDE_CONTROL_OUT_MAX,
 124:./app/control/control.c **** 	.OutMax = ATTITUDE_CONTROL_OUT_MAX,
 125:./app/control/control.c **** 
 126:./app/control/control.c **** 	.DFilterFunc = PID_DItemFilterYawRate,
 127:./app/control/control.c **** };
 128:./app/control/control.c **** 
 129:./app/control/control.c **** //偏航角角度环PID
 130:./app/control/control.c **** PID_t PID_YawAngle = 
 131:./app/control/control.c **** {
 132:./app/control/control.c **** 	.P = 5,
 133:./app/control/control.c **** 	.I = 0,
 134:./app/control/control.c **** 	.D = 0,
 135:./app/control/control.c **** 	.ISum = 0,
 136:./app/control/control.c **** 	.LastDeviation = 0,
 137:./app/control/control.c **** 	.ISumMin = 0,
 138:./app/control/control.c **** 	.ISumMax = 0,
 139:./app/control/control.c **** 	.OutMin = -300,
 140:./app/control/control.c **** 	.OutMax = 300,
 141:./app/control/control.c **** 
 142:./app/control/control.c **** 	.DFilterFunc = NULL,
 143:./app/control/control.c **** };
 144:./app/control/control.c **** 
 145:./app/control/control.c **** 
 146:./app/control/control.c **** PID_t PID_VelocityZ = {0};
 147:./app/control/control.c **** PID_t PID_PositionZ = {0};
 148:./app/control/control.c **** 
 149:./app/control/control.c **** biquadFilter_t biquad_GyroParameterX = {0};
 150:./app/control/control.c **** biquadFilter_t biquad_GyroParameterY = {0};
 151:./app/control/control.c **** biquadFilter_t biquad_GyroParameterZ = {0};
 152:./app/control/control.c **** 
 153:./app/control/control.c **** biquadFilter_t biquad_AccParameterX = {0};
 154:./app/control/control.c **** biquadFilter_t biquad_AccParameterY = {0};
 155:./app/control/control.c **** biquadFilter_t biquad_AccParameterZ = {0};
 156:./app/control/control.c **** 
 157:./app/control/control.c **** 
 158:./app/control/control.c **** 
 159:./app/control/control.c **** 
 160:./app/control/control.c **** 
 161:./app/control/control.c **** 
 162:./app/control/control.c **** //姿态四元数
 163:./app/control/control.c **** Quaternion_t Quaternion = 
ARM GAS  /tmp/ccA1Y6N5.s 			page 6


 164:./app/control/control.c **** {
 165:./app/control/control.c **** 	.q0=1.0f,
 166:./app/control/control.c **** 	.q1=0.0f,
 167:./app/control/control.c **** 	.q2=0.0f,
 168:./app/control/control.c **** 	.q3=0.0f,
 169:./app/control/control.c **** 
 170:./app/control/control.c **** 	.RotationMatrix = {0},
 171:./app/control/control.c **** };
 172:./app/control/control.c **** 
 173:./app/control/control.c **** //用于姿态解算中通过加速度计和磁力计修正角度
 174:./app/control/control.c **** //P越大回正速度越快
 175:./app/control/control.c **** Quaternion_PIOffset_t Quaternion_PIOffset = 
 176:./app/control/control.c **** {
 177:./app/control/control.c **** 	.P = 0.4f,
 178:./app/control/control.c **** 	.I = 0.000f,
 179:./app/control/control.c **** 
 180:./app/control/control.c **** 	.exInt = 0,
 181:./app/control/control.c **** 	.eyInt = 0,
 182:./app/control/control.c **** 	.ezInt = 0,
 183:./app/control/control.c **** };
 184:./app/control/control.c **** 
 185:./app/control/control.c **** 
 186:./app/control/control.c **** 
 187:./app/control/control.c **** 
 188:./app/control/control.c **** biquadFilter_t position_z_d_ltem_biquad_parameter = {0};
 189:./app/control/control.c **** 
 190:./app/control/control.c **** 
 191:./app/control/control.c **** 
 192:./app/control/control.c **** 
 193:./app/control/control.c **** #define GRAVITY_ACC         980
 194:./app/control/control.c **** 
 195:./app/control/control.c **** 
 196:./app/control/control.c **** TriaxialData_t estimate_velocity = {0};
 197:./app/control/control.c **** TriaxialData_t estimate_position = {0};
 198:./app/control/control.c **** TriaxialData_t estimate_acc = {0};
 199:./app/control/control.c **** 
 200:./app/control/control.c **** TriaxialData_t Origion_NamelessQuad_velocity = {0};
 201:./app/control/control.c **** TriaxialData_t Origion_NamelessQuad_position = {0};
 202:./app/control/control.c **** TriaxialData_t Origion_NamelessQuad_acc = {0};
 203:./app/control/control.c **** 
 204:./app/control/control.c **** 
 205:./app/control/control.c **** 
 206:./app/control/control.c **** 
 207:./app/control/control.c **** 
 208:./app/control/control.c **** #define ALTITUDE_SLIDING_FILTER_SIZE    5
 209:./app/control/control.c **** float AltitudeSlidingFilterBuffer[ALTITUDE_SLIDING_FILTER_SIZE] = {0};
 210:./app/control/control.c **** 
 211:./app/control/control.c **** SlidingFilter_t AltitudeSlidingFilterParam = 
 212:./app/control/control.c **** {
 213:./app/control/control.c **** 	.Index = 0,
 214:./app/control/control.c **** 	.BufferSize = ALTITUDE_SLIDING_FILTER_SIZE,
 215:./app/control/control.c **** 	.Buffer = AltitudeSlidingFilterBuffer,
 216:./app/control/control.c **** 	.Sum = 0,
 217:./app/control/control.c **** };
 218:./app/control/control.c **** 
 219:./app/control/control.c **** LowPassFilter_t AltitudeLPFParam = 
 220:./app/control/control.c **** {
ARM GAS  /tmp/ccA1Y6N5.s 			page 7


 221:./app/control/control.c **** 	.K = 0.5,
 222:./app/control/control.c **** 	.LastValue = 0,
 223:./app/control/control.c **** };
 224:./app/control/control.c **** 
 225:./app/control/control.c **** 
 226:./app/control/control.c **** //滤波参数初始化 暂时放这里
 227:./app/control/control.c **** void FilterInit()
 228:./app/control/control.c **** {
 229:./app/control/control.c **** 
 230:./app/control/control.c **** 
 231:./app/control/control.c **** 	biquad_filter_init_lpf(&biquad_GyroParameterX, 500, 70);
 232:./app/control/control.c **** 	biquad_filter_init_lpf(&biquad_GyroParameterY, 500, 70);
 233:./app/control/control.c **** 	biquad_filter_init_lpf(&biquad_GyroParameterZ, 500, 70);
 234:./app/control/control.c **** 
 235:./app/control/control.c **** 	
 236:./app/control/control.c **** 	biquad_filter_init_lpf(&biquad_AccParameterX, 500, 70);	
 237:./app/control/control.c **** 	biquad_filter_init_lpf(&biquad_AccParameterY, 500, 70);	
 238:./app/control/control.c **** 	biquad_filter_init_lpf(&biquad_AccParameterZ, 500, 70);	
 239:./app/control/control.c **** 
 240:./app/control/control.c **** 
 241:./app/control/control.c **** 	biquad_filter_init_lpf(&biquad_PitchDItemParam, 500, 70);
 242:./app/control/control.c **** 	biquad_filter_init_lpf(&biquad_RollDItemParam, 500, 70);
 243:./app/control/control.c **** 	biquad_filter_init_lpf(&biquad_YawDItemParam, 500, 70);
 244:./app/control/control.c **** 
 245:./app/control/control.c **** 	
 246:./app/control/control.c **** 
 247:./app/control/control.c **** 	biquad_filter_init_lpf(&position_z_d_ltem_biquad_parameter, 500, 50);
 248:./app/control/control.c **** 
 249:./app/control/control.c **** }
 250:./app/control/control.c **** 
 251:./app/control/control.c **** 
 252:./app/control/control.c **** //所有电机停转
 253:./app/control/control.c **** static void MotorStopAll()
 254:./app/control/control.c **** {
 130              		.loc 1 254 1 is_stmt 1 view -0
 131              		.cfi_startproc
 132              		@ args = 0, pretend = 0, frame = 0
 133              		@ frame_needed = 0, uses_anonymous_args = 0
 134 0000 10B5     		push	{r4, lr}
 135              	.LCFI3:
 136              		.cfi_def_cfa_offset 8
 137              		.cfi_offset 4, -8
 138              		.cfi_offset 14, -4
 255:./app/control/control.c **** 	uint32_t i;
 139              		.loc 1 255 2 view .LVU16
 256:./app/control/control.c **** 
 257:./app/control/control.c **** 	for(i = 0;i < 4;++i)
 140              		.loc 1 257 2 view .LVU17
 141              	.LVL6:
 142              		.loc 1 257 8 is_stmt 0 view .LVU18
 143 0002 0024     		movs	r4, #0
 144              		.loc 1 257 2 view .LVU19
 145 0004 08E0     		b	.L14
 146              	.LVL7:
 147              	.L15:
 258:./app/control/control.c **** 	{
 259:./app/control/control.c **** 		Motor_Out(&Motor[i], MOTOR_STOP_PWM);
ARM GAS  /tmp/ccA1Y6N5.s 			page 8


 148              		.loc 1 259 3 is_stmt 1 discriminator 3 view .LVU20
 149 0006 04EB4402 		add	r2, r4, r4, lsl #1
 150 000a 9300     		lsls	r3, r2, #2
 151 000c 0021     		movs	r1, #0
 152 000e 0448     		ldr	r0, .L17
 153 0010 1844     		add	r0, r0, r3
 154 0012 FFF7FEFF 		bl	Motor_Out
 155              	.LVL8:
 257:./app/control/control.c **** 	{
 156              		.loc 1 257 18 discriminator 3 view .LVU21
 157 0016 0134     		adds	r4, r4, #1
 158              	.LVL9:
 159              	.L14:
 257:./app/control/control.c **** 	{
 160              		.loc 1 257 12 discriminator 1 view .LVU22
 257:./app/control/control.c **** 	{
 161              		.loc 1 257 2 is_stmt 0 discriminator 1 view .LVU23
 162 0018 032C     		cmp	r4, #3
 163 001a F4D9     		bls	.L15
 260:./app/control/control.c **** 	}
 261:./app/control/control.c **** }
 164              		.loc 1 261 1 view .LVU24
 165 001c 10BD     		pop	{r4, pc}
 166              	.LVL10:
 167              	.L18:
 168              		.loc 1 261 1 view .LVU25
 169 001e 00BF     		.align	2
 170              	.L17:
 171 0020 00000000 		.word	Motor
 172              		.cfi_endproc
 173              	.LFE135:
 175              		.section	.text.FilterInit,"ax",%progbits
 176              		.align	1
 177              		.global	FilterInit
 178              		.syntax unified
 179              		.thumb
 180              		.thumb_func
 181              		.fpu fpv4-sp-d16
 183              	FilterInit:
 184              	.LFB134:
 228:./app/control/control.c **** 
 185              		.loc 1 228 1 is_stmt 1 view -0
 186              		.cfi_startproc
 187              		@ args = 0, pretend = 0, frame = 0
 188              		@ frame_needed = 0, uses_anonymous_args = 0
 189 0000 08B5     		push	{r3, lr}
 190              	.LCFI4:
 191              		.cfi_def_cfa_offset 8
 192              		.cfi_offset 3, -8
 193              		.cfi_offset 14, -4
 231:./app/control/control.c **** 	biquad_filter_init_lpf(&biquad_GyroParameterY, 500, 70);
 194              		.loc 1 231 2 view .LVU27
 195 0002 4622     		movs	r2, #70
 196 0004 4FF4FA71 		mov	r1, #500
 197 0008 1C48     		ldr	r0, .L21
 198 000a FFF7FEFF 		bl	biquad_filter_init_lpf
 199              	.LVL11:
ARM GAS  /tmp/ccA1Y6N5.s 			page 9


 232:./app/control/control.c **** 	biquad_filter_init_lpf(&biquad_GyroParameterZ, 500, 70);
 200              		.loc 1 232 2 view .LVU28
 201 000e 4622     		movs	r2, #70
 202 0010 4FF4FA71 		mov	r1, #500
 203 0014 1A48     		ldr	r0, .L21+4
 204 0016 FFF7FEFF 		bl	biquad_filter_init_lpf
 205              	.LVL12:
 233:./app/control/control.c **** 
 206              		.loc 1 233 2 view .LVU29
 207 001a 4622     		movs	r2, #70
 208 001c 4FF4FA71 		mov	r1, #500
 209 0020 1848     		ldr	r0, .L21+8
 210 0022 FFF7FEFF 		bl	biquad_filter_init_lpf
 211              	.LVL13:
 236:./app/control/control.c **** 	biquad_filter_init_lpf(&biquad_AccParameterY, 500, 70);	
 212              		.loc 1 236 2 view .LVU30
 213 0026 4622     		movs	r2, #70
 214 0028 4FF4FA71 		mov	r1, #500
 215 002c 1648     		ldr	r0, .L21+12
 216 002e FFF7FEFF 		bl	biquad_filter_init_lpf
 217              	.LVL14:
 237:./app/control/control.c **** 	biquad_filter_init_lpf(&biquad_AccParameterZ, 500, 70);	
 218              		.loc 1 237 2 view .LVU31
 219 0032 4622     		movs	r2, #70
 220 0034 4FF4FA71 		mov	r1, #500
 221 0038 1448     		ldr	r0, .L21+16
 222 003a FFF7FEFF 		bl	biquad_filter_init_lpf
 223              	.LVL15:
 238:./app/control/control.c **** 
 224              		.loc 1 238 2 view .LVU32
 225 003e 4622     		movs	r2, #70
 226 0040 4FF4FA71 		mov	r1, #500
 227 0044 1248     		ldr	r0, .L21+20
 228 0046 FFF7FEFF 		bl	biquad_filter_init_lpf
 229              	.LVL16:
 241:./app/control/control.c **** 	biquad_filter_init_lpf(&biquad_RollDItemParam, 500, 70);
 230              		.loc 1 241 2 view .LVU33
 231 004a 4622     		movs	r2, #70
 232 004c 4FF4FA71 		mov	r1, #500
 233 0050 1048     		ldr	r0, .L21+24
 234 0052 FFF7FEFF 		bl	biquad_filter_init_lpf
 235              	.LVL17:
 242:./app/control/control.c **** 	biquad_filter_init_lpf(&biquad_YawDItemParam, 500, 70);
 236              		.loc 1 242 2 view .LVU34
 237 0056 4622     		movs	r2, #70
 238 0058 4FF4FA71 		mov	r1, #500
 239 005c 0E48     		ldr	r0, .L21+28
 240 005e FFF7FEFF 		bl	biquad_filter_init_lpf
 241              	.LVL18:
 243:./app/control/control.c **** 
 242              		.loc 1 243 2 view .LVU35
 243 0062 4622     		movs	r2, #70
 244 0064 4FF4FA71 		mov	r1, #500
 245 0068 0C48     		ldr	r0, .L21+32
 246 006a FFF7FEFF 		bl	biquad_filter_init_lpf
 247              	.LVL19:
 247:./app/control/control.c **** 
ARM GAS  /tmp/ccA1Y6N5.s 			page 10


 248              		.loc 1 247 2 view .LVU36
 249 006e 3222     		movs	r2, #50
 250 0070 4FF4FA71 		mov	r1, #500
 251 0074 0A48     		ldr	r0, .L21+36
 252 0076 FFF7FEFF 		bl	biquad_filter_init_lpf
 253              	.LVL20:
 249:./app/control/control.c **** 
 254              		.loc 1 249 1 is_stmt 0 view .LVU37
 255 007a 08BD     		pop	{r3, pc}
 256              	.L22:
 257              		.align	2
 258              	.L21:
 259 007c 00000000 		.word	.LANCHOR3
 260 0080 00000000 		.word	.LANCHOR4
 261 0084 00000000 		.word	.LANCHOR5
 262 0088 00000000 		.word	.LANCHOR6
 263 008c 00000000 		.word	.LANCHOR7
 264 0090 00000000 		.word	.LANCHOR8
 265 0094 00000000 		.word	.LANCHOR0
 266 0098 00000000 		.word	.LANCHOR1
 267 009c 00000000 		.word	.LANCHOR2
 268 00a0 00000000 		.word	.LANCHOR9
 269              		.cfi_endproc
 270              	.LFE134:
 272              		.global	__aeabi_f2d
 273              		.global	__aeabi_dsub
 274              		.global	__aeabi_d2f
 275              		.section	.text.AttitudeControl,"ax",%progbits
 276              		.align	1
 277              		.global	AttitudeControl
 278              		.syntax unified
 279              		.thumb
 280              		.thumb_func
 281              		.fpu fpv4-sp-d16
 283              	AttitudeControl:
 284              	.LVL21:
 285              	.LFB136:
 262:./app/control/control.c **** 
 263:./app/control/control.c **** 
 264:./app/control/control.c **** //姿态控制
 265:./app/control/control.c **** void AttitudeControl(uint32_t throttleOut, AttitudeData_t * setAngle, AttitudeData_t * nowAngle, MP
 266:./app/control/control.c **** {
 286              		.loc 1 266 1 is_stmt 1 view -0
 287              		.cfi_startproc
 288              		@ args = 0, pretend = 0, frame = 16
 289              		@ frame_needed = 0, uses_anonymous_args = 0
 290              		.loc 1 266 1 is_stmt 0 view .LVU39
 291 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 292              	.LCFI5:
 293              		.cfi_def_cfa_offset 20
 294              		.cfi_offset 4, -20
 295              		.cfi_offset 5, -16
 296              		.cfi_offset 6, -12
 297              		.cfi_offset 7, -8
 298              		.cfi_offset 14, -4
 299 0002 2DED028B 		vpush.64	{d8}
 300              	.LCFI6:
ARM GAS  /tmp/ccA1Y6N5.s 			page 11


 301              		.cfi_def_cfa_offset 28
 302              		.cfi_offset 80, -28
 303              		.cfi_offset 81, -24
 304 0006 85B0     		sub	sp, sp, #20
 305              	.LCFI7:
 306              		.cfi_def_cfa_offset 48
 307 0008 0546     		mov	r5, r0
 308 000a 0C46     		mov	r4, r1
 309 000c 1646     		mov	r6, r2
 310 000e 1F46     		mov	r7, r3
 267:./app/control/control.c **** 	uint32_t i;
 311              		.loc 1 267 2 is_stmt 1 view .LVU40
 268:./app/control/control.c **** 	static uint8_t attitude_control_count = 0;
 312              		.loc 1 268 2 view .LVU41
 269:./app/control/control.c **** 
 270:./app/control/control.c **** 
 271:./app/control/control.c **** 	float yaw_error;
 313              		.loc 1 271 2 view .LVU42
 272:./app/control/control.c **** 
 273:./app/control/control.c **** 	float  pitchRateOut = 0;
 314              		.loc 1 273 2 view .LVU43
 315              	.LVL22:
 274:./app/control/control.c **** 	int32_t pitchOut = 0;
 316              		.loc 1 274 2 view .LVU44
 275:./app/control/control.c **** 
 276:./app/control/control.c **** 	float rollRateOut = 0;
 317              		.loc 1 276 2 view .LVU45
 277:./app/control/control.c **** 	int32_t rollOut = 0;
 318              		.loc 1 277 2 view .LVU46
 278:./app/control/control.c **** 
 279:./app/control/control.c **** 	float yawRateOut = 0;
 319              		.loc 1 279 2 view .LVU47
 280:./app/control/control.c **** 	int32_t yawOut = 0;
 320              		.loc 1 280 2 view .LVU48
 281:./app/control/control.c **** 	
 282:./app/control/control.c **** 
 283:./app/control/control.c **** 	int32_t motorOut[4];
 321              		.loc 1 283 2 view .LVU49
 284:./app/control/control.c **** 
 285:./app/control/control.c **** 	yaw_error = setAngle->Yaw - nowAngle->Yaw;
 322              		.loc 1 285 2 view .LVU50
 323              		.loc 1 285 22 is_stmt 0 view .LVU51
 324 0010 91ED028A 		vldr.32	s16, [r1, #8]
 325              		.loc 1 285 38 view .LVU52
 326 0014 D2ED027A 		vldr.32	s15, [r2, #8]
 327              		.loc 1 285 12 view .LVU53
 328 0018 38EE678A 		vsub.f32	s16, s16, s15
 329              	.LVL23:
 286:./app/control/control.c **** 	if(yaw_error > 180)
 330              		.loc 1 286 2 is_stmt 1 view .LVU54
 331              		.loc 1 286 4 is_stmt 0 view .LVU55
 332 001c DFED607A 		vldr.32	s15, .L41+8
 333 0020 B4EEE78A 		vcmpe.f32	s16, s15
 334 0024 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 335 0028 64DD     		ble	.L36
 287:./app/control/control.c **** 	{
 288:./app/control/control.c **** 		yaw_error -= 360;
ARM GAS  /tmp/ccA1Y6N5.s 			page 12


 336              		.loc 1 288 3 is_stmt 1 view .LVU56
 337              		.loc 1 288 13 is_stmt 0 view .LVU57
 338 002a DFED5E7A 		vldr.32	s15, .L41+12
 339 002e 38EE678A 		vsub.f32	s16, s16, s15
 340              	.LVL24:
 341              	.L26:
 289:./app/control/control.c **** 	}
 290:./app/control/control.c **** 	else if(yaw_error < -180)
 291:./app/control/control.c **** 	{
 292:./app/control/control.c **** 		yaw_error += 360;
 293:./app/control/control.c **** 	}
 294:./app/control/control.c **** 	
 295:./app/control/control.c **** 	setAngle->Pitch += PITCH_ZERO;
 342              		.loc 1 295 2 is_stmt 1 view .LVU58
 343              		.loc 1 295 18 is_stmt 0 view .LVU59
 344 0032 D4ED008A 		vldr.32	s17, [r4]
 345 0036 F0EE007A 		vmov.f32	s15, #2.0e+0
 346 003a 78EEE78A 		vsub.f32	s17, s17, s15
 347 003e C4ED008A 		vstr.32	s17, [r4]
 296:./app/control/control.c **** 	setAngle->Roll += ROLL_ZERO;
 348              		.loc 1 296 2 is_stmt 1 view .LVU60
 349              		.loc 1 296 17 is_stmt 0 view .LVU61
 350 0042 6068     		ldr	r0, [r4, #4]	@ float
 351              	.LVL25:
 352              		.loc 1 296 17 view .LVU62
 353 0044 FFF7FEFF 		bl	__aeabi_f2d
 354              	.LVL26:
 355              		.loc 1 296 17 view .LVU63
 356 0048 53A3     		adr	r3, .L41
 357 004a D3E90023 		ldrd	r2, [r3]
 358 004e FFF7FEFF 		bl	__aeabi_dsub
 359              	.LVL27:
 360 0052 FFF7FEFF 		bl	__aeabi_d2f
 361              	.LVL28:
 362 0056 07EE900A 		vmov	s15, r0
 363 005a 6060     		str	r0, [r4, #4]	@ float
 297:./app/control/control.c **** 
 298:./app/control/control.c **** 
 299:./app/control/control.c **** 	attitude_control_count++;
 364              		.loc 1 299 2 is_stmt 1 view .LVU64
 365              		.loc 1 299 24 is_stmt 0 view .LVU65
 366 005c 524B     		ldr	r3, .L41+16
 367 005e 1978     		ldrb	r1, [r3]	@ zero_extendqisi2
 368 0060 0131     		adds	r1, r1, #1
 369 0062 C9B2     		uxtb	r1, r1
 370 0064 1970     		strb	r1, [r3]
 300:./app/control/control.c **** 	if(1 == attitude_control_count)
 371              		.loc 1 300 2 is_stmt 1 view .LVU66
 372              		.loc 1 300 4 is_stmt 0 view .LVU67
 373 0066 0129     		cmp	r1, #1
 374 0068 50D0     		beq	.L38
 301:./app/control/control.c **** 	{
 302:./app/control/control.c **** 		pitchRateOut = PID_Control(&PID_PitchAngle, nowAngle->Pitch - setAngle->Pitch);
 303:./app/control/control.c **** 	}
 304:./app/control/control.c **** 	else if(2 == attitude_control_count)
 375              		.loc 1 304 7 is_stmt 1 view .LVU68
 376              		.loc 1 304 9 is_stmt 0 view .LVU69
ARM GAS  /tmp/ccA1Y6N5.s 			page 13


 377 006a 0229     		cmp	r1, #2
 378 006c 5AD0     		beq	.L39
 305:./app/control/control.c **** 	{
 306:./app/control/control.c **** 		rollRateOut = PID_Control(&PID_RollAngle, nowAngle->Roll - setAngle->Roll);
 307:./app/control/control.c **** 	}
 308:./app/control/control.c **** 	else if(3 == attitude_control_count)
 379              		.loc 1 308 7 is_stmt 1 view .LVU70
 380              		.loc 1 308 9 is_stmt 0 view .LVU71
 381 006e 0329     		cmp	r1, #3
 382 0070 66D0     		beq	.L40
 279:./app/control/control.c **** 	int32_t yawOut = 0;
 383              		.loc 1 279 8 view .LVU72
 384 0072 9FED4E8A 		vldr.32	s16, .L41+20
 385              	.LVL29:
 276:./app/control/control.c **** 	int32_t rollOut = 0;
 386              		.loc 1 276 8 view .LVU73
 387 0076 F0EE488A 		vmov.f32	s17, s16
 273:./app/control/control.c **** 	int32_t pitchOut = 0;
 388              		.loc 1 273 9 view .LVU74
 389 007a B0EE480A 		vmov.f32	s0, s16
 390              	.LVL30:
 391              	.L29:
 309:./app/control/control.c **** 	{
 310:./app/control/control.c **** 		attitude_control_count = 0;
 311:./app/control/control.c **** 		yawRateOut = PID_Control(&PID_YawAngle, yaw_error); 
 312:./app/control/control.c **** 	}
 313:./app/control/control.c **** 
 314:./app/control/control.c **** 	pitchOut = (int32_t)PID_Control(&PID_PitchRate, -gyro->Y- pitchRateOut);
 392              		.loc 1 314 2 is_stmt 1 view .LVU75
 393              		.loc 1 314 55 is_stmt 0 view .LVU76
 394 007e D7ED017A 		vldr.32	s15, [r7, #4]
 395              		.loc 1 314 50 view .LVU77
 396 0082 F1EE677A 		vneg.f32	s15, s15
 397              		.loc 1 314 22 view .LVU78
 398 0086 37EEC00A 		vsub.f32	s0, s15, s0
 399              	.LVL31:
 400              		.loc 1 314 22 view .LVU79
 401 008a 4948     		ldr	r0, .L41+24
 402 008c FFF7FEFF 		bl	PID_Control
 403              	.LVL32:
 404              		.loc 1 314 11 view .LVU80
 405 0090 FDEEC07A 		vcvt.s32.f32	s15, s0
 406 0094 17EE904A 		vmov	r4, s15	@ int
 407              	.LVL33:
 315:./app/control/control.c **** 	rollOut = (int32_t)PID_Control(&PID_RollRate, -gyro->X- rollRateOut);
 408              		.loc 1 315 2 is_stmt 1 view .LVU81
 409              		.loc 1 315 53 is_stmt 0 view .LVU82
 410 0098 97ED000A 		vldr.32	s0, [r7]
 411              		.loc 1 315 48 view .LVU83
 412 009c B1EE400A 		vneg.f32	s0, s0
 413              		.loc 1 315 21 view .LVU84
 414 00a0 30EE680A 		vsub.f32	s0, s0, s17
 415 00a4 4348     		ldr	r0, .L41+28
 416 00a6 FFF7FEFF 		bl	PID_Control
 417              	.LVL34:
 418              		.loc 1 315 10 view .LVU85
 419 00aa FDEEC07A 		vcvt.s32.f32	s15, s0
ARM GAS  /tmp/ccA1Y6N5.s 			page 14


 420 00ae 17EE906A 		vmov	r6, s15	@ int
 421              	.LVL35:
 316:./app/control/control.c **** 	yawOut = (int32_t)PID_Control(&PID_YawRate, gyro->Z- yawRateOut);
 422              		.loc 1 316 2 is_stmt 1 view .LVU86
 423              		.loc 1 316 50 is_stmt 0 view .LVU87
 424 00b2 97ED020A 		vldr.32	s0, [r7, #8]
 425              		.loc 1 316 20 view .LVU88
 426 00b6 30EE480A 		vsub.f32	s0, s0, s16
 427 00ba 3F48     		ldr	r0, .L41+32
 428 00bc FFF7FEFF 		bl	PID_Control
 429              	.LVL36:
 430              		.loc 1 316 9 view .LVU89
 431 00c0 FDEEC07A 		vcvt.s32.f32	s15, s0
 432 00c4 17EE901A 		vmov	r1, s15	@ int
 433              	.LVL37:
 317:./app/control/control.c **** 
 318:./app/control/control.c **** 	
 319:./app/control/control.c **** 	motorOut[0] = MOTOR_PWM_MIN + pitchOut - rollOut + yawOut + throttleOut;  //400
 434              		.loc 1 319 2 is_stmt 1 view .LVU90
 435              		.loc 1 319 30 is_stmt 0 view .LVU91
 436 00c8 04F5FA72 		add	r2, r4, #500
 437              		.loc 1 319 41 view .LVU92
 438 00cc 931B     		subs	r3, r2, r6
 439              		.loc 1 319 51 view .LVU93
 440 00ce 0B44     		add	r3, r3, r1
 441              		.loc 1 319 60 view .LVU94
 442 00d0 2B44     		add	r3, r3, r5
 443              		.loc 1 319 14 view .LVU95
 444 00d2 0093     		str	r3, [sp]
 320:./app/control/control.c **** 	motorOut[1] = MOTOR_PWM_MIN + pitchOut + rollOut - yawOut + throttleOut;     
 445              		.loc 1 320 2 is_stmt 1 view .LVU96
 446              		.loc 1 320 41 is_stmt 0 view .LVU97
 447 00d4 3244     		add	r2, r2, r6
 448              		.loc 1 320 51 view .LVU98
 449 00d6 521A     		subs	r2, r2, r1
 450              		.loc 1 320 60 view .LVU99
 451 00d8 2A44     		add	r2, r2, r5
 452              		.loc 1 320 14 view .LVU100
 453 00da 0192     		str	r2, [sp, #4]
 321:./app/control/control.c **** 	motorOut[2] = MOTOR_PWM_MIN - pitchOut - rollOut - yawOut + throttleOut;   //400
 454              		.loc 1 321 2 is_stmt 1 view .LVU101
 455              		.loc 1 321 30 is_stmt 0 view .LVU102
 456 00dc C4F5FA73 		rsb	r3, r4, #500
 457              		.loc 1 321 41 view .LVU103
 458 00e0 9A1B     		subs	r2, r3, r6
 459              		.loc 1 321 51 view .LVU104
 460 00e2 521A     		subs	r2, r2, r1
 461              		.loc 1 321 60 view .LVU105
 462 00e4 2A44     		add	r2, r2, r5
 463              		.loc 1 321 14 view .LVU106
 464 00e6 0292     		str	r2, [sp, #8]
 322:./app/control/control.c **** 	motorOut[3] = MOTOR_PWM_MIN - pitchOut + rollOut + yawOut + throttleOut;
 465              		.loc 1 322 2 is_stmt 1 view .LVU107
 466              		.loc 1 322 41 is_stmt 0 view .LVU108
 467 00e8 3344     		add	r3, r3, r6
 468              		.loc 1 322 51 view .LVU109
 469 00ea 0B44     		add	r3, r3, r1
ARM GAS  /tmp/ccA1Y6N5.s 			page 15


 470              		.loc 1 322 60 view .LVU110
 471 00ec 2B44     		add	r3, r3, r5
 472              		.loc 1 322 14 view .LVU111
 473 00ee 0393     		str	r3, [sp, #12]
 323:./app/control/control.c **** 
 324:./app/control/control.c **** 	for(i = 0;i < 4;++i)
 474              		.loc 1 324 2 is_stmt 1 view .LVU112
 475              	.LVL38:
 476              		.loc 1 324 8 is_stmt 0 view .LVU113
 477 00f0 0024     		movs	r4, #0
 478              	.LVL39:
 479              		.loc 1 324 2 view .LVU114
 480 00f2 4AE0     		b	.L31
 481              	.LVL40:
 482              	.L36:
 290:./app/control/control.c **** 	{
 483              		.loc 1 290 7 is_stmt 1 view .LVU115
 290:./app/control/control.c **** 	{
 484              		.loc 1 290 9 is_stmt 0 view .LVU116
 485 00f4 DFED317A 		vldr.32	s15, .L41+36
 486 00f8 B4EEE78A 		vcmpe.f32	s16, s15
 487 00fc F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 488 0100 97D5     		bpl	.L26
 292:./app/control/control.c **** 	}
 489              		.loc 1 292 3 is_stmt 1 view .LVU117
 292:./app/control/control.c **** 	}
 490              		.loc 1 292 13 is_stmt 0 view .LVU118
 491 0102 DFED287A 		vldr.32	s15, .L41+12
 492 0106 38EE278A 		vadd.f32	s16, s16, s15
 493              	.LVL41:
 292:./app/control/control.c **** 	}
 494              		.loc 1 292 13 view .LVU119
 495 010a 92E7     		b	.L26
 496              	.LVL42:
 497              	.L38:
 302:./app/control/control.c **** 	}
 498              		.loc 1 302 3 is_stmt 1 view .LVU120
 302:./app/control/control.c **** 	}
 499              		.loc 1 302 55 is_stmt 0 view .LVU121
 500 010c 96ED000A 		vldr.32	s0, [r6]
 302:./app/control/control.c **** 	}
 501              		.loc 1 302 18 view .LVU122
 502 0110 30EE680A 		vsub.f32	s0, s0, s17
 503 0114 2A48     		ldr	r0, .L41+40
 504 0116 FFF7FEFF 		bl	PID_Control
 505              	.LVL43:
 279:./app/control/control.c **** 	int32_t yawOut = 0;
 506              		.loc 1 279 8 view .LVU123
 507 011a 9FED248A 		vldr.32	s16, .L41+20
 508              	.LVL44:
 276:./app/control/control.c **** 	int32_t rollOut = 0;
 509              		.loc 1 276 8 view .LVU124
 510 011e F0EE488A 		vmov.f32	s17, s16
 511 0122 ACE7     		b	.L29
 512              	.LVL45:
 513              	.L39:
 306:./app/control/control.c **** 	}
ARM GAS  /tmp/ccA1Y6N5.s 			page 16


 514              		.loc 1 306 3 is_stmt 1 view .LVU125
 306:./app/control/control.c **** 	}
 515              		.loc 1 306 53 is_stmt 0 view .LVU126
 516 0124 96ED010A 		vldr.32	s0, [r6, #4]
 306:./app/control/control.c **** 	}
 517              		.loc 1 306 17 view .LVU127
 518 0128 30EE670A 		vsub.f32	s0, s0, s15
 519 012c 2548     		ldr	r0, .L41+44
 520 012e FFF7FEFF 		bl	PID_Control
 521              	.LVL46:
 522 0132 F0EE408A 		vmov.f32	s17, s0
 523              	.LVL47:
 279:./app/control/control.c **** 	int32_t yawOut = 0;
 524              		.loc 1 279 8 view .LVU128
 525 0136 9FED1D8A 		vldr.32	s16, .L41+20
 526              	.LVL48:
 273:./app/control/control.c **** 	int32_t pitchOut = 0;
 527              		.loc 1 273 9 view .LVU129
 528 013a B0EE480A 		vmov.f32	s0, s16
 529              	.LVL49:
 273:./app/control/control.c **** 	int32_t pitchOut = 0;
 530              		.loc 1 273 9 view .LVU130
 531 013e 9EE7     		b	.L29
 532              	.LVL50:
 533              	.L40:
 310:./app/control/control.c **** 		yawRateOut = PID_Control(&PID_YawAngle, yaw_error); 
 534              		.loc 1 310 3 is_stmt 1 view .LVU131
 310:./app/control/control.c **** 		yawRateOut = PID_Control(&PID_YawAngle, yaw_error); 
 535              		.loc 1 310 26 is_stmt 0 view .LVU132
 536 0140 194B     		ldr	r3, .L41+16
 537 0142 0022     		movs	r2, #0
 538 0144 1A70     		strb	r2, [r3]
 311:./app/control/control.c **** 	}
 539              		.loc 1 311 3 is_stmt 1 view .LVU133
 311:./app/control/control.c **** 	}
 540              		.loc 1 311 16 is_stmt 0 view .LVU134
 541 0146 B0EE480A 		vmov.f32	s0, s16
 542 014a 1F48     		ldr	r0, .L41+48
 543 014c FFF7FEFF 		bl	PID_Control
 544              	.LVL51:
 545 0150 B0EE408A 		vmov.f32	s16, s0
 546              	.LVL52:
 276:./app/control/control.c **** 	int32_t rollOut = 0;
 547              		.loc 1 276 8 view .LVU135
 548 0154 DFED158A 		vldr.32	s17, .L41+20
 273:./app/control/control.c **** 	int32_t pitchOut = 0;
 549              		.loc 1 273 9 view .LVU136
 550 0158 B0EE680A 		vmov.f32	s0, s17
 551              	.LVL53:
 273:./app/control/control.c **** 	int32_t pitchOut = 0;
 552              		.loc 1 273 9 view .LVU137
 553 015c 8FE7     		b	.L29
 554              	.LVL54:
 555              	.L32:
 325:./app/control/control.c **** 	{
 326:./app/control/control.c **** 		motorOut[i] = int_range(motorOut[i],MOTOR_PWM_MIN,MOTOR_PWM_MAX);
 556              		.loc 1 326 3 is_stmt 1 discriminator 3 view .LVU138
ARM GAS  /tmp/ccA1Y6N5.s 			page 17


 557              		.loc 1 326 35 is_stmt 0 discriminator 3 view .LVU139
 558 015e 04AB     		add	r3, sp, #16
 559 0160 03EB8405 		add	r5, r3, r4, lsl #2
 560              		.loc 1 326 17 discriminator 3 view .LVU140
 561 0164 4FF47A62 		mov	r2, #4000
 562 0168 4FF4FA71 		mov	r1, #500
 563 016c 55F8100C 		ldr	r0, [r5, #-16]
 564 0170 FFF7FEFF 		bl	int_range
 565              	.LVL55:
 566 0174 0146     		mov	r1, r0
 567              		.loc 1 326 15 discriminator 3 view .LVU141
 568 0176 45F8100C 		str	r0, [r5, #-16]
 327:./app/control/control.c **** 		Motor_Out(&Motor[i], motorOut[i]);
 569              		.loc 1 327 3 is_stmt 1 discriminator 3 view .LVU142
 570 017a 04EB4400 		add	r0, r4, r4, lsl #1
 571 017e 134B     		ldr	r3, .L41+52
 572 0180 03EB8000 		add	r0, r3, r0, lsl #2
 573 0184 FFF7FEFF 		bl	Motor_Out
 574              	.LVL56:
 324:./app/control/control.c **** 	{
 575              		.loc 1 324 18 discriminator 3 view .LVU143
 576 0188 0134     		adds	r4, r4, #1
 577              	.LVL57:
 578              	.L31:
 324:./app/control/control.c **** 	{
 579              		.loc 1 324 12 discriminator 1 view .LVU144
 324:./app/control/control.c **** 	{
 580              		.loc 1 324 2 is_stmt 0 discriminator 1 view .LVU145
 581 018a 032C     		cmp	r4, #3
 582 018c E7D9     		bls	.L32
 328:./app/control/control.c **** 	}
 329:./app/control/control.c **** 
 330:./app/control/control.c **** 	
 331:./app/control/control.c **** }
 583              		.loc 1 331 1 view .LVU146
 584 018e 05B0     		add	sp, sp, #20
 585              	.LCFI8:
 586              		.cfi_def_cfa_offset 28
 587              		@ sp needed
 588 0190 BDEC028B 		vldm	sp!, {d8}
 589              	.LCFI9:
 590              		.cfi_restore 80
 591              		.cfi_restore 81
 592              		.cfi_def_cfa_offset 20
 593              	.LVL58:
 594              		.loc 1 331 1 view .LVU147
 595 0194 F0BD     		pop	{r4, r5, r6, r7, pc}
 596              	.LVL59:
 597              	.L42:
 598              		.loc 1 331 1 view .LVU148
 599 0196 00BF     		.align	3
 600              	.L41:
 601 0198 5C8FC2F5 		.word	-171798692
 602 019c 285CF33F 		.word	1072913448
 603 01a0 00003443 		.word	1127481344
 604 01a4 0000B443 		.word	1135869952
 605 01a8 00000000 		.word	.LANCHOR10
ARM GAS  /tmp/ccA1Y6N5.s 			page 18


 606 01ac 00000000 		.word	0
 607 01b0 00000000 		.word	.LANCHOR14
 608 01b4 00000000 		.word	.LANCHOR15
 609 01b8 00000000 		.word	.LANCHOR16
 610 01bc 000034C3 		.word	-1020002304
 611 01c0 00000000 		.word	.LANCHOR11
 612 01c4 00000000 		.word	.LANCHOR12
 613 01c8 00000000 		.word	.LANCHOR13
 614 01cc 00000000 		.word	Motor
 615              		.cfi_endproc
 616              	.LFE136:
 618              		.section	.text.exp_approx,"ax",%progbits
 619              		.align	1
 620              		.global	exp_approx
 621              		.syntax unified
 622              		.thumb
 623              		.thumb_func
 624              		.fpu fpv4-sp-d16
 626              	exp_approx:
 627              	.LVL60:
 628              	.LFB137:
 332:./app/control/control.c **** 
 333:./app/control/control.c **** /* Workaround a lack of optimization in gcc */
 334:./app/control/control.c **** float exp_cst1 = 2139095040.f;
 335:./app/control/control.c **** float exp_cst2 = 0.f;
 336:./app/control/control.c **** 
 337:./app/control/control.c **** 
 338:./app/control/control.c **** /* Relative error bounded by 1e-5 for normalized outputs
 339:./app/control/control.c ****    Returns invalid outputs for nan inputs
 340:./app/control/control.c ****    Continuous error */
 341:./app/control/control.c **** float exp_approx(float val) {
 629              		.loc 1 341 29 is_stmt 1 view -0
 630              		.cfi_startproc
 631              		@ args = 0, pretend = 0, frame = 0
 632              		@ frame_needed = 0, uses_anonymous_args = 0
 633              		@ link register save eliminated.
 342:./app/control/control.c ****   union { int32_t i; float f; } xu, xu2;
 634              		.loc 1 342 3 view .LVU150
 343:./app/control/control.c ****   float val2, val3, val4, b;
 635              		.loc 1 343 3 view .LVU151
 344:./app/control/control.c ****   int32_t val4i;
 636              		.loc 1 344 3 view .LVU152
 345:./app/control/control.c ****   val2 = 12102203.1615614f*val+1065353216.f;
 637              		.loc 1 345 3 view .LVU153
 638              		.loc 1 345 27 is_stmt 0 view .LVU154
 639 0000 DFED237A 		vldr.32	s15, .L50
 640 0004 20EE270A 		vmul.f32	s0, s0, s15
 641              	.LVL61:
 642              		.loc 1 345 8 view .LVU155
 643 0008 DFED227A 		vldr.32	s15, .L50+4
 644 000c 30EE270A 		vadd.f32	s0, s0, s15
 645              	.LVL62:
 346:./app/control/control.c ****   val3 = val2 < exp_cst1 ? val2 : exp_cst1;
 646              		.loc 1 346 3 is_stmt 1 view .LVU156
 647              		.loc 1 346 15 is_stmt 0 view .LVU157
 648 0010 214B     		ldr	r3, .L50+8
 649 0012 93ED007A 		vldr.32	s14, [r3]
ARM GAS  /tmp/ccA1Y6N5.s 			page 19


 650              		.loc 1 346 33 view .LVU158
 651 0016 B4EEC07A 		vcmpe.f32	s14, s0
 652 001a F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 653 001e 01DD     		ble	.L44
 654 0020 B0EE407A 		vmov.f32	s14, s0
 655              	.L44:
 656              	.LVL63:
 347:./app/control/control.c ****   val4 = val3 > exp_cst2 ? val3 : exp_cst2;
 657              		.loc 1 347 3 is_stmt 1 discriminator 4 view .LVU159
 658              		.loc 1 347 15 is_stmt 0 discriminator 4 view .LVU160
 659 0024 1D4B     		ldr	r3, .L50+12
 660 0026 D3ED007A 		vldr.32	s15, [r3]
 661              		.loc 1 347 33 discriminator 4 view .LVU161
 662 002a F4EEC77A 		vcmpe.f32	s15, s14
 663 002e F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 664 0032 01D5     		bpl	.L46
 665              		.loc 1 347 33 view .LVU162
 666 0034 F0EE477A 		vmov.f32	s15, s14
 667              	.L46:
 668              	.LVL64:
 348:./app/control/control.c ****   val4i = (int32_t) val4;
 669              		.loc 1 348 3 is_stmt 1 discriminator 4 view .LVU163
 670              		.loc 1 348 9 is_stmt 0 discriminator 4 view .LVU164
 671 0038 FDEEE77A 		vcvt.s32.f32	s15, s15
 672              	.LVL65:
 673              		.loc 1 348 9 discriminator 4 view .LVU165
 674 003c 17EE903A 		vmov	r3, s15	@ int
 675              	.LVL66:
 349:./app/control/control.c ****   xu.i = val4i & 0x7F800000;                   // mask exponent  / round down to neareset 2^n (impl
 676              		.loc 1 349 3 is_stmt 1 discriminator 4 view .LVU166
 677              		.loc 1 349 16 is_stmt 0 discriminator 4 view .LVU167
 678 0040 03F0FF42 		and	r2, r3, #2139095040
 679 0044 00EE102A 		vmov	s0, r2	@ int
 680              	.LVL67:
 350:./app/control/control.c ****   xu2.i = (val4i & 0x7FFFFF) | 0x3F800000;     // force exponent to 0
 681              		.loc 1 350 3 is_stmt 1 discriminator 4 view .LVU168
 682              		.loc 1 350 18 is_stmt 0 discriminator 4 view .LVU169
 683 0048 C3F31603 		ubfx	r3, r3, #0, #23
 684              	.LVL68:
 351:./app/control/control.c ****   b = xu2.f;
 685              		.loc 1 351 3 is_stmt 1 discriminator 4 view .LVU170
 686 004c 43F07E53 		orr	r3, r3, #1065353216
 687 0050 07EE103A 		vmov	s14, r3	@ int
 688              	.LVL69:
 352:./app/control/control.c **** 
 353:./app/control/control.c ****   /* Generated in Sollya with:
 354:./app/control/control.c ****      > f=remez(1-x*exp(-(x-1)*log(2)),
 355:./app/control/control.c ****                [|(x-1)*(x-2), (x-1)*(x-2)*x, (x-1)*(x-2)*x*x|],
 356:./app/control/control.c ****                [1.000001,1.999999], exp(-(x-1)*log(2)));
 357:./app/control/control.c ****      > plot(exp((x-1)*log(2))/(f+x)-1, [1,2]);
 358:./app/control/control.c ****      > f+x;
 359:./app/control/control.c ****   */
 360:./app/control/control.c ****   return
 689              		.loc 1 360 3 discriminator 4 view .LVU171
 361:./app/control/control.c ****     xu.f * (0.509871020343597804469416f + b *
 362:./app/control/control.c ****             (0.312146713032169896138863f + b *
 363:./app/control/control.c ****              (0.166617139319965966118107f + b *
ARM GAS  /tmp/ccA1Y6N5.s 			page 20


 364:./app/control/control.c ****               (-2.19061993049215080032874e-3f + b *
 690              		.loc 1 364 51 is_stmt 0 discriminator 4 view .LVU172
 691 0054 DFED127A 		vldr.32	s15, .L50+16
 692              	.LVL70:
 693              		.loc 1 364 51 discriminator 4 view .LVU173
 694 0058 67EE277A 		vmul.f32	s15, s14, s15
 695              		.loc 1 364 47 discriminator 4 view .LVU174
 696 005c DFED116A 		vldr.32	s13, .L50+20
 697 0060 77EEE67A 		vsub.f32	s15, s15, s13
 363:./app/control/control.c ****               (-2.19061993049215080032874e-3f + b *
 698              		.loc 1 363 47 discriminator 4 view .LVU175
 699 0064 67EE877A 		vmul.f32	s15, s15, s14
 363:./app/control/control.c ****               (-2.19061993049215080032874e-3f + b *
 700              		.loc 1 363 43 discriminator 4 view .LVU176
 701 0068 DFED0F6A 		vldr.32	s13, .L50+24
 702 006c 77EEA67A 		vadd.f32	s15, s15, s13
 362:./app/control/control.c ****              (0.166617139319965966118107f + b *
 703              		.loc 1 362 46 discriminator 4 view .LVU177
 704 0070 67EE877A 		vmul.f32	s15, s15, s14
 362:./app/control/control.c ****              (0.166617139319965966118107f + b *
 705              		.loc 1 362 42 discriminator 4 view .LVU178
 706 0074 DFED0D6A 		vldr.32	s13, .L50+28
 707 0078 77EEA67A 		vadd.f32	s15, s15, s13
 361:./app/control/control.c ****     xu.f * (0.509871020343597804469416f + b *
 708              		.loc 1 361 45 discriminator 4 view .LVU179
 709 007c 67EE877A 		vmul.f32	s15, s15, s14
 361:./app/control/control.c ****     xu.f * (0.509871020343597804469416f + b *
 710              		.loc 1 361 41 discriminator 4 view .LVU180
 711 0080 9FED0B7A 		vldr.32	s14, .L50+32
 712 0084 77EE877A 		vadd.f32	s15, s15, s14
 365:./app/control/control.c ****                1.3555747234758484073940937e-2f))));
 366:./app/control/control.c **** }
 713              		.loc 1 366 1 discriminator 4 view .LVU181
 714 0088 27EE800A 		vmul.f32	s0, s15, s0
 715 008c 7047     		bx	lr
 716              	.L51:
 717 008e 00BF     		.align	2
 718              	.L50:
 719 0090 3BAA384B 		.word	1262004795
 720 0094 00007E4E 		.word	1316880384
 721 0098 00000000 		.word	.LANCHOR17
 722 009c 00000000 		.word	.LANCHOR18
 723 00a0 ED185E3C 		.word	1012799725
 724 00a4 81900F3B 		.word	990875777
 725 00a8 AF9D2A3E 		.word	1042980271
 726 00ac B2D19F3E 		.word	1050661298
 727 00b0 E886023F 		.word	1057130216
 728              		.cfi_endproc
 729              	.LFE137:
 731              		.section	.text.log_approx,"ax",%progbits
 732              		.align	1
 733              		.global	log_approx
 734              		.syntax unified
 735              		.thumb
 736              		.thumb_func
 737              		.fpu fpv4-sp-d16
 739              	log_approx:
ARM GAS  /tmp/ccA1Y6N5.s 			page 21


 740              	.LVL71:
 741              	.LFB138:
 367:./app/control/control.c **** 
 368:./app/control/control.c **** 
 369:./app/control/control.c **** /* Absolute error bounded by 1e-6 for normalized inputs
 370:./app/control/control.c ****    Returns a finite number for +inf input
 371:./app/control/control.c ****    Returns -inf for nan and <= 0 inputs.
 372:./app/control/control.c ****    Continuous error. */
 373:./app/control/control.c **** float log_approx(float val) {
 742              		.loc 1 373 29 is_stmt 1 view -0
 743              		.cfi_startproc
 744              		@ args = 0, pretend = 0, frame = 0
 745              		@ frame_needed = 0, uses_anonymous_args = 0
 746              		@ link register save eliminated.
 747              		.loc 1 373 29 is_stmt 0 view .LVU183
 748 0000 F0EE407A 		vmov.f32	s15, s0
 374:./app/control/control.c ****   union { float f; int32_t i; } valu;
 749              		.loc 1 374 3 is_stmt 1 view .LVU184
 375:./app/control/control.c ****   float exp, addcst, x;
 750              		.loc 1 375 3 view .LVU185
 376:./app/control/control.c ****   valu.f = val;
 751              		.loc 1 376 3 view .LVU186
 377:./app/control/control.c ****   exp = valu.i >> 23;
 752              		.loc 1 377 3 view .LVU187
 753 0004 10EE103A 		vmov	r3, s0	@ int
 754              		.loc 1 377 16 is_stmt 0 view .LVU188
 755 0008 DA15     		asrs	r2, r3, #23
 756 000a 00EE102A 		vmov	s0, r2	@ int
 757              	.LVL72:
 758              		.loc 1 377 7 view .LVU189
 759 000e B8EEC07A 		vcvt.f32.s32	s14, s0
 760              	.LVL73:
 378:./app/control/control.c ****   /* 89.970756366f = 127 * log(2) - constant term of polynomial */
 379:./app/control/control.c ****   addcst = val > 0 ? -89.970756366f : -(float)INFINITY;
 761              		.loc 1 379 3 is_stmt 1 view .LVU190
 762              		.loc 1 379 37 is_stmt 0 view .LVU191
 763 0012 F5EEC07A 		vcmpe.f32	s15, #0
 764 0016 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 765 001a 2CDD     		ble	.L57
 766 001c DFED176A 		vldr.32	s13, .L58
 767              	.L53:
 768              	.LVL74:
 380:./app/control/control.c ****   valu.i = (valu.i & 0x7FFFFF) | 0x3F800000;
 769              		.loc 1 380 3 is_stmt 1 discriminator 4 view .LVU192
 770              		.loc 1 380 20 is_stmt 0 discriminator 4 view .LVU193
 771 0020 C3F31603 		ubfx	r3, r3, #0, #23
 381:./app/control/control.c ****   x = valu.f;
 772              		.loc 1 381 3 is_stmt 1 discriminator 4 view .LVU194
 773 0024 43F07E53 		orr	r3, r3, #1065353216
 774 0028 00EE103A 		vmov	s0, r3	@ int
 775              	.LVL75:
 382:./app/control/control.c **** 
 383:./app/control/control.c **** 
 384:./app/control/control.c ****   /* Generated in Sollya using:
 385:./app/control/control.c ****     > f = remez(log(x)-(x-1)*log(2),
 386:./app/control/control.c ****             [|1,(x-1)*(x-2), (x-1)*(x-2)*x, (x-1)*(x-2)*x*x,
 387:./app/control/control.c ****               (x-1)*(x-2)*x*x*x|], [1,2], 1, 1e-8);
ARM GAS  /tmp/ccA1Y6N5.s 			page 22


 388:./app/control/control.c ****     > plot(f+(x-1)*log(2)-log(x), [1,2]);
 389:./app/control/control.c ****     > f+(x-1)*log(2)
 390:./app/control/control.c ****  */
 391:./app/control/control.c ****   return
 776              		.loc 1 391 3 discriminator 4 view .LVU195
 392:./app/control/control.c ****     x * (3.529304993f + x * (-2.461222105f +
 393:./app/control/control.c ****       x * (1.130626167f + x * (-0.288739945f +
 394:./app/control/control.c ****         x * 3.110401639e-2f))))
 777              		.loc 1 394 11 is_stmt 0 discriminator 4 view .LVU196
 778 002c DFED147A 		vldr.32	s15, .L58+4
 779              	.LVL76:
 780              		.loc 1 394 11 discriminator 4 view .LVU197
 781 0030 60EE277A 		vmul.f32	s15, s0, s15
 393:./app/control/control.c ****         x * 3.110401639e-2f))))
 782              		.loc 1 393 46 discriminator 4 view .LVU198
 783 0034 9FED136A 		vldr.32	s12, .L58+8
 784 0038 77EEC67A 		vsub.f32	s15, s15, s12
 393:./app/control/control.c ****         x * 3.110401639e-2f))))
 785              		.loc 1 393 29 discriminator 4 view .LVU199
 786 003c 67EE807A 		vmul.f32	s15, s15, s0
 393:./app/control/control.c ****         x * 3.110401639e-2f))))
 787              		.loc 1 393 25 discriminator 4 view .LVU200
 788 0040 9FED116A 		vldr.32	s12, .L58+12
 789 0044 77EE867A 		vadd.f32	s15, s15, s12
 393:./app/control/control.c ****         x * 3.110401639e-2f))))
 790              		.loc 1 393 9 discriminator 4 view .LVU201
 791 0048 67EE807A 		vmul.f32	s15, s15, s0
 392:./app/control/control.c ****     x * (3.529304993f + x * (-2.461222105f +
 792              		.loc 1 392 44 discriminator 4 view .LVU202
 793 004c 9FED0F6A 		vldr.32	s12, .L58+16
 794 0050 77EEC67A 		vsub.f32	s15, s15, s12
 392:./app/control/control.c ****     x * (3.529304993f + x * (-2.461222105f +
 795              		.loc 1 392 27 discriminator 4 view .LVU203
 796 0054 67EE807A 		vmul.f32	s15, s15, s0
 392:./app/control/control.c ****     x * (3.529304993f + x * (-2.461222105f +
 797              		.loc 1 392 23 discriminator 4 view .LVU204
 798 0058 9FED0D6A 		vldr.32	s12, .L58+20
 799 005c 77EE867A 		vadd.f32	s15, s15, s12
 392:./app/control/control.c ****     x * (3.529304993f + x * (-2.461222105f +
 800              		.loc 1 392 7 discriminator 4 view .LVU205
 801 0060 67EE807A 		vmul.f32	s15, s15, s0
 395:./app/control/control.c ****     + (addcst + 0.69314718055995f*exp);
 802              		.loc 1 395 34 discriminator 4 view .LVU206
 803 0064 9FED0B0A 		vldr.32	s0, .L58+24
 804 0068 27EE000A 		vmul.f32	s0, s14, s0
 805              		.loc 1 395 15 discriminator 4 view .LVU207
 806 006c 30EE260A 		vadd.f32	s0, s0, s13
 396:./app/control/control.c **** }
 807              		.loc 1 396 1 discriminator 4 view .LVU208
 808 0070 37EE800A 		vadd.f32	s0, s15, s0
 809 0074 7047     		bx	lr
 810              	.LVL77:
 811              	.L57:
 379:./app/control/control.c ****   valu.i = (valu.i & 0x7FFFFF) | 0x3F800000;
 812              		.loc 1 379 37 view .LVU209
 813 0076 DFED086A 		vldr.32	s13, .L58+28
 814 007a D1E7     		b	.L53
ARM GAS  /tmp/ccA1Y6N5.s 			page 23


 815              	.L59:
 816              		.align	2
 817              	.L58:
 818 007c 07F1B3C2 		.word	-1028394745
 819 0080 DACDFE3C 		.word	1023331802
 820 0084 B9D5933E 		.word	1049875897
 821 0088 5CB8903F 		.word	1066448988
 822 008c AA841D40 		.word	1075676330
 823 0090 22E06140 		.word	1080156194
 824 0094 1872313F 		.word	1060205080
 825 0098 000080FF 		.word	-8388608
 826              		.cfi_endproc
 827              	.LFE138:
 829              		.section	.text.pow_approx,"ax",%progbits
 830              		.align	1
 831              		.global	pow_approx
 832              		.syntax unified
 833              		.thumb
 834              		.thumb_func
 835              		.fpu fpv4-sp-d16
 837              	pow_approx:
 838              	.LVL78:
 839              	.LFB139:
 397:./app/control/control.c **** 
 398:./app/control/control.c **** 
 399:./app/control/control.c **** float pow_approx(float a, float b)
 400:./app/control/control.c **** {
 840              		.loc 1 400 1 is_stmt 1 view -0
 841              		.cfi_startproc
 842              		@ args = 0, pretend = 0, frame = 0
 843              		@ frame_needed = 0, uses_anonymous_args = 0
 844              		.loc 1 400 1 is_stmt 0 view .LVU211
 845 0000 08B5     		push	{r3, lr}
 846              	.LCFI10:
 847              		.cfi_def_cfa_offset 8
 848              		.cfi_offset 3, -8
 849              		.cfi_offset 14, -4
 850 0002 2DED028B 		vpush.64	{d8}
 851              	.LCFI11:
 852              		.cfi_def_cfa_offset 16
 853              		.cfi_offset 80, -16
 854              		.cfi_offset 81, -12
 855 0006 B0EE608A 		vmov.f32	s16, s1
 401:./app/control/control.c ****     return exp_approx(b * log_approx(a));
 856              		.loc 1 401 5 is_stmt 1 view .LVU212
 857              		.loc 1 401 27 is_stmt 0 view .LVU213
 858 000a FFF7FEFF 		bl	log_approx
 859              	.LVL79:
 860              		.loc 1 401 12 view .LVU214
 861 000e 20EE080A 		vmul.f32	s0, s0, s16
 862 0012 FFF7FEFF 		bl	exp_approx
 863              	.LVL80:
 402:./app/control/control.c **** }
 864              		.loc 1 402 1 view .LVU215
 865 0016 BDEC028B 		vldm	sp!, {d8}
 866              	.LCFI12:
 867              		.cfi_restore 80
ARM GAS  /tmp/ccA1Y6N5.s 			page 24


 868              		.cfi_restore 81
 869              		.cfi_def_cfa_offset 8
 870              	.LVL81:
 871              		.loc 1 402 1 view .LVU216
 872 001a 08BD     		pop	{r3, pc}
 873              		.cfi_endproc
 874              	.LFE139:
 876              		.section	.text.PressureToAltitude,"ax",%progbits
 877              		.align	1
 878              		.global	PressureToAltitude
 879              		.syntax unified
 880              		.thumb
 881              		.thumb_func
 882              		.fpu fpv4-sp-d16
 884              	PressureToAltitude:
 885              	.LVL82:
 886              	.LFB140:
 403:./app/control/control.c **** 
 404:./app/control/control.c **** 
 405:./app/control/control.c **** float PressureToAltitude(float pressure)//cm
 406:./app/control/control.c **** { 
 887              		.loc 1 406 1 is_stmt 1 view -0
 888              		.cfi_startproc
 889              		@ args = 0, pretend = 0, frame = 0
 890              		@ frame_needed = 0, uses_anonymous_args = 0
 891              		.loc 1 406 1 is_stmt 0 view .LVU218
 892 0000 08B5     		push	{r3, lr}
 893              	.LCFI13:
 894              		.cfi_def_cfa_offset 8
 895              		.cfi_offset 3, -8
 896              		.cfi_offset 14, -4
 407:./app/control/control.c ****     //return 4433000.0f * (1.0f - powf(0.190295f, pressure/101325.0f));
 408:./app/control/control.c **** 	//return 44300.0f * (1.0f - powf(pressure/101325.0f, 0.190257519));
 409:./app/control/control.c **** 	//return (1.0f - pow_approx(pressure / 101325.0f, 0.190295f)) * 4433000.0f;
 410:./app/control/control.c **** 	return (1.0f - powf(pressure / 101325.0f, 0.190295f)) * 4433000.0f;
 897              		.loc 1 410 2 is_stmt 1 view .LVU219
 898              		.loc 1 410 17 is_stmt 0 view .LVU220
 899 0002 DFED080A 		vldr.32	s1, .L64
 900 0006 DFED087A 		vldr.32	s15, .L64+4
 901 000a 80EE270A 		vdiv.f32	s0, s0, s15
 902              	.LVL83:
 903              		.loc 1 410 17 view .LVU221
 904 000e FFF7FEFF 		bl	powf
 905              	.LVL84:
 906              		.loc 1 410 15 view .LVU222
 907 0012 F7EE007A 		vmov.f32	s15, #1.0e+0
 908 0016 77EEC07A 		vsub.f32	s15, s15, s0
 411:./app/control/control.c **** }
 909              		.loc 1 411 1 view .LVU223
 910 001a 9FED040A 		vldr.32	s0, .L64+8
 911 001e 27EE800A 		vmul.f32	s0, s15, s0
 912 0022 08BD     		pop	{r3, pc}
 913              	.L65:
 914              		.align	2
 915              	.L64:
 916 0024 B1DC423E 		.word	1044569265
 917 0028 80E6C547 		.word	1204151936
ARM GAS  /tmp/ccA1Y6N5.s 			page 25


 918 002c D048874A 		.word	1250379984
 919              		.cfi_endproc
 920              	.LFE140:
 922              		.global	__aeabi_dmul
 923              		.global	__aeabi_dadd
 924              		.section	.text.Strapdown_INS_High,"ax",%progbits
 925              		.align	1
 926              		.global	Strapdown_INS_High
 927              		.syntax unified
 928              		.thumb
 929              		.thumb_func
 930              		.fpu fpv4-sp-d16
 932              	Strapdown_INS_High:
 933              	.LVL85:
 934              	.LFB141:
 412:./app/control/control.c **** 
 413:./app/control/control.c **** 
 414:./app/control/control.c **** 
 415:./app/control/control.c **** #define TIME_CONTANST_Z     5.0f
 416:./app/control/control.c **** #define K_ACC_Z (5.0f / (TIME_CONTANST_Z * TIME_CONTANST_Z * TIME_CONTANST_Z))
 417:./app/control/control.c **** #define K_VEL_Z (3.0f / (TIME_CONTANST_Z * TIME_CONTANST_Z))
 418:./app/control/control.c **** #define K_POS_Z (3.0f / TIME_CONTANST_Z)
 419:./app/control/control.c **** 
 420:./app/control/control.c **** float  High_Filter[3]={
 421:./app/control/control.c **** 	0.010,  //0.03  0.015
 422:./app/control/control.c **** 	0.05,//0.05     
 423:./app/control/control.c **** 	0.02,//0.03 0.02
 424:./app/control/control.c **** };
 425:./app/control/control.c **** 
 426:./app/control/control.c **** 
 427:./app/control/control.c **** float Altitude_Dealt=0;
 428:./app/control/control.c **** 
 429:./app/control/control.c **** float acc_correction[3] = {0};
 430:./app/control/control.c **** float vel_correction[3] = {0};
 431:./app/control/control.c **** float pos_correction[3] = {0};
 432:./app/control/control.c **** 
 433:./app/control/control.c **** float SpeedDealt[3] = {0};
 434:./app/control/control.c **** 
 435:./app/control/control.c ****  
 436:./app/control/control.c **** 
 437:./app/control/control.c **** void Strapdown_INS_High(TriaxialData_t * acc, float altitude, float dt)
 438:./app/control/control.c **** {
 935              		.loc 1 438 1 is_stmt 1 view -0
 936              		.cfi_startproc
 937              		@ args = 0, pretend = 0, frame = 16
 938              		@ frame_needed = 0, uses_anonymous_args = 0
 939              		.loc 1 438 1 is_stmt 0 view .LVU225
 940 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 941              	.LCFI14:
 942              		.cfi_def_cfa_offset 20
 943              		.cfi_offset 4, -20
 944              		.cfi_offset 5, -16
 945              		.cfi_offset 6, -12
 946              		.cfi_offset 7, -8
 947              		.cfi_offset 14, -4
 948 0002 2DED048B 		vpush.64	{d8, d9}
 949              	.LCFI15:
ARM GAS  /tmp/ccA1Y6N5.s 			page 26


 950              		.cfi_def_cfa_offset 36
 951              		.cfi_offset 80, -36
 952              		.cfi_offset 81, -32
 953              		.cfi_offset 82, -28
 954              		.cfi_offset 83, -24
 955 0006 85B0     		sub	sp, sp, #20
 956              	.LCFI16:
 957              		.cfi_def_cfa_offset 56
 958 0008 0146     		mov	r1, r0
 959 000a F0EE408A 		vmov.f32	s17, s0
 960 000e F0EE609A 		vmov.f32	s19, s1
 439:./app/control/control.c **** 	TriaxialData_t accEarth = {0};
 961              		.loc 1 439 2 is_stmt 1 view .LVU226
 962              		.loc 1 439 17 is_stmt 0 view .LVU227
 963 0012 0023     		movs	r3, #0
 964 0014 0193     		str	r3, [sp, #4]
 965 0016 0293     		str	r3, [sp, #8]
 966 0018 0393     		str	r3, [sp, #12]
 440:./app/control/control.c **** 	
 441:./app/control/control.c **** 	Quaternion_BodyToEarth(&Quaternion, acc, &accEarth);
 967              		.loc 1 441 2 is_stmt 1 view .LVU228
 968 001a 01AA     		add	r2, sp, #4
 969 001c 5D48     		ldr	r0, .L75
 970              	.LVL86:
 971              		.loc 1 441 2 is_stmt 0 view .LVU229
 972 001e FFF7FEFF 		bl	Quaternion_BodyToEarth
 973              	.LVL87:
 442:./app/control/control.c **** 
 443:./app/control/control.c **** 	accEarth.X *= GRAVITY_ACC;
 974              		.loc 1 443 2 is_stmt 1 view .LVU230
 975              		.loc 1 443 13 is_stmt 0 view .LVU231
 976 0022 DFED5D7A 		vldr.32	s15, .L75+4
 977 0026 9DED017A 		vldr.32	s14, [sp, #4]
 978 002a 27EE277A 		vmul.f32	s14, s14, s15
 979 002e 8DED017A 		vstr.32	s14, [sp, #4]
 444:./app/control/control.c **** 	accEarth.Y *= GRAVITY_ACC;
 980              		.loc 1 444 2 is_stmt 1 view .LVU232
 981              		.loc 1 444 13 is_stmt 0 view .LVU233
 982 0032 9DED027A 		vldr.32	s14, [sp, #8]
 983 0036 27EE277A 		vmul.f32	s14, s14, s15
 984 003a 8DED027A 		vstr.32	s14, [sp, #8]
 445:./app/control/control.c **** 	accEarth.Z *= GRAVITY_ACC;
 985              		.loc 1 445 2 is_stmt 1 view .LVU234
 986              		.loc 1 445 13 is_stmt 0 view .LVU235
 987 003e 9DED038A 		vldr.32	s16, [sp, #12]
 988 0042 28EE278A 		vmul.f32	s16, s16, s15
 989 0046 8DED038A 		vstr.32	s16, [sp, #12]
 446:./app/control/control.c **** 	
 447:./app/control/control.c **** 	accEarth.Z -= GRAVITY_ACC + 34;
 990              		.loc 1 447 2 is_stmt 1 view .LVU236
 991              		.loc 1 447 13 is_stmt 0 view .LVU237
 992 004a DFED547A 		vldr.32	s15, .L75+8
 993 004e 38EE678A 		vsub.f32	s16, s16, s15
 994 0052 8DED038A 		vstr.32	s16, [sp, #12]
 448:./app/control/control.c **** 
 449:./app/control/control.c **** 	Altitude_Dealt = altitude - estimate_position.Z;//气压计(超声波)与SINS估计量的差，单
 995              		.loc 1 449 2 is_stmt 1 view .LVU238
ARM GAS  /tmp/ccA1Y6N5.s 			page 27


 996              		.loc 1 449 47 is_stmt 0 view .LVU239
 997 0056 524B     		ldr	r3, .L75+12
 998 0058 D3ED027A 		vldr.32	s15, [r3, #8]
 999              		.loc 1 449 28 view .LVU240
 1000 005c 78EEE77A 		vsub.f32	s15, s17, s15
 1001              		.loc 1 449 17 view .LVU241
 1002 0060 504B     		ldr	r3, .L75+16
 1003 0062 C3ED007A 		vstr.32	s15, [r3]
 450:./app/control/control.c **** 	
 451:./app/control/control.c **** 	if(ABS(Altitude_Dealt) > 500)
 1004              		.loc 1 451 2 is_stmt 1 view .LVU242
 1005              		.loc 1 451 25 is_stmt 0 view .LVU243
 1006 0066 F5EEC07A 		vcmpe.f32	s15, #0
 1007 006a F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 1008 006e 00F18680 		bmi	.L74
 1009              		.loc 1 451 25 discriminator 2 view .LVU244
 1010 0072 9FED4D7A 		vldr.32	s14, .L75+20
 1011 0076 F4EEC77A 		vcmpe.f32	s15, s14
 1012 007a F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 1013 007e CCBF     		ite	gt
 1014 0080 0123     		movgt	r3, #1
 1015 0082 0023     		movle	r3, #0
 1016              	.L69:
 1017              		.loc 1 451 4 discriminator 4 view .LVU245
 1018 0084 13B1     		cbz	r3, .L70
 452:./app/control/control.c **** 	{
 453:./app/control/control.c **** 		//estimate_position.Z = altitude;
 454:./app/control/control.c **** 		Origion_NamelessQuad_position.Z = altitude;
 1019              		.loc 1 454 3 is_stmt 1 view .LVU246
 1020              		.loc 1 454 35 is_stmt 0 view .LVU247
 1021 0086 494B     		ldr	r3, .L75+24
 1022 0088 C3ED028A 		vstr.32	s17, [r3, #8]
 1023              	.L70:
 455:./app/control/control.c **** 	}
 456:./app/control/control.c **** 
 457:./app/control/control.c **** 	acc_correction[2] += High_Filter[0]*Altitude_Dealt* K_ACC_Z;//加速度校正量
 1024              		.loc 1 457 2 is_stmt 1 view .LVU248
 1025              		.loc 1 457 34 is_stmt 0 view .LVU249
 1026 008c 484B     		ldr	r3, .L75+28
 1027 008e 93ED007A 		vldr.32	s14, [r3]
 1028              		.loc 1 457 37 view .LVU250
 1029 0092 27EE877A 		vmul.f32	s14, s15, s14
 1030              		.loc 1 457 52 view .LVU251
 1031 0096 DFED476A 		vldr.32	s13, .L75+32
 1032 009a 27EE267A 		vmul.f32	s14, s14, s13
 1033              		.loc 1 457 20 view .LVU252
 1034 009e 464A     		ldr	r2, .L75+36
 1035 00a0 D2ED026A 		vldr.32	s13, [r2, #8]
 1036 00a4 37EE267A 		vadd.f32	s14, s14, s13
 1037 00a8 82ED027A 		vstr.32	s14, [r2, #8]
 458:./app/control/control.c **** 	vel_correction[2] += High_Filter[1]*Altitude_Dealt* K_VEL_Z;//速度校正量
 1038              		.loc 1 458 2 is_stmt 1 view .LVU253
 1039              		.loc 1 458 34 is_stmt 0 view .LVU254
 1040 00ac 93ED019A 		vldr.32	s18, [r3, #4]
 1041              		.loc 1 458 37 view .LVU255
 1042 00b0 27EE899A 		vmul.f32	s18, s15, s18
 1043              		.loc 1 458 52 view .LVU256
ARM GAS  /tmp/ccA1Y6N5.s 			page 28


 1044 00b4 DFED416A 		vldr.32	s13, .L75+40
 1045 00b8 29EE269A 		vmul.f32	s18, s18, s13
 1046              		.loc 1 458 20 view .LVU257
 1047 00bc 404A     		ldr	r2, .L75+44
 1048 00be D2ED026A 		vldr.32	s13, [r2, #8]
 1049 00c2 39EE269A 		vadd.f32	s18, s18, s13
 1050 00c6 82ED029A 		vstr.32	s18, [r2, #8]
 459:./app/control/control.c **** 	pos_correction[2] += High_Filter[2]*Altitude_Dealt* K_POS_Z;//位置校正量
 1051              		.loc 1 459 2 is_stmt 1 view .LVU258
 1052              		.loc 1 459 34 is_stmt 0 view .LVU259
 1053 00ca D3ED028A 		vldr.32	s17, [r3, #8]
 1054              	.LVL88:
 1055              		.loc 1 459 37 view .LVU260
 1056 00ce 67EEA88A 		vmul.f32	s17, s15, s17
 1057              		.loc 1 459 52 view .LVU261
 1058 00d2 DFED3C7A 		vldr.32	s15, .L75+48
 1059 00d6 68EEA78A 		vmul.f32	s17, s17, s15
 1060              		.loc 1 459 20 view .LVU262
 1061 00da 3B4B     		ldr	r3, .L75+52
 1062 00dc D3ED027A 		vldr.32	s15, [r3, #8]
 1063 00e0 78EEA78A 		vadd.f32	s17, s17, s15
 1064 00e4 C3ED028A 		vstr.32	s17, [r3, #8]
 460:./app/control/control.c **** 
 461:./app/control/control.c **** 	//原始加速度+加速度校正量=融合后的加速度
 462:./app/control/control.c **** 	estimate_acc.Z = accEarth.Z + acc_correction[2];
 1065              		.loc 1 462 2 is_stmt 1 view .LVU263
 1066              		.loc 1 462 30 is_stmt 0 view .LVU264
 1067 00e8 38EE078A 		vadd.f32	s16, s16, s14
 1068              		.loc 1 462 17 view .LVU265
 1069 00ec 374B     		ldr	r3, .L75+56
 1070 00ee 83ED028A 		vstr.32	s16, [r3, #8]
 463:./app/control/control.c **** 
 464:./app/control/control.c **** 	//融合后的加速度积分得到速度增量
 465:./app/control/control.c **** 	SpeedDealt[2]=estimate_acc.Z * dt;
 1071              		.loc 1 465 2 is_stmt 1 view .LVU266
 1072              		.loc 1 465 31 is_stmt 0 view .LVU267
 1073 00f2 28EE298A 		vmul.f32	s16, s16, s19
 1074              		.loc 1 465 15 view .LVU268
 1075 00f6 364B     		ldr	r3, .L75+60
 1076 00f8 83ED028A 		vstr.32	s16, [r3, #8]
 466:./app/control/control.c **** 
 467:./app/control/control.c **** 	//得到速度增量后，更新原始位置
 468:./app/control/control.c **** 	Origion_NamelessQuad_position.Z += (estimate_velocity.Z + 0.5 * SpeedDealt[2]) * dt,
 1077              		.loc 1 468 2 is_stmt 1 view .LVU269
 1078              		.loc 1 468 55 is_stmt 0 view .LVU270
 1079 00fc 354E     		ldr	r6, .L75+64
 1080 00fe B068     		ldr	r0, [r6, #8]	@ float
 1081 0100 FFF7FEFF 		bl	__aeabi_f2d
 1082              	.LVL89:
 1083 0104 0446     		mov	r4, r0
 1084 0106 0D46     		mov	r5, r1
 1085              		.loc 1 468 76 view .LVU271
 1086 0108 18EE100A 		vmov	r0, s16
 1087 010c FFF7FEFF 		bl	__aeabi_f2d
 1088              	.LVL90:
 1089              		.loc 1 468 64 view .LVU272
 1090 0110 0022     		movs	r2, #0
ARM GAS  /tmp/ccA1Y6N5.s 			page 29


 1091 0112 314B     		ldr	r3, .L75+68
 1092 0114 FFF7FEFF 		bl	__aeabi_dmul
 1093              	.LVL91:
 1094 0118 0246     		mov	r2, r0
 1095 011a 0B46     		mov	r3, r1
 1096              		.loc 1 468 58 view .LVU273
 1097 011c 2046     		mov	r0, r4
 1098 011e 2946     		mov	r1, r5
 1099 0120 FFF7FEFF 		bl	__aeabi_dadd
 1100              	.LVL92:
 1101 0124 0446     		mov	r4, r0
 1102 0126 0D46     		mov	r5, r1
 1103              		.loc 1 468 81 view .LVU274
 1104 0128 19EE900A 		vmov	r0, s19
 1105 012c FFF7FEFF 		bl	__aeabi_f2d
 1106              	.LVL93:
 1107 0130 2246     		mov	r2, r4
 1108 0132 2B46     		mov	r3, r5
 1109 0134 FFF7FEFF 		bl	__aeabi_dmul
 1110              	.LVL94:
 1111 0138 0446     		mov	r4, r0
 1112 013a 0D46     		mov	r5, r1
 1113              		.loc 1 468 34 view .LVU275
 1114 013c 1B4F     		ldr	r7, .L75+24
 1115 013e B868     		ldr	r0, [r7, #8]	@ float
 1116 0140 FFF7FEFF 		bl	__aeabi_f2d
 1117              	.LVL95:
 1118 0144 2246     		mov	r2, r4
 1119 0146 2B46     		mov	r3, r5
 1120 0148 FFF7FEFF 		bl	__aeabi_dadd
 1121              	.LVL96:
 1122 014c FFF7FEFF 		bl	__aeabi_d2f
 1123              	.LVL97:
 1124 0150 07EE900A 		vmov	s15, r0
 1125 0154 B860     		str	r0, [r7, #8]	@ float
 469:./app/control/control.c **** 
 470:./app/control/control.c **** 	//原始位置+位置校正量=融合后位置
 471:./app/control/control.c **** 	estimate_position.Z = Origion_NamelessQuad_position.Z + pos_correction[2];
 1126              		.loc 1 471 56 view .LVU276
 1127 0156 78EEA78A 		vadd.f32	s17, s17, s15
 1128              		.loc 1 471 22 view .LVU277
 1129 015a 114B     		ldr	r3, .L75+12
 1130 015c C3ED028A 		vstr.32	s17, [r3, #8]
 472:./app/control/control.c **** 
 473:./app/control/control.c **** 	//原始速度+速度校正量=融合后的速度
 474:./app/control/control.c **** 	Origion_NamelessQuad_velocity.Z += SpeedDealt[2];
 1131              		.loc 1 474 2 is_stmt 1 view .LVU278
 1132              		.loc 1 474 34 is_stmt 0 view .LVU279
 1133 0160 1E4B     		ldr	r3, .L75+72
 1134 0162 D3ED027A 		vldr.32	s15, [r3, #8]
 1135 0166 38EE278A 		vadd.f32	s16, s16, s15
 1136 016a 83ED028A 		vstr.32	s16, [r3, #8]
 475:./app/control/control.c **** 	estimate_velocity.Z = Origion_NamelessQuad_velocity.Z + vel_correction[2];
 1137              		.loc 1 475 2 is_stmt 1 view .LVU280
 1138              		.loc 1 475 56 is_stmt 0 view .LVU281
 1139 016e 39EE088A 		vadd.f32	s16, s18, s16
 1140              		.loc 1 475 22 view .LVU282
ARM GAS  /tmp/ccA1Y6N5.s 			page 30


 1141 0172 86ED028A 		vstr.32	s16, [r6, #8]
 476:./app/control/control.c **** }
 1142              		.loc 1 476 1 view .LVU283
 1143 0176 05B0     		add	sp, sp, #20
 1144              	.LCFI17:
 1145              		.cfi_remember_state
 1146              		.cfi_def_cfa_offset 36
 1147              		@ sp needed
 1148 0178 BDEC048B 		vldm	sp!, {d8-d9}
 1149              	.LCFI18:
 1150              		.cfi_restore 82
 1151              		.cfi_restore 83
 1152              		.cfi_restore 80
 1153              		.cfi_restore 81
 1154              		.cfi_def_cfa_offset 20
 1155 017c F0BD     		pop	{r4, r5, r6, r7, pc}
 1156              	.LVL98:
 1157              	.L74:
 1158              	.LCFI19:
 1159              		.cfi_restore_state
 451:./app/control/control.c **** 	{
 1160              		.loc 1 451 25 discriminator 1 view .LVU284
 1161 017e 9FED187A 		vldr.32	s14, .L75+76
 1162 0182 F4EEC77A 		vcmpe.f32	s15, s14
 1163 0186 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 1164 018a 4CBF     		ite	mi
 1165 018c 0123     		movmi	r3, #1
 1166 018e 0023     		movpl	r3, #0
 1167 0190 78E7     		b	.L69
 1168              	.L76:
 1169 0192 00BF     		.align	2
 1170              	.L75:
 1171 0194 00000000 		.word	.LANCHOR19
 1172 0198 00007544 		.word	1148518400
 1173 019c 00807D44 		.word	1149075456
 1174 01a0 00000000 		.word	.LANCHOR20
 1175 01a4 00000000 		.word	.LANCHOR21
 1176 01a8 0000FA43 		.word	1140457472
 1177 01ac 00000000 		.word	.LANCHOR22
 1178 01b0 00000000 		.word	.LANCHOR23
 1179 01b4 0AD7233D 		.word	1025758986
 1180 01b8 00000000 		.word	.LANCHOR24
 1181 01bc 8FC2F53D 		.word	1039516303
 1182 01c0 00000000 		.word	.LANCHOR25
 1183 01c4 9A99193F 		.word	1058642330
 1184 01c8 00000000 		.word	.LANCHOR26
 1185 01cc 00000000 		.word	.LANCHOR27
 1186 01d0 00000000 		.word	.LANCHOR28
 1187 01d4 00000000 		.word	.LANCHOR29
 1188 01d8 0000E03F 		.word	1071644672
 1189 01dc 00000000 		.word	.LANCHOR30
 1190 01e0 0000FAC3 		.word	-1007026176
 1191              		.cfi_endproc
 1192              	.LFE141:
 1194              		.section	.text.PositionFusion,"ax",%progbits
 1195              		.align	1
 1196              		.global	PositionFusion
ARM GAS  /tmp/ccA1Y6N5.s 			page 31


 1197              		.syntax unified
 1198              		.thumb
 1199              		.thumb_func
 1200              		.fpu fpv4-sp-d16
 1202              	PositionFusion:
 1203              	.LVL99:
 1204              	.LFB142:
 477:./app/control/control.c **** 
 478:./app/control/control.c **** 
 479:./app/control/control.c **** float baro_compensate_k = 0.02f;
 480:./app/control/control.c **** 
 481:./app/control/control.c **** void PositionFusion(TriaxialData_t * acc, float observeAltitude, float dt)
 482:./app/control/control.c **** {
 1205              		.loc 1 482 1 is_stmt 1 view -0
 1206              		.cfi_startproc
 1207              		@ args = 0, pretend = 0, frame = 16
 1208              		@ frame_needed = 0, uses_anonymous_args = 0
 1209              		.loc 1 482 1 is_stmt 0 view .LVU286
 1210 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 1211              	.LCFI20:
 1212              		.cfi_def_cfa_offset 32
 1213              		.cfi_offset 4, -32
 1214              		.cfi_offset 5, -28
 1215              		.cfi_offset 6, -24
 1216              		.cfi_offset 7, -20
 1217              		.cfi_offset 8, -16
 1218              		.cfi_offset 9, -12
 1219              		.cfi_offset 10, -8
 1220              		.cfi_offset 14, -4
 1221 0004 2DED068B 		vpush.64	{d8, d9, d10}
 1222              	.LCFI21:
 1223              		.cfi_def_cfa_offset 56
 1224              		.cfi_offset 80, -56
 1225              		.cfi_offset 81, -52
 1226              		.cfi_offset 82, -48
 1227              		.cfi_offset 83, -44
 1228              		.cfi_offset 84, -40
 1229              		.cfi_offset 85, -36
 1230 0008 84B0     		sub	sp, sp, #16
 1231              	.LCFI22:
 1232              		.cfi_def_cfa_offset 72
 1233 000a 0146     		mov	r1, r0
 1234 000c F0EE409A 		vmov.f32	s19, s0
 1235 0010 B0EE609A 		vmov.f32	s18, s1
 483:./app/control/control.c **** 	TriaxialData_t accEarth = {0};
 1236              		.loc 1 483 2 is_stmt 1 view .LVU287
 1237              		.loc 1 483 17 is_stmt 0 view .LVU288
 1238 0014 0023     		movs	r3, #0
 1239 0016 0193     		str	r3, [sp, #4]
 1240 0018 0293     		str	r3, [sp, #8]
 1241 001a 0393     		str	r3, [sp, #12]
 484:./app/control/control.c **** 	float altitudeDeviation;
 1242              		.loc 1 484 2 is_stmt 1 view .LVU289
 485:./app/control/control.c **** 	
 486:./app/control/control.c **** 	Quaternion_BodyToEarth(&Quaternion, acc, &accEarth);
 1243              		.loc 1 486 2 view .LVU290
 1244 001c 01AA     		add	r2, sp, #4
ARM GAS  /tmp/ccA1Y6N5.s 			page 32


 1245 001e 4F48     		ldr	r0, .L87
 1246              	.LVL100:
 1247              		.loc 1 486 2 is_stmt 0 view .LVU291
 1248 0020 FFF7FEFF 		bl	Quaternion_BodyToEarth
 1249              	.LVL101:
 487:./app/control/control.c **** 
 488:./app/control/control.c **** 	accEarth.X *= GRAVITY_ACC;
 1250              		.loc 1 488 2 is_stmt 1 view .LVU292
 1251              		.loc 1 488 13 is_stmt 0 view .LVU293
 1252 0024 DFED4E6A 		vldr.32	s13, .L87+4
 1253 0028 9DED017A 		vldr.32	s14, [sp, #4]
 1254 002c 27EE267A 		vmul.f32	s14, s14, s13
 1255 0030 8DED017A 		vstr.32	s14, [sp, #4]
 489:./app/control/control.c **** 	accEarth.Y *= GRAVITY_ACC;
 1256              		.loc 1 489 2 is_stmt 1 view .LVU294
 1257              		.loc 1 489 13 is_stmt 0 view .LVU295
 1258 0034 DDED027A 		vldr.32	s15, [sp, #8]
 1259 0038 67EEA67A 		vmul.f32	s15, s15, s13
 1260 003c CDED027A 		vstr.32	s15, [sp, #8]
 490:./app/control/control.c **** 	accEarth.Z *= GRAVITY_ACC;
 1261              		.loc 1 490 2 is_stmt 1 view .LVU296
 1262              		.loc 1 490 13 is_stmt 0 view .LVU297
 1263 0040 9DED038A 		vldr.32	s16, [sp, #12]
 1264 0044 28EE268A 		vmul.f32	s16, s16, s13
 1265 0048 8DED038A 		vstr.32	s16, [sp, #12]
 491:./app/control/control.c **** 	
 492:./app/control/control.c **** 	accEarth.Z -= GRAVITY_ACC + 15;
 1266              		.loc 1 492 2 is_stmt 1 view .LVU298
 1267              		.loc 1 492 13 is_stmt 0 view .LVU299
 1268 004c DFED450A 		vldr.32	s1, .L87+8
 1269 0050 38EE608A 		vsub.f32	s16, s16, s1
 1270 0054 8DED038A 		vstr.32	s16, [sp, #12]
 493:./app/control/control.c **** 
 494:./app/control/control.c **** 	estimate_acc.X = accEarth.X;
 1271              		.loc 1 494 2 is_stmt 1 view .LVU300
 1272              		.loc 1 494 17 is_stmt 0 view .LVU301
 1273 0058 434B     		ldr	r3, .L87+12
 1274 005a 83ED007A 		vstr.32	s14, [r3]
 495:./app/control/control.c **** 	estimate_acc.Y = accEarth.Y;
 1275              		.loc 1 495 2 is_stmt 1 view .LVU302
 1276              		.loc 1 495 17 is_stmt 0 view .LVU303
 1277 005e C3ED017A 		vstr.32	s15, [r3, #4]
 496:./app/control/control.c **** 	estimate_acc.Z = accEarth.Z;
 1278              		.loc 1 496 2 is_stmt 1 view .LVU304
 1279              		.loc 1 496 17 is_stmt 0 view .LVU305
 1280 0062 83ED028A 		vstr.32	s16, [r3, #8]
 497:./app/control/control.c **** 	
 498:./app/control/control.c **** 
 499:./app/control/control.c **** 	altitudeDeviation = observeAltitude - estimate_position.Z;
 1281              		.loc 1 499 2 is_stmt 1 view .LVU306
 1282              		.loc 1 499 57 is_stmt 0 view .LVU307
 1283 0066 414B     		ldr	r3, .L87+16
 1284 0068 93ED02AA 		vldr.32	s20, [r3, #8]
 1285              		.loc 1 499 20 view .LVU308
 1286 006c 79EECA8A 		vsub.f32	s17, s19, s20
 1287              	.LVL102:
 500:./app/control/control.c **** 	
ARM GAS  /tmp/ccA1Y6N5.s 			page 33


 501:./app/control/control.c **** 	//偏差过大 直接给值
 502:./app/control/control.c **** 	if(ABS(altitudeDeviation) > 500)
 1288              		.loc 1 502 2 is_stmt 1 view .LVU309
 1289              		.loc 1 502 28 is_stmt 0 view .LVU310
 1290 0070 F5EEC08A 		vcmpe.f32	s17, #0
 1291 0074 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 1292 0078 14D4     		bmi	.L86
 1293              		.loc 1 502 28 discriminator 2 view .LVU311
 1294 007a DFED3D7A 		vldr.32	s15, .L87+20
 1295 007e F4EEE78A 		vcmpe.f32	s17, s15
 1296 0082 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 1297 0086 CCBF     		ite	gt
 1298 0088 0123     		movgt	r3, #1
 1299 008a 0023     		movle	r3, #0
 1300              	.L80:
 1301              		.loc 1 502 4 discriminator 4 view .LVU312
 1302 008c A3B1     		cbz	r3, .L81
 503:./app/control/control.c **** 	{
 504:./app/control/control.c **** 		estimate_position.Z = observeAltitude;
 1303              		.loc 1 504 3 is_stmt 1 view .LVU313
 1304              		.loc 1 504 23 is_stmt 0 view .LVU314
 1305 008e 374B     		ldr	r3, .L87+16
 1306 0090 C3ED029A 		vstr.32	s19, [r3, #8]
 505:./app/control/control.c **** 		estimate_velocity.Z = 0;
 1307              		.loc 1 505 3 is_stmt 1 view .LVU315
 1308              		.loc 1 505 23 is_stmt 0 view .LVU316
 1309 0094 374B     		ldr	r3, .L87+24
 1310 0096 0022     		movs	r2, #0
 1311 0098 9A60     		str	r2, [r3, #8]	@ float
 1312              	.LVL103:
 1313              	.L77:
 506:./app/control/control.c **** 	}
 507:./app/control/control.c **** 	else
 508:./app/control/control.c **** 	{
 509:./app/control/control.c **** 		
 510:./app/control/control.c **** 		estimate_position.Z += estimate_velocity.Z * dt + 0.5*estimate_acc.Z*dt*dt;
 511:./app/control/control.c **** 		estimate_velocity.Z += estimate_acc.Z * dt;
 512:./app/control/control.c **** 
 513:./app/control/control.c **** 		estimate_position.Z += baro_compensate_k * altitudeDeviation;
 514:./app/control/control.c **** 		estimate_velocity.Z += baro_compensate_k * altitudeDeviation;
 515:./app/control/control.c **** 	}
 516:./app/control/control.c **** 
 517:./app/control/control.c **** }
 1314              		.loc 1 517 1 view .LVU317
 1315 009a 04B0     		add	sp, sp, #16
 1316              	.LCFI23:
 1317              		.cfi_remember_state
 1318              		.cfi_def_cfa_offset 56
 1319              		@ sp needed
 1320 009c BDEC068B 		vldm	sp!, {d8-d10}
 1321              	.LCFI24:
 1322              		.cfi_restore 84
 1323              		.cfi_restore 85
 1324              		.cfi_restore 82
 1325              		.cfi_restore 83
 1326              		.cfi_restore 80
 1327              		.cfi_restore 81
ARM GAS  /tmp/ccA1Y6N5.s 			page 34


 1328              		.cfi_def_cfa_offset 32
 1329              	.LVL104:
 1330              		.loc 1 517 1 view .LVU318
 1331 00a0 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 1332              	.LVL105:
 1333              	.L86:
 1334              	.LCFI25:
 1335              		.cfi_restore_state
 502:./app/control/control.c **** 	{
 1336              		.loc 1 502 28 discriminator 1 view .LVU319
 1337 00a4 DFED347A 		vldr.32	s15, .L87+28
 1338 00a8 F4EEE78A 		vcmpe.f32	s17, s15
 1339 00ac F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 1340 00b0 4CBF     		ite	mi
 1341 00b2 0123     		movmi	r3, #1
 1342 00b4 0023     		movpl	r3, #0
 1343 00b6 E9E7     		b	.L80
 1344              	.L81:
 510:./app/control/control.c **** 		estimate_velocity.Z += estimate_acc.Z * dt;
 1345              		.loc 1 510 3 is_stmt 1 view .LVU320
 510:./app/control/control.c **** 		estimate_velocity.Z += estimate_acc.Z * dt;
 1346              		.loc 1 510 43 is_stmt 0 view .LVU321
 1347 00b8 DFF8B8A0 		ldr	r10, .L87+24
 1348 00bc DAED029A 		vldr.32	s19, [r10, #8]
 1349              	.LVL106:
 510:./app/control/control.c **** 		estimate_velocity.Z += estimate_acc.Z * dt;
 1350              		.loc 1 510 46 view .LVU322
 1351 00c0 69EE897A 		vmul.f32	s15, s19, s18
 1352 00c4 17EE900A 		vmov	r0, s15
 1353 00c8 FFF7FEFF 		bl	__aeabi_f2d
 1354              	.LVL107:
 1355 00cc 0646     		mov	r6, r0
 1356 00ce 0F46     		mov	r7, r1
 510:./app/control/control.c **** 		estimate_velocity.Z += estimate_acc.Z * dt;
 1357              		.loc 1 510 69 view .LVU323
 1358 00d0 18EE100A 		vmov	r0, s16
 1359 00d4 FFF7FEFF 		bl	__aeabi_f2d
 1360              	.LVL108:
 510:./app/control/control.c **** 		estimate_velocity.Z += estimate_acc.Z * dt;
 1361              		.loc 1 510 56 view .LVU324
 1362 00d8 0022     		movs	r2, #0
 1363 00da 284B     		ldr	r3, .L87+32
 1364 00dc FFF7FEFF 		bl	__aeabi_dmul
 1365              	.LVL109:
 1366 00e0 8046     		mov	r8, r0
 1367 00e2 8946     		mov	r9, r1
 510:./app/control/control.c **** 		estimate_velocity.Z += estimate_acc.Z * dt;
 1368              		.loc 1 510 71 view .LVU325
 1369 00e4 19EE100A 		vmov	r0, s18
 1370 00e8 FFF7FEFF 		bl	__aeabi_f2d
 1371              	.LVL110:
 1372 00ec 0446     		mov	r4, r0
 1373 00ee 0D46     		mov	r5, r1
 1374 00f0 0246     		mov	r2, r0
 1375 00f2 0B46     		mov	r3, r1
 1376 00f4 4046     		mov	r0, r8
 1377 00f6 4946     		mov	r1, r9
ARM GAS  /tmp/ccA1Y6N5.s 			page 35


 1378 00f8 FFF7FEFF 		bl	__aeabi_dmul
 1379              	.LVL111:
 1380 00fc 0246     		mov	r2, r0
 1381 00fe 0B46     		mov	r3, r1
 510:./app/control/control.c **** 		estimate_velocity.Z += estimate_acc.Z * dt;
 1382              		.loc 1 510 74 view .LVU326
 1383 0100 2046     		mov	r0, r4
 1384 0102 2946     		mov	r1, r5
 1385 0104 FFF7FEFF 		bl	__aeabi_dmul
 1386              	.LVL112:
 1387 0108 0246     		mov	r2, r0
 1388 010a 0B46     		mov	r3, r1
 510:./app/control/control.c **** 		estimate_velocity.Z += estimate_acc.Z * dt;
 1389              		.loc 1 510 51 view .LVU327
 1390 010c 3046     		mov	r0, r6
 1391 010e 3946     		mov	r1, r7
 1392 0110 FFF7FEFF 		bl	__aeabi_dadd
 1393              	.LVL113:
 1394 0114 0446     		mov	r4, r0
 1395 0116 0D46     		mov	r5, r1
 510:./app/control/control.c **** 		estimate_velocity.Z += estimate_acc.Z * dt;
 1396              		.loc 1 510 23 view .LVU328
 1397 0118 1AEE100A 		vmov	r0, s20
 1398 011c FFF7FEFF 		bl	__aeabi_f2d
 1399              	.LVL114:
 1400 0120 2246     		mov	r2, r4
 1401 0122 2B46     		mov	r3, r5
 1402 0124 FFF7FEFF 		bl	__aeabi_dadd
 1403              	.LVL115:
 1404 0128 FFF7FEFF 		bl	__aeabi_d2f
 1405              	.LVL116:
 1406 012c 07EE900A 		vmov	s15, r0
 1407 0130 0E4B     		ldr	r3, .L87+16
 1408 0132 9860     		str	r0, [r3, #8]	@ float
 511:./app/control/control.c **** 
 1409              		.loc 1 511 3 is_stmt 1 view .LVU329
 511:./app/control/control.c **** 
 1410              		.loc 1 511 41 is_stmt 0 view .LVU330
 1411 0134 28EE098A 		vmul.f32	s16, s16, s18
 511:./app/control/control.c **** 
 1412              		.loc 1 511 23 view .LVU331
 1413 0138 39EE888A 		vadd.f32	s16, s19, s16
 1414 013c 8AED028A 		vstr.32	s16, [r10, #8]
 513:./app/control/control.c **** 		estimate_velocity.Z += baro_compensate_k * altitudeDeviation;
 1415              		.loc 1 513 3 is_stmt 1 view .LVU332
 513:./app/control/control.c **** 		estimate_velocity.Z += baro_compensate_k * altitudeDeviation;
 1416              		.loc 1 513 44 is_stmt 0 view .LVU333
 1417 0140 0F4A     		ldr	r2, .L87+36
 1418 0142 92ED007A 		vldr.32	s14, [r2]
 1419 0146 68EE878A 		vmul.f32	s17, s17, s14
 1420              	.LVL117:
 513:./app/control/control.c **** 		estimate_velocity.Z += baro_compensate_k * altitudeDeviation;
 1421              		.loc 1 513 23 view .LVU334
 1422 014a 77EEA87A 		vadd.f32	s15, s15, s17
 1423 014e C3ED027A 		vstr.32	s15, [r3, #8]
 514:./app/control/control.c **** 	}
 1424              		.loc 1 514 3 is_stmt 1 view .LVU335
ARM GAS  /tmp/ccA1Y6N5.s 			page 36


 514:./app/control/control.c **** 	}
 1425              		.loc 1 514 23 is_stmt 0 view .LVU336
 1426 0152 38EE288A 		vadd.f32	s16, s16, s17
 1427 0156 8AED028A 		vstr.32	s16, [r10, #8]
 1428              		.loc 1 517 1 view .LVU337
 1429 015a 9EE7     		b	.L77
 1430              	.L88:
 1431              		.align	2
 1432              	.L87:
 1433 015c 00000000 		.word	.LANCHOR19
 1434 0160 00007544 		.word	1148518400
 1435 0164 00C07844 		.word	1148764160
 1436 0168 00000000 		.word	.LANCHOR27
 1437 016c 00000000 		.word	.LANCHOR20
 1438 0170 0000FA43 		.word	1140457472
 1439 0174 00000000 		.word	.LANCHOR29
 1440 0178 0000FAC3 		.word	-1007026176
 1441 017c 0000E03F 		.word	1071644672
 1442 0180 00000000 		.word	.LANCHOR31
 1443              		.cfi_endproc
 1444              	.LFE142:
 1446              		.section	.text.ControlTask,"ax",%progbits
 1447              		.align	1
 1448              		.global	ControlTask
 1449              		.syntax unified
 1450              		.thumb
 1451              		.thumb_func
 1452              		.fpu fpv4-sp-d16
 1454              	ControlTask:
 1455              	.LVL118:
 1456              	.LFB143:
 518:./app/control/control.c **** 
 519:./app/control/control.c **** /*
 520:./app/control/control.c **** //位置控制
 521:./app/control/control.c **** uint32_t position_control(float now_altitude, float set_altitude)
 522:./app/control/control.c **** {
 523:./app/control/control.c **** 	uint8_t count = 0;
 524:./app/control/control.c **** 	int32_t throttle_out = 0;
 525:./app/control/control.c **** 	static float set_velocity_z = 0;
 526:./app/control/control.c **** 	
 527:./app/control/control.c **** 	count++,
 528:./app/control/control.c **** 	if(count >= 5)
 529:./app/control/control.c **** 	{
 530:./app/control/control.c **** 		count = 0,
 531:./app/control/control.c **** 		set_velocity_z = PID_control(&position_z_pid, now_altitude - set_altitude);
 532:./app/control/control.c **** 		
 533:./app/control/control.c **** 	}
 534:./app/control/control.c **** 	throttle_out = (int32_t)PID_control_biquad(&velocity_z_pid, set_velocity_z - estimate_velocity.z, 
 535:./app/control/control.c **** 	throttle_out += THROTTLE_BASE;
 536:./app/control/control.c **** 
 537:./app/control/control.c **** 	if(throttle_out < 0)
 538:./app/control/control.c **** 	{
 539:./app/control/control.c **** 		throttle_out = 0;
 540:./app/control/control.c **** 	}
 541:./app/control/control.c **** 
 542:./app/control/control.c **** 	return throttle_out;
 543:./app/control/control.c **** }
ARM GAS  /tmp/ccA1Y6N5.s 			page 37


 544:./app/control/control.c **** 
 545:./app/control/control.c **** */
 546:./app/control/control.c **** 
 547:./app/control/control.c **** 
 548:./app/control/control.c **** void ControlTask(void * parameters)
 549:./app/control/control.c **** {
 1457              		.loc 1 549 1 is_stmt 1 view -0
 1458              		.cfi_startproc
 1459              		@ args = 0, pretend = 0, frame = 112
 1460              		@ frame_needed = 0, uses_anonymous_args = 0
 1461              		.loc 1 549 1 is_stmt 0 view .LVU339
 1462 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 1463              	.LCFI26:
 1464              		.cfi_def_cfa_offset 20
 1465              		.cfi_offset 4, -20
 1466              		.cfi_offset 5, -16
 1467              		.cfi_offset 6, -12
 1468              		.cfi_offset 7, -8
 1469              		.cfi_offset 14, -4
 1470 0002 2DED028B 		vpush.64	{d8}
 1471              	.LCFI27:
 1472              		.cfi_def_cfa_offset 28
 1473              		.cfi_offset 80, -28
 1474              		.cfi_offset 81, -24
 1475 0006 9FB0     		sub	sp, sp, #124
 1476              	.LCFI28:
 1477              		.cfi_def_cfa_offset 152
 550:./app/control/control.c **** 
 551:./app/control/control.c **** 	TickType_t time = xTaskGetTickCount();
 1478              		.loc 1 551 2 is_stmt 1 view .LVU340
 1479              		.loc 1 551 20 is_stmt 0 view .LVU341
 1480 0008 FFF7FEFF 		bl	xTaskGetTickCount
 1481              	.LVL119:
 1482              		.loc 1 551 13 view .LVU342
 1483 000c 1D90     		str	r0, [sp, #116]
 552:./app/control/control.c **** 	uint32_t timeCount = 0;
 1484              		.loc 1 552 2 is_stmt 1 view .LVU343
 1485              	.LVL120:
 553:./app/control/control.c **** 	
 554:./app/control/control.c **** 
 555:./app/control/control.c **** 	//uint16_t remote_data[IBUS_Channel_MAX] = {0};
 556:./app/control/control.c **** 	RemoteData_t remoteData = {0};
 1486              		.loc 1 556 2 view .LVU344
 1487              		.loc 1 556 15 is_stmt 0 view .LVU345
 1488 000e 0024     		movs	r4, #0
 1489 0010 1A94     		str	r4, [sp, #104]
 1490 0012 1B94     		str	r4, [sp, #108]
 1491 0014 1C94     		str	r4, [sp, #112]
 557:./app/control/control.c **** 	int32_t remote_lose_count = 0;
 1492              		.loc 1 557 2 is_stmt 1 view .LVU346
 1493              	.LVL121:
 558:./app/control/control.c **** 	uint8_t remote_lose_flag = 0;
 1494              		.loc 1 558 2 view .LVU347
 559:./app/control/control.c **** 
 560:./app/control/control.c **** 	float setYaw = 0;
 1495              		.loc 1 560 2 view .LVU348
 561:./app/control/control.c **** 	
ARM GAS  /tmp/ccA1Y6N5.s 			page 38


 562:./app/control/control.c **** 	flight_mode_t last_remote_mode = Stabilize_Mode;
 1496              		.loc 1 562 2 view .LVU349
 563:./app/control/control.c **** 
 564:./app/control/control.c **** 
 565:./app/control/control.c **** 	MPU6050_BaseData_t gyroBaseData = {0};
 1497              		.loc 1 565 2 view .LVU350
 1498              		.loc 1 565 21 is_stmt 0 view .LVU351
 1499 0016 1894     		str	r4, [sp, #96]
 1500 0018 ADF86440 		strh	r4, [sp, #100]	@ movhi
 566:./app/control/control.c **** 	MPU6050_BaseData_t accBaseData = {0};
 1501              		.loc 1 566 2 is_stmt 1 view .LVU352
 1502              		.loc 1 566 21 is_stmt 0 view .LVU353
 1503 001c 1694     		str	r4, [sp, #88]
 1504 001e ADF85C40 		strh	r4, [sp, #92]	@ movhi
 567:./app/control/control.c **** 	
 568:./app/control/control.c **** 	MPU6050_ConvertData_t gyroConvertData = {0};
 1505              		.loc 1 568 2 is_stmt 1 view .LVU354
 1506              		.loc 1 568 24 is_stmt 0 view .LVU355
 1507 0022 1394     		str	r4, [sp, #76]
 1508 0024 1494     		str	r4, [sp, #80]
 1509 0026 1594     		str	r4, [sp, #84]
 569:./app/control/control.c **** 	MPU6050_ConvertData_t accConvertData = {0};
 1510              		.loc 1 569 2 is_stmt 1 view .LVU356
 1511              		.loc 1 569 24 is_stmt 0 view .LVU357
 1512 0028 1094     		str	r4, [sp, #64]
 1513 002a 1194     		str	r4, [sp, #68]
 1514 002c 1294     		str	r4, [sp, #72]
 570:./app/control/control.c **** 
 571:./app/control/control.c **** 	TriaxialData_t magData = {0, 0, 0};
 1515              		.loc 1 571 2 is_stmt 1 view .LVU358
 1516              		.loc 1 571 17 is_stmt 0 view .LVU359
 1517 002e DFED8F8A 		vldr.32	s17, .L109
 1518 0032 CDED0D8A 		vstr.32	s17, [sp, #52]
 1519 0036 CDED0E8A 		vstr.32	s17, [sp, #56]
 1520 003a CDED0F8A 		vstr.32	s17, [sp, #60]
 572:./app/control/control.c **** 	//TriaxialData_t magData = {0, 1, 0};//yaw -90
 573:./app/control/control.c **** 	//TriaxialData_t magData = {0, -1, 0};//yaw 90
 574:./app/control/control.c **** 	//TriaxialData_t magData = {1, 1, 1};//
 575:./app/control/control.c **** 
 576:./app/control/control.c **** 	AttitudeData_t nowAngle = {0};
 1521              		.loc 1 576 2 is_stmt 1 view .LVU360
 1522              		.loc 1 576 17 is_stmt 0 view .LVU361
 1523 003e 0A94     		str	r4, [sp, #40]
 1524 0040 0B94     		str	r4, [sp, #44]
 1525 0042 0C94     		str	r4, [sp, #48]
 577:./app/control/control.c **** 	AttitudeData_t setAngle = {0};
 1526              		.loc 1 577 2 is_stmt 1 view .LVU362
 1527              		.loc 1 577 17 is_stmt 0 view .LVU363
 1528 0044 0794     		str	r4, [sp, #28]
 1529 0046 0894     		str	r4, [sp, #32]
 1530 0048 0994     		str	r4, [sp, #36]
 578:./app/control/control.c **** 
 579:./app/control/control.c **** 
 580:./app/control/control.c **** 	BMP280_Data_t bmp280Data = {0};
 1531              		.loc 1 580 2 is_stmt 1 view .LVU364
 1532              		.loc 1 580 16 is_stmt 0 view .LVU365
 1533 004a 0594     		str	r4, [sp, #20]
ARM GAS  /tmp/ccA1Y6N5.s 			page 39


 1534 004c 0694     		str	r4, [sp, #24]
 581:./app/control/control.c **** 	SPL06_Data_t spl06Data = {0};
 1535              		.loc 1 581 2 is_stmt 1 view .LVU366
 1536              		.loc 1 581 15 is_stmt 0 view .LVU367
 1537 004e 0394     		str	r4, [sp, #12]
 1538 0050 0494     		str	r4, [sp, #16]
 558:./app/control/control.c **** 
 1539              		.loc 1 558 10 view .LVU368
 1540 0052 2746     		mov	r7, r4
 557:./app/control/control.c **** 	uint8_t remote_lose_flag = 0;
 1541              		.loc 1 557 10 view .LVU369
 1542 0054 2646     		mov	r6, r4
 1543 0056 91E0     		b	.L100
 1544              	.LVL122:
 1545              	.L102:
 582:./app/control/control.c **** 	static float altitude = 0;
 583:./app/control/control.c **** 
 584:./app/control/control.c **** 	for(;;)
 585:./app/control/control.c **** 	{
 586:./app/control/control.c **** 		timeCount++;
 587:./app/control/control.c **** 		if(timeCount > 1000)
 588:./app/control/control.c **** 		{
 589:./app/control/control.c **** 			timeCount = 0;
 590:./app/control/control.c **** 		}
 591:./app/control/control.c **** 		//time_count_start_us();
 592:./app/control/control.c **** 
 593:./app/control/control.c **** 		//接收遥控器数据
 594:./app/control/control.c **** 		
 595:./app/control/control.c **** 		if(xQueueReceive(RemoteDataQueue,&remoteData,0) == pdFALSE)
 596:./app/control/control.c **** 		{
 597:./app/control/control.c **** 			remote_lose_count++;
 598:./app/control/control.c **** 			if(remote_lose_count > 100)
 599:./app/control/control.c **** 			{
 600:./app/control/control.c **** 				remote_lose_count = 0;
 601:./app/control/control.c **** 				remote_lose_flag = 1;
 602:./app/control/control.c **** 			}
 603:./app/control/control.c **** 		}
 604:./app/control/control.c **** 		else
 605:./app/control/control.c **** 		{
 606:./app/control/control.c **** 			remote_lose_count = 0;
 607:./app/control/control.c **** 			remote_lose_flag = 0;
 1546              		.loc 1 607 21 view .LVU370
 1547 0058 0027     		movs	r7, #0
 1548              	.LVL123:
 606:./app/control/control.c **** 			remote_lose_flag = 0;
 1549              		.loc 1 606 22 view .LVU371
 1550 005a 3E46     		mov	r6, r7
 1551              	.LVL124:
 1552              	.L91:
 608:./app/control/control.c **** 		}
 609:./app/control/control.c **** 
 610:./app/control/control.c **** 
 611:./app/control/control.c **** 		
 612:./app/control/control.c **** 
 613:./app/control/control.c **** 		
 614:./app/control/control.c **** 		
 615:./app/control/control.c **** 		//获取mpu6050原始数据
ARM GAS  /tmp/ccA1Y6N5.s 			page 40


 616:./app/control/control.c **** 		MPU6050_GetBaseAcc(&MPU6050, &accBaseData);
 1553              		.loc 1 616 3 is_stmt 1 view .LVU372
 1554 005c 844D     		ldr	r5, .L109+4
 1555 005e 16A9     		add	r1, sp, #88
 1556 0060 2846     		mov	r0, r5
 1557 0062 FFF7FEFF 		bl	MPU6050_GetBaseAcc
 1558              	.LVL125:
 617:./app/control/control.c **** 		MPU6050_GetBaseGyro(&MPU6050, &gyroBaseData);
 1559              		.loc 1 617 3 view .LVU373
 1560 0066 18A9     		add	r1, sp, #96
 1561 0068 2846     		mov	r0, r5
 1562 006a FFF7FEFF 		bl	MPU6050_GetBaseGyro
 1563              	.LVL126:
 618:./app/control/control.c **** 		
 619:./app/control/control.c **** 		gyroBaseData.X -= -7;
 1564              		.loc 1 619 3 view .LVU374
 1565              		.loc 1 619 18 is_stmt 0 view .LVU375
 1566 006e BDF86030 		ldrh	r3, [sp, #96]
 1567 0072 0733     		adds	r3, r3, #7
 1568 0074 ADF86030 		strh	r3, [sp, #96]	@ movhi
 620:./app/control/control.c **** 		gyroBaseData.Y -= 54;
 1569              		.loc 1 620 3 is_stmt 1 view .LVU376
 1570              		.loc 1 620 18 is_stmt 0 view .LVU377
 1571 0078 BDF86230 		ldrh	r3, [sp, #98]
 1572 007c 363B     		subs	r3, r3, #54
 1573 007e ADF86230 		strh	r3, [sp, #98]	@ movhi
 621:./app/control/control.c **** 		gyroBaseData.Z -= -6;
 1574              		.loc 1 621 3 is_stmt 1 view .LVU378
 1575              		.loc 1 621 18 is_stmt 0 view .LVU379
 1576 0082 BDF86430 		ldrh	r3, [sp, #100]
 1577 0086 0633     		adds	r3, r3, #6
 1578 0088 ADF86430 		strh	r3, [sp, #100]	@ movhi
 622:./app/control/control.c **** 
 623:./app/control/control.c **** 		MPU6050_ConvertDataAcc(&MPU6050, &accBaseData, &accConvertData);
 1579              		.loc 1 623 3 is_stmt 1 view .LVU380
 1580 008c 10AA     		add	r2, sp, #64
 1581 008e 16A9     		add	r1, sp, #88
 1582 0090 2846     		mov	r0, r5
 1583 0092 FFF7FEFF 		bl	MPU6050_ConvertDataAcc
 1584              	.LVL127:
 624:./app/control/control.c **** 		MPU6050_ConvertDataGyro(&MPU6050, &gyroBaseData, &gyroConvertData);
 1585              		.loc 1 624 3 view .LVU381
 1586 0096 13AA     		add	r2, sp, #76
 1587 0098 18A9     		add	r1, sp, #96
 1588 009a 2846     		mov	r0, r5
 1589 009c FFF7FEFF 		bl	MPU6050_ConvertDataGyro
 1590              	.LVL128:
 625:./app/control/control.c **** 
 626:./app/control/control.c **** 		biquad_filter(&biquad_GyroParameterX, gyroConvertData.X);
 1591              		.loc 1 626 3 view .LVU382
 1592 00a0 9DED130A 		vldr.32	s0, [sp, #76]
 1593 00a4 7348     		ldr	r0, .L109+8
 1594 00a6 FFF7FEFF 		bl	biquad_filter
 1595              	.LVL129:
 627:./app/control/control.c **** 		biquad_filter(&biquad_GyroParameterY, gyroConvertData.Y);
 1596              		.loc 1 627 3 view .LVU383
 1597 00aa 9DED140A 		vldr.32	s0, [sp, #80]
ARM GAS  /tmp/ccA1Y6N5.s 			page 41


 1598 00ae 7248     		ldr	r0, .L109+12
 1599 00b0 FFF7FEFF 		bl	biquad_filter
 1600              	.LVL130:
 628:./app/control/control.c **** 		biquad_filter(&biquad_GyroParameterZ, gyroConvertData.Z);
 1601              		.loc 1 628 3 view .LVU384
 1602 00b4 9DED150A 		vldr.32	s0, [sp, #84]
 1603 00b8 7048     		ldr	r0, .L109+16
 1604 00ba FFF7FEFF 		bl	biquad_filter
 1605              	.LVL131:
 629:./app/control/control.c **** 
 630:./app/control/control.c **** 		biquad_filter(&biquad_AccParameterX, accConvertData.X);
 1606              		.loc 1 630 3 view .LVU385
 1607 00be 9DED100A 		vldr.32	s0, [sp, #64]
 1608 00c2 6F48     		ldr	r0, .L109+20
 1609 00c4 FFF7FEFF 		bl	biquad_filter
 1610              	.LVL132:
 631:./app/control/control.c **** 		biquad_filter(&biquad_AccParameterY, accConvertData.Y);
 1611              		.loc 1 631 3 view .LVU386
 1612 00c8 9DED110A 		vldr.32	s0, [sp, #68]
 1613 00cc 6D48     		ldr	r0, .L109+24
 1614 00ce FFF7FEFF 		bl	biquad_filter
 1615              	.LVL133:
 632:./app/control/control.c **** 		biquad_filter(&biquad_AccParameterZ, accConvertData.Z);
 1616              		.loc 1 632 3 view .LVU387
 1617 00d2 9DED120A 		vldr.32	s0, [sp, #72]
 1618 00d6 6C48     		ldr	r0, .L109+28
 1619 00d8 FFF7FEFF 		bl	biquad_filter
 1620              	.LVL134:
 633:./app/control/control.c **** 		
 634:./app/control/control.c **** 		
 635:./app/control/control.c **** 		accConvertData.Y = -accConvertData.Y;
 1621              		.loc 1 635 3 view .LVU388
 1622              		.loc 1 635 37 is_stmt 0 view .LVU389
 1623 00dc DDED117A 		vldr.32	s15, [sp, #68]
 1624              		.loc 1 635 22 view .LVU390
 1625 00e0 F1EE677A 		vneg.f32	s15, s15
 1626              		.loc 1 635 20 view .LVU391
 1627 00e4 CDED117A 		vstr.32	s15, [sp, #68]
 636:./app/control/control.c **** 		accConvertData.Z = -accConvertData.Z;
 1628              		.loc 1 636 3 is_stmt 1 view .LVU392
 1629              		.loc 1 636 37 is_stmt 0 view .LVU393
 1630 00e8 DDED127A 		vldr.32	s15, [sp, #72]
 1631              		.loc 1 636 22 view .LVU394
 1632 00ec F1EE677A 		vneg.f32	s15, s15
 1633              		.loc 1 636 20 view .LVU395
 1634 00f0 CDED127A 		vstr.32	s15, [sp, #72]
 637:./app/control/control.c **** 		gyroConvertData.Y = -gyroConvertData.Y;
 1635              		.loc 1 637 3 is_stmt 1 view .LVU396
 1636              		.loc 1 637 39 is_stmt 0 view .LVU397
 1637 00f4 DDED147A 		vldr.32	s15, [sp, #80]
 1638              		.loc 1 637 23 view .LVU398
 1639 00f8 F1EE677A 		vneg.f32	s15, s15
 1640              		.loc 1 637 21 view .LVU399
 1641 00fc CDED147A 		vstr.32	s15, [sp, #80]
 638:./app/control/control.c **** 		gyroConvertData.Z = -gyroConvertData.Z;
 1642              		.loc 1 638 3 is_stmt 1 view .LVU400
 1643              		.loc 1 638 39 is_stmt 0 view .LVU401
ARM GAS  /tmp/ccA1Y6N5.s 			page 42


 1644 0100 DDED157A 		vldr.32	s15, [sp, #84]
 1645              		.loc 1 638 23 view .LVU402
 1646 0104 F1EE677A 		vneg.f32	s15, s15
 1647              		.loc 1 638 21 view .LVU403
 1648 0108 CDED157A 		vstr.32	s15, [sp, #84]
 639:./app/control/control.c **** 
 640:./app/control/control.c **** 
 641:./app/control/control.c **** 		if((timeCount % 10) == 0)
 1649              		.loc 1 641 3 is_stmt 1 view .LVU404
 1650              		.loc 1 641 17 is_stmt 0 view .LVU405
 1651 010c 5F4B     		ldr	r3, .L109+32
 1652 010e A3FB0423 		umull	r2, r3, r3, r4
 1653 0112 DB08     		lsrs	r3, r3, #3
 1654 0114 03EB8303 		add	r3, r3, r3, lsl #2
 1655              		.loc 1 641 5 view .LVU406
 1656 0118 B4EB430F 		cmp	r4, r3, lsl #1
 1657 011c 44D0     		beq	.L108
 1658              	.L92:
 642:./app/control/control.c **** 		{					
 643:./app/control/control.c **** 			//接收bmp180海拔高度 
 644:./app/control/control.c **** 			/*
 645:./app/control/control.c **** 			BMP280_GetData(&BMP280, &bmp280Data);
 646:./app/control/control.c **** 			bmp280Data.Pressure = SlidingFilter(&AltitudeSlidingFilterParam, bmp280Data.Pressure);
 647:./app/control/control.c **** 			altitude = PressureToAltitude(bmp280Data.Pressure);
 648:./app/control/control.c **** 			altitude = LowPassFilter(&AltitudeLPFParam, altitude);*/
 649:./app/control/control.c **** 
 650:./app/control/control.c **** 
 651:./app/control/control.c **** 			//SPL06
 652:./app/control/control.c **** 			SPL06_GetDataAll(&SPL06, &spl06Data);
 653:./app/control/control.c **** 			//spl06Data.Pressure = SlidingFilter(&AltitudeSlidingFilterParam, spl06Data.Pressure);
 654:./app/control/control.c **** 			altitude = PressureToAltitude(spl06Data.Pressure);
 655:./app/control/control.c **** 			//altitude = LowPassFilter(&AltitudeLPFParam, altitude);
 656:./app/control/control.c **** 
 657:./app/control/control.c **** 			//需要打印的位置信息
 658:./app/control/control.c **** 			xQueueSend(BaroAltitudeQueue,&altitude,0);
 659:./app/control/control.c **** 			xQueueSend(AltitudeQueue,&estimate_position.Z,0);
 660:./app/control/control.c **** 			xQueueSend(AccQueue,&estimate_acc.Z,0);
 661:./app/control/control.c **** 
 662:./app/control/control.c **** 			//xQueueSend(printf_position_queue,&estimate_position.z,0);
 663:./app/control/control.c **** 			
 664:./app/control/control.c **** 			//altitude = 100;
 665:./app/control/control.c **** 			
 666:./app/control/control.c **** 			//bmp280_data.altitude = sliding_filter(bmp280_data.altitude,altitude_sliding_filter_buff,ALTITU
 667:./app/control/control.c **** 			
 668:./app/control/control.c **** 			//spl06_get_all_data(),
 669:./app/control/control.c **** 		}
 670:./app/control/control.c **** 		
 671:./app/control/control.c **** 		
 672:./app/control/control.c **** 		//四元数姿态解算
 673:./app/control/control.c **** 		Quaternion_IMUCalculation(&Quaternion, &Quaternion_PIOffset, &accConvertData, &gyroConvertData, &
 1659              		.loc 1 673 3 is_stmt 1 view .LVU407
 1660 011e 9FED5C8A 		vldr.32	s16, .L109+36
 1661 0122 0AAB     		add	r3, sp, #40
 1662 0124 0193     		str	r3, [sp, #4]
 1663 0126 0DAB     		add	r3, sp, #52
 1664 0128 0093     		str	r3, [sp]
 1665 012a B0EE480A 		vmov.f32	s0, s16
ARM GAS  /tmp/ccA1Y6N5.s 			page 43


 1666 012e 13AB     		add	r3, sp, #76
 1667 0130 10AA     		add	r2, sp, #64
 1668 0132 5849     		ldr	r1, .L109+40
 1669 0134 5848     		ldr	r0, .L109+44
 1670 0136 FFF7FEFF 		bl	Quaternion_IMUCalculation
 1671              	.LVL135:
 674:./app/control/control.c **** 
 675:./app/control/control.c **** 
 676:./app/control/control.c **** 		//预估机体速度和位置
 677:./app/control/control.c **** 		//get_estimate_position(bmp280_data.altitude);
 678:./app/control/control.c **** 		//bmp280_data.altitude = 0,
 679:./app/control/control.c **** 		//Strapdown_INS_High();
 680:./app/control/control.c **** 		
 681:./app/control/control.c **** 		//需要打印的位置信息
 682:./app/control/control.c **** 		//xQueueSend(printf_position_queue,&bmp280_data.altitude,0);
 683:./app/control/control.c **** 		//xQueueSend(printf_position_queue,&bmp280_data.pressure,0);
 684:./app/control/control.c **** 		//xQueueSend(printf_position_queue,&estimate_position.z,0);
 685:./app/control/control.c **** 
 686:./app/control/control.c **** 		//需要打印的速度信息
 687:./app/control/control.c **** 		//xQueueSend(printf_velocity_queue,&estimate_velocity.z,0);
 688:./app/control/control.c **** 		
 689:./app/control/control.c **** 		//需要打印的加速度信息
 690:./app/control/control.c **** 		//xQueueSend(printf_acc_queue,&estimate_acc.z,0);
 691:./app/control/control.c **** 		//xQueueSend(printf_acc_queue,&earth_acc.z,0);
 692:./app/control/control.c **** 		//xQueueSend(printf_acc_queue,&Origion_NamelessQuad_acc.z,0);
 693:./app/control/control.c **** 
 694:./app/control/control.c **** 
 695:./app/control/control.c **** 		//Strapdown_INS_High(&accConvertData, altitude, 0.002);
 696:./app/control/control.c **** 		PositionFusion(&accConvertData, altitude, 0.002);
 1672              		.loc 1 696 3 view .LVU408
 1673 013a F0EE480A 		vmov.f32	s1, s16
 1674 013e 574B     		ldr	r3, .L109+48
 1675 0140 93ED000A 		vldr.32	s0, [r3]
 1676 0144 10A8     		add	r0, sp, #64
 1677 0146 FFF7FEFF 		bl	PositionFusion
 1678              	.LVL136:
 697:./app/control/control.c **** 		
 698:./app/control/control.c **** 		if((RemoteData_GetRockerValue(&remoteData, E_REMOTE_DATA_LEFT_ROCKER_Y)  < THROTTLE_DEAD_ZONE) ||
 1679              		.loc 1 698 3 view .LVU409
 1680              		.loc 1 698 7 is_stmt 0 view .LVU410
 1681 014a 0121     		movs	r1, #1
 1682 014c 1AA8     		add	r0, sp, #104
 1683 014e FFF7FEFF 		bl	RemoteData_GetRockerValue
 1684              	.LVL137:
 1685              		.loc 1 698 5 view .LVU411
 1686 0152 6328     		cmp	r0, #99
 1687 0154 01DD     		ble	.L93
 1688              		.loc 1 698 98 discriminator 1 view .LVU412
 1689 0156 002F     		cmp	r7, #0
 1690 0158 46D0     		beq	.L94
 1691              	.L93:
 699:./app/control/control.c **** 		//if(FALSE)
 700:./app/control/control.c **** 		{
 701:./app/control/control.c **** 			//电机停转
 702:./app/control/control.c **** 			MotorStopAll();
 1692              		.loc 1 702 4 is_stmt 1 view .LVU413
 1693 015a FFF7FEFF 		bl	MotorStopAll
ARM GAS  /tmp/ccA1Y6N5.s 			page 44


 1694              	.LVL138:
 703:./app/control/control.c **** 			//清除PID角速度环I项
 704:./app/control/control.c **** 			PID_ISumClean(&PID_PitchRate);
 1695              		.loc 1 704 4 view .LVU414
 1696 015e 5048     		ldr	r0, .L109+52
 1697 0160 FFF7FEFF 		bl	PID_ISumClean
 1698              	.LVL139:
 705:./app/control/control.c **** 			PID_ISumClean(&PID_RollRate);
 1699              		.loc 1 705 4 view .LVU415
 1700 0164 4F48     		ldr	r0, .L109+56
 1701 0166 FFF7FEFF 		bl	PID_ISumClean
 1702              	.LVL140:
 706:./app/control/control.c **** 			PID_ISumClean(&PID_YawRate);
 1703              		.loc 1 706 4 view .LVU416
 1704 016a 4F48     		ldr	r0, .L109+60
 1705 016c FFF7FEFF 		bl	PID_ISumClean
 1706              	.LVL141:
 707:./app/control/control.c **** 
 708:./app/control/control.c **** 
 709:./app/control/control.c **** 			//将设定偏航角设置为当前偏航角，防止起飞旋转
 710:./app/control/control.c **** 			setYaw = nowAngle.Yaw;
 1707              		.loc 1 710 4 view .LVU417
 1708              		.loc 1 710 11 is_stmt 0 view .LVU418
 1709 0170 DDED0C8A 		vldr.32	s17, [sp, #48]
 1710              	.LVL142:
 1711              	.L95:
 711:./app/control/control.c **** 
 712:./app/control/control.c **** 		}
 713:./app/control/control.c **** 		else
 714:./app/control/control.c **** 		{
 715:./app/control/control.c **** 			setYaw += RemoteData_GetRockerValue(&remoteData, E_REMOTE_DATA_LEFT_ROCKER_X);
 716:./app/control/control.c **** 			
 717:./app/control/control.c **** 			if(setYaw > 180)
 718:./app/control/control.c **** 			{
 719:./app/control/control.c **** 				setYaw -= 360;
 720:./app/control/control.c **** 			}
 721:./app/control/control.c **** 			else if(setYaw < -180)
 722:./app/control/control.c **** 			{
 723:./app/control/control.c **** 				setYaw += 360;
 724:./app/control/control.c **** 			}
 725:./app/control/control.c **** 
 726:./app/control/control.c **** 			/*if(remote_data.mode == Auto_Mode)
 727:./app/control/control.c **** 			{
 728:./app/control/control.c **** 				if(last_remote_mode != Auto_Mode)
 729:./app/control/control.c **** 				{
 730:./app/control/control.c **** 					set_altitude = estimate_position.z;
 731:./app/control/control.c **** 				}
 732:./app/control/control.c **** 				remote_data.throttle_out = position_control(estimate_position.z, set_altitude);
 733:./app/control/control.c **** 			}
 734:./app/control/control.c **** 			last_remote_mode = remote_data.mode;*/
 735:./app/control/control.c **** 
 736:./app/control/control.c **** 			setAngle.Pitch = RemoteData_GetRockerValue(&remoteData, E_REMOTE_DATA_RIGHT_ROCKER_Y);
 737:./app/control/control.c **** 			setAngle.Roll = RemoteData_GetRockerValue(&remoteData, E_REMOTE_DATA_RIGHT_ROCKER_X);
 738:./app/control/control.c **** 			setAngle.Yaw = setYaw;
 739:./app/control/control.c **** 			AttitudeControl(RemoteData_GetRockerValue(&remoteData, E_REMOTE_DATA_LEFT_ROCKER_Y), &setAngle, 
 740:./app/control/control.c **** 		}
 741:./app/control/control.c **** 		
ARM GAS  /tmp/ccA1Y6N5.s 			page 45


 742:./app/control/control.c **** 		vTaskDelayUntil(&time,2);
 1712              		.loc 1 742 3 is_stmt 1 view .LVU419
 1713 0174 0221     		movs	r1, #2
 1714 0176 1DA8     		add	r0, sp, #116
 1715 0178 FFF7FEFF 		bl	vTaskDelayUntil
 1716              	.LVL143:
 584:./app/control/control.c **** 	{
 1717              		.loc 1 584 7 view .LVU420
 1718              	.L100:
 582:./app/control/control.c **** 
 1719              		.loc 1 582 2 view .LVU421
 584:./app/control/control.c **** 	{
 1720              		.loc 1 584 2 view .LVU422
 586:./app/control/control.c **** 		if(timeCount > 1000)
 1721              		.loc 1 586 3 view .LVU423
 586:./app/control/control.c **** 		if(timeCount > 1000)
 1722              		.loc 1 586 12 is_stmt 0 view .LVU424
 1723 017c 0134     		adds	r4, r4, #1
 1724              	.LVL144:
 587:./app/control/control.c **** 		{
 1725              		.loc 1 587 3 is_stmt 1 view .LVU425
 587:./app/control/control.c **** 		{
 1726              		.loc 1 587 5 is_stmt 0 view .LVU426
 1727 017e B4F57A7F 		cmp	r4, #1000
 1728 0182 00D9     		bls	.L90
 589:./app/control/control.c **** 		}
 1729              		.loc 1 589 14 view .LVU427
 1730 0184 0024     		movs	r4, #0
 1731              	.LVL145:
 1732              	.L90:
 595:./app/control/control.c **** 		{
 1733              		.loc 1 595 3 is_stmt 1 view .LVU428
 595:./app/control/control.c **** 		{
 1734              		.loc 1 595 6 is_stmt 0 view .LVU429
 1735 0186 0023     		movs	r3, #0
 1736 0188 1A46     		mov	r2, r3
 1737 018a 1AA9     		add	r1, sp, #104
 1738 018c 4748     		ldr	r0, .L109+64
 1739 018e 0068     		ldr	r0, [r0]
 1740 0190 FFF7FEFF 		bl	xQueueGenericReceive
 1741              	.LVL146:
 595:./app/control/control.c **** 		{
 1742              		.loc 1 595 5 view .LVU430
 1743 0194 0028     		cmp	r0, #0
 1744 0196 7FF45FAF 		bne	.L102
 597:./app/control/control.c **** 			if(remote_lose_count > 100)
 1745              		.loc 1 597 4 is_stmt 1 view .LVU431
 597:./app/control/control.c **** 			if(remote_lose_count > 100)
 1746              		.loc 1 597 21 is_stmt 0 view .LVU432
 1747 019a 0136     		adds	r6, r6, #1
 1748              	.LVL147:
 598:./app/control/control.c **** 			{
 1749              		.loc 1 598 4 is_stmt 1 view .LVU433
 598:./app/control/control.c **** 			{
 1750              		.loc 1 598 6 is_stmt 0 view .LVU434
 1751 019c 642E     		cmp	r6, #100
 1752 019e 7FF75DAF 		ble	.L91
ARM GAS  /tmp/ccA1Y6N5.s 			page 46


 600:./app/control/control.c **** 				remote_lose_flag = 1;
 1753              		.loc 1 600 23 view .LVU435
 1754 01a2 0646     		mov	r6, r0
 1755              	.LVL148:
 601:./app/control/control.c **** 			}
 1756              		.loc 1 601 22 view .LVU436
 1757 01a4 0127     		movs	r7, #1
 1758              	.LVL149:
 601:./app/control/control.c **** 			}
 1759              		.loc 1 601 22 view .LVU437
 1760 01a6 59E7     		b	.L91
 1761              	.LVL150:
 1762              	.L108:
 652:./app/control/control.c **** 			//spl06Data.Pressure = SlidingFilter(&AltitudeSlidingFilterParam, spl06Data.Pressure);
 1763              		.loc 1 652 4 is_stmt 1 view .LVU438
 1764 01a8 03A9     		add	r1, sp, #12
 1765 01aa 4148     		ldr	r0, .L109+68
 1766 01ac FFF7FEFF 		bl	SPL06_GetDataAll
 1767              	.LVL151:
 654:./app/control/control.c **** 			//altitude = LowPassFilter(&AltitudeLPFParam, altitude);
 1768              		.loc 1 654 4 view .LVU439
 654:./app/control/control.c **** 			//altitude = LowPassFilter(&AltitudeLPFParam, altitude);
 1769              		.loc 1 654 15 is_stmt 0 view .LVU440
 1770 01b0 9DED030A 		vldr.32	s0, [sp, #12]
 1771 01b4 FFF7FEFF 		bl	PressureToAltitude
 1772              	.LVL152:
 654:./app/control/control.c **** 			//altitude = LowPassFilter(&AltitudeLPFParam, altitude);
 1773              		.loc 1 654 13 view .LVU441
 1774 01b8 3849     		ldr	r1, .L109+48
 1775 01ba 81ED000A 		vstr.32	s0, [r1]
 658:./app/control/control.c **** 			xQueueSend(AltitudeQueue,&estimate_position.Z,0);
 1776              		.loc 1 658 4 is_stmt 1 view .LVU442
 1777 01be 0023     		movs	r3, #0
 1778 01c0 1A46     		mov	r2, r3
 1779 01c2 3C48     		ldr	r0, .L109+72
 1780 01c4 0068     		ldr	r0, [r0]
 1781 01c6 FFF7FEFF 		bl	xQueueGenericSend
 1782              	.LVL153:
 659:./app/control/control.c **** 			xQueueSend(AccQueue,&estimate_acc.Z,0);
 1783              		.loc 1 659 4 view .LVU443
 1784 01ca 0023     		movs	r3, #0
 1785 01cc 1A46     		mov	r2, r3
 1786 01ce 3A49     		ldr	r1, .L109+76
 1787 01d0 3A48     		ldr	r0, .L109+80
 1788 01d2 0068     		ldr	r0, [r0]
 1789 01d4 FFF7FEFF 		bl	xQueueGenericSend
 1790              	.LVL154:
 660:./app/control/control.c **** 
 1791              		.loc 1 660 4 view .LVU444
 1792 01d8 0023     		movs	r3, #0
 1793 01da 1A46     		mov	r2, r3
 1794 01dc 3849     		ldr	r1, .L109+84
 1795 01de 3948     		ldr	r0, .L109+88
 1796 01e0 0068     		ldr	r0, [r0]
 1797 01e2 FFF7FEFF 		bl	xQueueGenericSend
 1798              	.LVL155:
 1799 01e6 9AE7     		b	.L92
ARM GAS  /tmp/ccA1Y6N5.s 			page 47


 1800              	.L94:
 715:./app/control/control.c **** 			
 1801              		.loc 1 715 4 view .LVU445
 715:./app/control/control.c **** 			
 1802              		.loc 1 715 14 is_stmt 0 view .LVU446
 1803 01e8 0021     		movs	r1, #0
 1804 01ea 1AA8     		add	r0, sp, #104
 1805 01ec FFF7FEFF 		bl	RemoteData_GetRockerValue
 1806              	.LVL156:
 1807 01f0 07EE900A 		vmov	s15, r0	@ int
 715:./app/control/control.c **** 			
 1808              		.loc 1 715 11 view .LVU447
 1809 01f4 F8EEE77A 		vcvt.f32.s32	s15, s15
 1810 01f8 78EEA78A 		vadd.f32	s17, s17, s15
 1811              	.LVL157:
 717:./app/control/control.c **** 			{
 1812              		.loc 1 717 4 is_stmt 1 view .LVU448
 717:./app/control/control.c **** 			{
 1813              		.loc 1 717 6 is_stmt 0 view .LVU449
 1814 01fc DFED327A 		vldr.32	s15, .L109+92
 1815 0200 F4EEE78A 		vcmpe.f32	s17, s15
 1816 0204 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 1817 0208 23DD     		ble	.L106
 719:./app/control/control.c **** 			}
 1818              		.loc 1 719 5 is_stmt 1 view .LVU450
 719:./app/control/control.c **** 			}
 1819              		.loc 1 719 12 is_stmt 0 view .LVU451
 1820 020a DFED307A 		vldr.32	s15, .L109+96
 1821 020e 78EEE78A 		vsub.f32	s17, s17, s15
 1822              	.LVL158:
 1823              	.L98:
 736:./app/control/control.c **** 			setAngle.Roll = RemoteData_GetRockerValue(&remoteData, E_REMOTE_DATA_RIGHT_ROCKER_X);
 1824              		.loc 1 736 4 is_stmt 1 view .LVU452
 736:./app/control/control.c **** 			setAngle.Roll = RemoteData_GetRockerValue(&remoteData, E_REMOTE_DATA_RIGHT_ROCKER_X);
 1825              		.loc 1 736 21 is_stmt 0 view .LVU453
 1826 0212 0321     		movs	r1, #3
 1827 0214 1AA8     		add	r0, sp, #104
 1828 0216 FFF7FEFF 		bl	RemoteData_GetRockerValue
 1829              	.LVL159:
 1830 021a 07EE900A 		vmov	s15, r0	@ int
 736:./app/control/control.c **** 			setAngle.Roll = RemoteData_GetRockerValue(&remoteData, E_REMOTE_DATA_RIGHT_ROCKER_X);
 1831              		.loc 1 736 19 view .LVU454
 1832 021e F8EEE77A 		vcvt.f32.s32	s15, s15
 1833 0222 CDED077A 		vstr.32	s15, [sp, #28]
 737:./app/control/control.c **** 			setAngle.Yaw = setYaw;
 1834              		.loc 1 737 4 is_stmt 1 view .LVU455
 737:./app/control/control.c **** 			setAngle.Yaw = setYaw;
 1835              		.loc 1 737 20 is_stmt 0 view .LVU456
 1836 0226 0221     		movs	r1, #2
 1837 0228 1AA8     		add	r0, sp, #104
 1838 022a FFF7FEFF 		bl	RemoteData_GetRockerValue
 1839              	.LVL160:
 1840 022e 07EE900A 		vmov	s15, r0	@ int
 737:./app/control/control.c **** 			setAngle.Yaw = setYaw;
 1841              		.loc 1 737 18 view .LVU457
 1842 0232 F8EEE77A 		vcvt.f32.s32	s15, s15
 1843 0236 CDED087A 		vstr.32	s15, [sp, #32]
ARM GAS  /tmp/ccA1Y6N5.s 			page 48


 738:./app/control/control.c **** 			AttitudeControl(RemoteData_GetRockerValue(&remoteData, E_REMOTE_DATA_LEFT_ROCKER_Y), &setAngle, 
 1844              		.loc 1 738 4 is_stmt 1 view .LVU458
 738:./app/control/control.c **** 			AttitudeControl(RemoteData_GetRockerValue(&remoteData, E_REMOTE_DATA_LEFT_ROCKER_Y), &setAngle, 
 1845              		.loc 1 738 17 is_stmt 0 view .LVU459
 1846 023a CDED098A 		vstr.32	s17, [sp, #36]
 739:./app/control/control.c **** 		}
 1847              		.loc 1 739 4 is_stmt 1 view .LVU460
 739:./app/control/control.c **** 		}
 1848              		.loc 1 739 20 is_stmt 0 view .LVU461
 1849 023e 0121     		movs	r1, #1
 1850 0240 1AA8     		add	r0, sp, #104
 1851 0242 FFF7FEFF 		bl	RemoteData_GetRockerValue
 1852              	.LVL161:
 739:./app/control/control.c **** 		}
 1853              		.loc 1 739 4 view .LVU462
 1854 0246 13AB     		add	r3, sp, #76
 1855 0248 0AAA     		add	r2, sp, #40
 1856 024a 07A9     		add	r1, sp, #28
 1857 024c FFF7FEFF 		bl	AttitudeControl
 1858              	.LVL162:
 1859 0250 90E7     		b	.L95
 1860              	.L106:
 721:./app/control/control.c **** 			{
 1861              		.loc 1 721 9 is_stmt 1 view .LVU463
 721:./app/control/control.c **** 			{
 1862              		.loc 1 721 11 is_stmt 0 view .LVU464
 1863 0252 DFED1F7A 		vldr.32	s15, .L109+100
 1864 0256 F4EEE78A 		vcmpe.f32	s17, s15
 1865 025a F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 1866 025e D8D5     		bpl	.L98
 723:./app/control/control.c **** 			}
 1867              		.loc 1 723 5 is_stmt 1 view .LVU465
 723:./app/control/control.c **** 			}
 1868              		.loc 1 723 12 is_stmt 0 view .LVU466
 1869 0260 DFED1A7A 		vldr.32	s15, .L109+96
 1870 0264 78EEA78A 		vadd.f32	s17, s17, s15
 1871              	.LVL163:
 723:./app/control/control.c **** 			}
 1872              		.loc 1 723 12 view .LVU467
 1873 0268 D3E7     		b	.L98
 1874              	.L110:
 1875 026a 00BF     		.align	2
 1876              	.L109:
 1877 026c 00000000 		.word	0
 1878 0270 00000000 		.word	MPU6050
 1879 0274 00000000 		.word	.LANCHOR3
 1880 0278 00000000 		.word	.LANCHOR4
 1881 027c 00000000 		.word	.LANCHOR5
 1882 0280 00000000 		.word	.LANCHOR6
 1883 0284 00000000 		.word	.LANCHOR7
 1884 0288 00000000 		.word	.LANCHOR8
 1885 028c CDCCCCCC 		.word	-858993459
 1886 0290 6F12033B 		.word	990057071
 1887 0294 00000000 		.word	.LANCHOR33
 1888 0298 00000000 		.word	.LANCHOR19
 1889 029c 00000000 		.word	.LANCHOR32
 1890 02a0 00000000 		.word	.LANCHOR14
ARM GAS  /tmp/ccA1Y6N5.s 			page 49


 1891 02a4 00000000 		.word	.LANCHOR15
 1892 02a8 00000000 		.word	.LANCHOR16
 1893 02ac 00000000 		.word	RemoteDataQueue
 1894 02b0 00000000 		.word	SPL06
 1895 02b4 00000000 		.word	BaroAltitudeQueue
 1896 02b8 08000000 		.word	.LANCHOR20+8
 1897 02bc 00000000 		.word	AltitudeQueue
 1898 02c0 08000000 		.word	.LANCHOR27+8
 1899 02c4 00000000 		.word	AccQueue
 1900 02c8 00003443 		.word	1127481344
 1901 02cc 0000B443 		.word	1135869952
 1902 02d0 000034C3 		.word	-1020002304
 1903              		.cfi_endproc
 1904              	.LFE143:
 1906              		.global	baro_compensate_k
 1907              		.global	SpeedDealt
 1908              		.global	pos_correction
 1909              		.global	vel_correction
 1910              		.global	acc_correction
 1911              		.global	Altitude_Dealt
 1912              		.global	High_Filter
 1913              		.global	exp_cst2
 1914              		.global	exp_cst1
 1915              		.global	AltitudeLPFParam
 1916              		.global	AltitudeSlidingFilterParam
 1917              		.global	AltitudeSlidingFilterBuffer
 1918              		.global	Origion_NamelessQuad_acc
 1919              		.global	Origion_NamelessQuad_position
 1920              		.global	Origion_NamelessQuad_velocity
 1921              		.global	estimate_acc
 1922              		.global	estimate_position
 1923              		.global	estimate_velocity
 1924              		.global	position_z_d_ltem_biquad_parameter
 1925              		.global	Quaternion_PIOffset
 1926              		.global	Quaternion
 1927              		.global	biquad_AccParameterZ
 1928              		.global	biquad_AccParameterY
 1929              		.global	biquad_AccParameterX
 1930              		.global	biquad_GyroParameterZ
 1931              		.global	biquad_GyroParameterY
 1932              		.global	biquad_GyroParameterX
 1933              		.global	PID_PositionZ
 1934              		.global	PID_VelocityZ
 1935              		.global	PID_YawAngle
 1936              		.global	PID_YawRate
 1937              		.global	PID_RollAngle
 1938              		.global	PID_RollRate
 1939              		.global	PID_PitchAngle
 1940              		.global	PID_PitchRate
 1941              		.global	biquad_YawDItemParam
 1942              		.global	biquad_RollDItemParam
 1943              		.global	biquad_PitchDItemParam
 1944              		.section	.bss.AltitudeSlidingFilterBuffer,"aw",%nobits
 1945              		.align	2
 1948              	AltitudeSlidingFilterBuffer:
 1949 0000 00000000 		.space	20
 1949      00000000 
ARM GAS  /tmp/ccA1Y6N5.s 			page 50


 1949      00000000 
 1949      00000000 
 1949      00000000 
 1950              		.section	.bss.Altitude_Dealt,"aw",%nobits
 1951              		.align	2
 1952              		.set	.LANCHOR21,. + 0
 1955              	Altitude_Dealt:
 1956 0000 00000000 		.space	4
 1957              		.section	.bss.Origion_NamelessQuad_acc,"aw",%nobits
 1958              		.align	2
 1961              	Origion_NamelessQuad_acc:
 1962 0000 00000000 		.space	12
 1962      00000000 
 1962      00000000 
 1963              		.section	.bss.Origion_NamelessQuad_position,"aw",%nobits
 1964              		.align	2
 1965              		.set	.LANCHOR22,. + 0
 1968              	Origion_NamelessQuad_position:
 1969 0000 00000000 		.space	12
 1969      00000000 
 1969      00000000 
 1970              		.section	.bss.Origion_NamelessQuad_velocity,"aw",%nobits
 1971              		.align	2
 1972              		.set	.LANCHOR30,. + 0
 1975              	Origion_NamelessQuad_velocity:
 1976 0000 00000000 		.space	12
 1976      00000000 
 1976      00000000 
 1977              		.section	.bss.PID_PositionZ,"aw",%nobits
 1978              		.align	2
 1981              	PID_PositionZ:
 1982 0000 00000000 		.space	40
 1982      00000000 
 1982      00000000 
 1982      00000000 
 1982      00000000 
 1983              		.section	.bss.PID_VelocityZ,"aw",%nobits
 1984              		.align	2
 1987              	PID_VelocityZ:
 1988 0000 00000000 		.space	40
 1988      00000000 
 1988      00000000 
 1988      00000000 
 1988      00000000 
 1989              		.section	.bss.SpeedDealt,"aw",%nobits
 1990              		.align	2
 1991              		.set	.LANCHOR28,. + 0
 1994              	SpeedDealt:
 1995 0000 00000000 		.space	12
 1995      00000000 
 1995      00000000 
 1996              		.section	.bss.acc_correction,"aw",%nobits
 1997              		.align	2
 1998              		.set	.LANCHOR24,. + 0
 2001              	acc_correction:
 2002 0000 00000000 		.space	12
 2002      00000000 
ARM GAS  /tmp/ccA1Y6N5.s 			page 51


 2002      00000000 
 2003              		.section	.bss.altitude.0,"aw",%nobits
 2004              		.align	2
 2005              		.set	.LANCHOR32,. + 0
 2008              	altitude.0:
 2009 0000 00000000 		.space	4
 2010              		.section	.bss.attitude_control_count.1,"aw",%nobits
 2011              		.set	.LANCHOR10,. + 0
 2014              	attitude_control_count.1:
 2015 0000 00       		.space	1
 2016              		.section	.bss.biquad_AccParameterX,"aw",%nobits
 2017              		.align	2
 2018              		.set	.LANCHOR6,. + 0
 2021              	biquad_AccParameterX:
 2022 0000 00000000 		.space	28
 2022      00000000 
 2022      00000000 
 2022      00000000 
 2022      00000000 
 2023              		.section	.bss.biquad_AccParameterY,"aw",%nobits
 2024              		.align	2
 2025              		.set	.LANCHOR7,. + 0
 2028              	biquad_AccParameterY:
 2029 0000 00000000 		.space	28
 2029      00000000 
 2029      00000000 
 2029      00000000 
 2029      00000000 
 2030              		.section	.bss.biquad_AccParameterZ,"aw",%nobits
 2031              		.align	2
 2032              		.set	.LANCHOR8,. + 0
 2035              	biquad_AccParameterZ:
 2036 0000 00000000 		.space	28
 2036      00000000 
 2036      00000000 
 2036      00000000 
 2036      00000000 
 2037              		.section	.bss.biquad_GyroParameterX,"aw",%nobits
 2038              		.align	2
 2039              		.set	.LANCHOR3,. + 0
 2042              	biquad_GyroParameterX:
 2043 0000 00000000 		.space	28
 2043      00000000 
 2043      00000000 
 2043      00000000 
 2043      00000000 
 2044              		.section	.bss.biquad_GyroParameterY,"aw",%nobits
 2045              		.align	2
 2046              		.set	.LANCHOR4,. + 0
 2049              	biquad_GyroParameterY:
 2050 0000 00000000 		.space	28
 2050      00000000 
 2050      00000000 
 2050      00000000 
 2050      00000000 
 2051              		.section	.bss.biquad_GyroParameterZ,"aw",%nobits
 2052              		.align	2
ARM GAS  /tmp/ccA1Y6N5.s 			page 52


 2053              		.set	.LANCHOR5,. + 0
 2056              	biquad_GyroParameterZ:
 2057 0000 00000000 		.space	28
 2057      00000000 
 2057      00000000 
 2057      00000000 
 2057      00000000 
 2058              		.section	.bss.biquad_PitchDItemParam,"aw",%nobits
 2059              		.align	2
 2060              		.set	.LANCHOR0,. + 0
 2063              	biquad_PitchDItemParam:
 2064 0000 00000000 		.space	28
 2064      00000000 
 2064      00000000 
 2064      00000000 
 2064      00000000 
 2065              		.section	.bss.biquad_RollDItemParam,"aw",%nobits
 2066              		.align	2
 2067              		.set	.LANCHOR1,. + 0
 2070              	biquad_RollDItemParam:
 2071 0000 00000000 		.space	28
 2071      00000000 
 2071      00000000 
 2071      00000000 
 2071      00000000 
 2072              		.section	.bss.biquad_YawDItemParam,"aw",%nobits
 2073              		.align	2
 2074              		.set	.LANCHOR2,. + 0
 2077              	biquad_YawDItemParam:
 2078 0000 00000000 		.space	28
 2078      00000000 
 2078      00000000 
 2078      00000000 
 2078      00000000 
 2079              		.section	.bss.estimate_acc,"aw",%nobits
 2080              		.align	2
 2081              		.set	.LANCHOR27,. + 0
 2084              	estimate_acc:
 2085 0000 00000000 		.space	12
 2085      00000000 
 2085      00000000 
 2086              		.section	.bss.estimate_position,"aw",%nobits
 2087              		.align	2
 2088              		.set	.LANCHOR20,. + 0
 2091              	estimate_position:
 2092 0000 00000000 		.space	12
 2092      00000000 
 2092      00000000 
 2093              		.section	.bss.estimate_velocity,"aw",%nobits
 2094              		.align	2
 2095              		.set	.LANCHOR29,. + 0
 2098              	estimate_velocity:
 2099 0000 00000000 		.space	12
 2099      00000000 
 2099      00000000 
 2100              		.section	.bss.exp_cst2,"aw",%nobits
 2101              		.align	2
ARM GAS  /tmp/ccA1Y6N5.s 			page 53


 2102              		.set	.LANCHOR18,. + 0
 2105              	exp_cst2:
 2106 0000 00000000 		.space	4
 2107              		.section	.bss.pos_correction,"aw",%nobits
 2108              		.align	2
 2109              		.set	.LANCHOR26,. + 0
 2112              	pos_correction:
 2113 0000 00000000 		.space	12
 2113      00000000 
 2113      00000000 
 2114              		.section	.bss.position_z_d_ltem_biquad_parameter,"aw",%nobits
 2115              		.align	2
 2116              		.set	.LANCHOR9,. + 0
 2119              	position_z_d_ltem_biquad_parameter:
 2120 0000 00000000 		.space	28
 2120      00000000 
 2120      00000000 
 2120      00000000 
 2120      00000000 
 2121              		.section	.bss.vel_correction,"aw",%nobits
 2122              		.align	2
 2123              		.set	.LANCHOR25,. + 0
 2126              	vel_correction:
 2127 0000 00000000 		.space	12
 2127      00000000 
 2127      00000000 
 2128              		.section	.data.AltitudeLPFParam,"aw"
 2129              		.align	2
 2132              	AltitudeLPFParam:
 2133 0000 0000003F 		.word	1056964608
 2134 0004 00000000 		.word	0
 2135              		.section	.data.AltitudeSlidingFilterParam,"aw"
 2136              		.align	2
 2139              	AltitudeSlidingFilterParam:
 2140 0000 00000000 		.word	0
 2141 0004 05000000 		.word	5
 2142 0008 00000000 		.word	AltitudeSlidingFilterBuffer
 2143 000c 00000000 		.word	0
 2144              		.section	.data.High_Filter,"aw"
 2145              		.align	2
 2146              		.set	.LANCHOR23,. + 0
 2149              	High_Filter:
 2150 0000 0AD7233C 		.word	1008981770
 2151 0004 CDCC4C3D 		.word	1028443341
 2152 0008 0AD7A33C 		.word	1017370378
 2153              		.section	.data.PID_PitchAngle,"aw"
 2154              		.align	2
 2155              		.set	.LANCHOR11,. + 0
 2158              	PID_PitchAngle:
 2159 0000 0000A040 		.word	1084227584
 2160 0004 00000000 		.word	0
 2161 0008 00000000 		.word	0
 2162 000c 00000000 		.word	0
 2163 0010 00000000 		.word	0
 2164 0014 00000000 		.word	0
 2165 0018 00000000 		.word	0
 2166 001c 000096C3 		.word	-1013579776
ARM GAS  /tmp/ccA1Y6N5.s 			page 54


 2167 0020 00009643 		.word	1133903872
 2168 0024 00000000 		.word	0
 2169              		.section	.data.PID_PitchRate,"aw"
 2170              		.align	2
 2171              		.set	.LANCHOR14,. + 0
 2174              	PID_PitchRate:
 2175 0000 66666640 		.word	1080452710
 2176 0004 0AD7A33C 		.word	1017370378
 2177 0008 00005042 		.word	1112539136
 2178 000c 00000000 		.word	0
 2179 0010 00000000 		.word	0
 2180 0014 0000FAC3 		.word	-1007026176
 2181 0018 0000FA43 		.word	1140457472
 2182 001c 0000FAC4 		.word	-990248960
 2183 0020 0000FA44 		.word	1157234688
 2184 0024 00000000 		.word	PID_DItemFilterPitchRate
 2185              		.section	.data.PID_RollAngle,"aw"
 2186              		.align	2
 2187              		.set	.LANCHOR12,. + 0
 2190              	PID_RollAngle:
 2191 0000 0000A040 		.word	1084227584
 2192 0004 00000000 		.word	0
 2193 0008 00000000 		.word	0
 2194 000c 00000000 		.word	0
 2195 0010 00000000 		.word	0
 2196 0014 00000000 		.word	0
 2197 0018 00000000 		.word	0
 2198 001c 000096C3 		.word	-1013579776
 2199 0020 00009643 		.word	1133903872
 2200 0024 00000000 		.word	0
 2201              		.section	.data.PID_RollRate,"aw"
 2202              		.align	2
 2203              		.set	.LANCHOR15,. + 0
 2206              	PID_RollRate:
 2207 0000 CDCC2C40 		.word	1076677837
 2208 0004 8FC2753C 		.word	1014350479
 2209 0008 00001C42 		.word	1109131264
 2210 000c 00000000 		.word	0
 2211 0010 00000000 		.word	0
 2212 0014 0000FAC3 		.word	-1007026176
 2213 0018 0000FA43 		.word	1140457472
 2214 001c 0000FAC4 		.word	-990248960
 2215 0020 0000FA44 		.word	1157234688
 2216 0024 00000000 		.word	PID_DItemFilterRollRate
 2217              		.section	.data.PID_YawAngle,"aw"
 2218              		.align	2
 2219              		.set	.LANCHOR13,. + 0
 2222              	PID_YawAngle:
 2223 0000 0000A040 		.word	1084227584
 2224 0004 00000000 		.word	0
 2225 0008 00000000 		.word	0
 2226 000c 00000000 		.word	0
 2227 0010 00000000 		.word	0
 2228 0014 00000000 		.word	0
 2229 0018 00000000 		.word	0
 2230 001c 000096C3 		.word	-1013579776
 2231 0020 00009643 		.word	1133903872
ARM GAS  /tmp/ccA1Y6N5.s 			page 55


 2232 0024 00000000 		.word	0
 2233              		.section	.data.PID_YawRate,"aw"
 2234              		.align	2
 2235              		.set	.LANCHOR16,. + 0
 2238              	PID_YawRate:
 2239 0000 00000041 		.word	1090519040
 2240 0004 0AD7233C 		.word	1008981770
 2241 0008 00000000 		.word	0
 2242 000c 00000000 		.word	0
 2243 0010 00000000 		.word	0
 2244 0014 0000FAC3 		.word	-1007026176
 2245 0018 0000FA43 		.word	1140457472
 2246 001c 0000FAC4 		.word	-990248960
 2247 0020 0000FA44 		.word	1157234688
 2248 0024 00000000 		.word	PID_DItemFilterYawRate
 2249              		.section	.data.Quaternion,"aw"
 2250              		.align	2
 2251              		.set	.LANCHOR19,. + 0
 2254              	Quaternion:
 2255 0000 0000803F 		.word	1065353216
 2256 0004 00000000 		.word	0
 2257 0008 00000000 		.word	0
 2258 000c 00000000 		.word	0
 2259 0010 00000000 		.word	0
 2260 0014 00000000 		.space	8
 2260      00000000 
 2261 001c 00000000 		.space	24
 2261      00000000 
 2261      00000000 
 2261      00000000 
 2261      00000000 
 2262              		.section	.data.Quaternion_PIOffset,"aw"
 2263              		.align	2
 2264              		.set	.LANCHOR33,. + 0
 2267              	Quaternion_PIOffset:
 2268 0000 CDCCCC3E 		.word	1053609165
 2269 0004 00000000 		.word	0
 2270 0008 00000000 		.word	0
 2271 000c 00000000 		.word	0
 2272 0010 00000000 		.word	0
 2273              		.section	.data.baro_compensate_k,"aw"
 2274              		.align	2
 2275              		.set	.LANCHOR31,. + 0
 2278              	baro_compensate_k:
 2279 0000 0AD7A33C 		.word	1017370378
 2280              		.section	.data.exp_cst1,"aw"
 2281              		.align	2
 2282              		.set	.LANCHOR17,. + 0
 2285              	exp_cst1:
 2286 0000 0000FF4E 		.word	1325334528
 2287              		.text
 2288              	.Letext0:
 2289              		.file 2 "/usr/lib/gcc/arm-none-eabi/10.3.1/include/stdint.h"
 2290              		.file 3 "dev/motor/motor.h"
 2291              		.file 4 "dev/mpu6050/mpu6050.h"
 2292              		.file 5 "dev/motor/motor_config.h"
 2293              		.file 6 "dev/mpu6050/mpu6050_config.h"
ARM GAS  /tmp/ccA1Y6N5.s 			page 56


 2294              		.file 7 "dev/bmp280/bmp280.h"
 2295              		.file 8 "dev/spl06/spl06.h"
 2296              		.file 9 "dev/spl06/spl06_cfg.h"
 2297              		.file 10 "dal/remote/remote_data.h"
 2298              		.file 11 "app/quaternion/quaternion.h"
 2299              		.file 12 "app/remote_task/remote_task.h"
 2300              		.file 13 "app/pid/pid.h"
 2301              		.file 14 "app/filter/filter.h"
 2302              		.file 15 "freeRTOS/GCC/portmacro.h"
 2303              		.file 16 "freeRTOS/include/queue.h"
 2304              		.file 17 "app/main.h"
 2305              		.file 18 "freeRTOS/include/task.h"
 2306              		.file 19 "/usr/include/newlib/math.h"
 2307              		.file 20 "common/common.h"
ARM GAS  /tmp/ccA1Y6N5.s 			page 57


DEFINED SYMBOLS
                            *ABS*:0000000000000000 control.c
     /tmp/ccA1Y6N5.s:18     .text.PID_DItemFilterPitchRate:0000000000000000 $t
     /tmp/ccA1Y6N5.s:25     .text.PID_DItemFilterPitchRate:0000000000000000 PID_DItemFilterPitchRate
     /tmp/ccA1Y6N5.s:49     .text.PID_DItemFilterPitchRate:000000000000000c $d
     /tmp/ccA1Y6N5.s:54     .text.PID_DItemFilterRollRate:0000000000000000 $t
     /tmp/ccA1Y6N5.s:60     .text.PID_DItemFilterRollRate:0000000000000000 PID_DItemFilterRollRate
     /tmp/ccA1Y6N5.s:83     .text.PID_DItemFilterRollRate:000000000000000c $d
     /tmp/ccA1Y6N5.s:88     .text.PID_DItemFilterYawRate:0000000000000000 $t
     /tmp/ccA1Y6N5.s:94     .text.PID_DItemFilterYawRate:0000000000000000 PID_DItemFilterYawRate
     /tmp/ccA1Y6N5.s:117    .text.PID_DItemFilterYawRate:000000000000000c $d
     /tmp/ccA1Y6N5.s:122    .text.MotorStopAll:0000000000000000 $t
     /tmp/ccA1Y6N5.s:128    .text.MotorStopAll:0000000000000000 MotorStopAll
     /tmp/ccA1Y6N5.s:171    .text.MotorStopAll:0000000000000020 $d
     /tmp/ccA1Y6N5.s:176    .text.FilterInit:0000000000000000 $t
     /tmp/ccA1Y6N5.s:183    .text.FilterInit:0000000000000000 FilterInit
     /tmp/ccA1Y6N5.s:259    .text.FilterInit:000000000000007c $d
     /tmp/ccA1Y6N5.s:276    .text.AttitudeControl:0000000000000000 $t
     /tmp/ccA1Y6N5.s:283    .text.AttitudeControl:0000000000000000 AttitudeControl
     /tmp/ccA1Y6N5.s:601    .text.AttitudeControl:0000000000000198 $d
     /tmp/ccA1Y6N5.s:619    .text.exp_approx:0000000000000000 $t
     /tmp/ccA1Y6N5.s:626    .text.exp_approx:0000000000000000 exp_approx
     /tmp/ccA1Y6N5.s:719    .text.exp_approx:0000000000000090 $d
     /tmp/ccA1Y6N5.s:732    .text.log_approx:0000000000000000 $t
     /tmp/ccA1Y6N5.s:739    .text.log_approx:0000000000000000 log_approx
     /tmp/ccA1Y6N5.s:818    .text.log_approx:000000000000007c $d
     /tmp/ccA1Y6N5.s:830    .text.pow_approx:0000000000000000 $t
     /tmp/ccA1Y6N5.s:837    .text.pow_approx:0000000000000000 pow_approx
     /tmp/ccA1Y6N5.s:877    .text.PressureToAltitude:0000000000000000 $t
     /tmp/ccA1Y6N5.s:884    .text.PressureToAltitude:0000000000000000 PressureToAltitude
     /tmp/ccA1Y6N5.s:916    .text.PressureToAltitude:0000000000000024 $d
     /tmp/ccA1Y6N5.s:925    .text.Strapdown_INS_High:0000000000000000 $t
     /tmp/ccA1Y6N5.s:932    .text.Strapdown_INS_High:0000000000000000 Strapdown_INS_High
     /tmp/ccA1Y6N5.s:1171   .text.Strapdown_INS_High:0000000000000194 $d
     /tmp/ccA1Y6N5.s:1195   .text.PositionFusion:0000000000000000 $t
     /tmp/ccA1Y6N5.s:1202   .text.PositionFusion:0000000000000000 PositionFusion
     /tmp/ccA1Y6N5.s:1433   .text.PositionFusion:000000000000015c $d
     /tmp/ccA1Y6N5.s:1447   .text.ControlTask:0000000000000000 $t
     /tmp/ccA1Y6N5.s:1454   .text.ControlTask:0000000000000000 ControlTask
     /tmp/ccA1Y6N5.s:1877   .text.ControlTask:000000000000026c $d
     /tmp/ccA1Y6N5.s:2278   .data.baro_compensate_k:0000000000000000 baro_compensate_k
     /tmp/ccA1Y6N5.s:1994   .bss.SpeedDealt:0000000000000000 SpeedDealt
     /tmp/ccA1Y6N5.s:2112   .bss.pos_correction:0000000000000000 pos_correction
     /tmp/ccA1Y6N5.s:2126   .bss.vel_correction:0000000000000000 vel_correction
     /tmp/ccA1Y6N5.s:2001   .bss.acc_correction:0000000000000000 acc_correction
     /tmp/ccA1Y6N5.s:1955   .bss.Altitude_Dealt:0000000000000000 Altitude_Dealt
     /tmp/ccA1Y6N5.s:2149   .data.High_Filter:0000000000000000 High_Filter
     /tmp/ccA1Y6N5.s:2105   .bss.exp_cst2:0000000000000000 exp_cst2
     /tmp/ccA1Y6N5.s:2285   .data.exp_cst1:0000000000000000 exp_cst1
     /tmp/ccA1Y6N5.s:2132   .data.AltitudeLPFParam:0000000000000000 AltitudeLPFParam
     /tmp/ccA1Y6N5.s:2139   .data.AltitudeSlidingFilterParam:0000000000000000 AltitudeSlidingFilterParam
     /tmp/ccA1Y6N5.s:1948   .bss.AltitudeSlidingFilterBuffer:0000000000000000 AltitudeSlidingFilterBuffer
     /tmp/ccA1Y6N5.s:1961   .bss.Origion_NamelessQuad_acc:0000000000000000 Origion_NamelessQuad_acc
     /tmp/ccA1Y6N5.s:1968   .bss.Origion_NamelessQuad_position:0000000000000000 Origion_NamelessQuad_position
     /tmp/ccA1Y6N5.s:1975   .bss.Origion_NamelessQuad_velocity:0000000000000000 Origion_NamelessQuad_velocity
     /tmp/ccA1Y6N5.s:2084   .bss.estimate_acc:0000000000000000 estimate_acc
     /tmp/ccA1Y6N5.s:2091   .bss.estimate_position:0000000000000000 estimate_position
ARM GAS  /tmp/ccA1Y6N5.s 			page 58


     /tmp/ccA1Y6N5.s:2098   .bss.estimate_velocity:0000000000000000 estimate_velocity
     /tmp/ccA1Y6N5.s:2119   .bss.position_z_d_ltem_biquad_parameter:0000000000000000 position_z_d_ltem_biquad_parameter
     /tmp/ccA1Y6N5.s:2267   .data.Quaternion_PIOffset:0000000000000000 Quaternion_PIOffset
     /tmp/ccA1Y6N5.s:2254   .data.Quaternion:0000000000000000 Quaternion
     /tmp/ccA1Y6N5.s:2035   .bss.biquad_AccParameterZ:0000000000000000 biquad_AccParameterZ
     /tmp/ccA1Y6N5.s:2028   .bss.biquad_AccParameterY:0000000000000000 biquad_AccParameterY
     /tmp/ccA1Y6N5.s:2021   .bss.biquad_AccParameterX:0000000000000000 biquad_AccParameterX
     /tmp/ccA1Y6N5.s:2056   .bss.biquad_GyroParameterZ:0000000000000000 biquad_GyroParameterZ
     /tmp/ccA1Y6N5.s:2049   .bss.biquad_GyroParameterY:0000000000000000 biquad_GyroParameterY
     /tmp/ccA1Y6N5.s:2042   .bss.biquad_GyroParameterX:0000000000000000 biquad_GyroParameterX
     /tmp/ccA1Y6N5.s:1981   .bss.PID_PositionZ:0000000000000000 PID_PositionZ
     /tmp/ccA1Y6N5.s:1987   .bss.PID_VelocityZ:0000000000000000 PID_VelocityZ
     /tmp/ccA1Y6N5.s:2222   .data.PID_YawAngle:0000000000000000 PID_YawAngle
     /tmp/ccA1Y6N5.s:2238   .data.PID_YawRate:0000000000000000 PID_YawRate
     /tmp/ccA1Y6N5.s:2190   .data.PID_RollAngle:0000000000000000 PID_RollAngle
     /tmp/ccA1Y6N5.s:2206   .data.PID_RollRate:0000000000000000 PID_RollRate
     /tmp/ccA1Y6N5.s:2158   .data.PID_PitchAngle:0000000000000000 PID_PitchAngle
     /tmp/ccA1Y6N5.s:2174   .data.PID_PitchRate:0000000000000000 PID_PitchRate
     /tmp/ccA1Y6N5.s:2077   .bss.biquad_YawDItemParam:0000000000000000 biquad_YawDItemParam
     /tmp/ccA1Y6N5.s:2070   .bss.biquad_RollDItemParam:0000000000000000 biquad_RollDItemParam
     /tmp/ccA1Y6N5.s:2063   .bss.biquad_PitchDItemParam:0000000000000000 biquad_PitchDItemParam
     /tmp/ccA1Y6N5.s:1945   .bss.AltitudeSlidingFilterBuffer:0000000000000000 $d
     /tmp/ccA1Y6N5.s:1951   .bss.Altitude_Dealt:0000000000000000 $d
     /tmp/ccA1Y6N5.s:1958   .bss.Origion_NamelessQuad_acc:0000000000000000 $d
     /tmp/ccA1Y6N5.s:1964   .bss.Origion_NamelessQuad_position:0000000000000000 $d
     /tmp/ccA1Y6N5.s:1971   .bss.Origion_NamelessQuad_velocity:0000000000000000 $d
     /tmp/ccA1Y6N5.s:1978   .bss.PID_PositionZ:0000000000000000 $d
     /tmp/ccA1Y6N5.s:1984   .bss.PID_VelocityZ:0000000000000000 $d
     /tmp/ccA1Y6N5.s:1990   .bss.SpeedDealt:0000000000000000 $d
     /tmp/ccA1Y6N5.s:1997   .bss.acc_correction:0000000000000000 $d
     /tmp/ccA1Y6N5.s:2004   .bss.altitude.0:0000000000000000 $d
     /tmp/ccA1Y6N5.s:2008   .bss.altitude.0:0000000000000000 altitude.0
     /tmp/ccA1Y6N5.s:2014   .bss.attitude_control_count.1:0000000000000000 attitude_control_count.1
     /tmp/ccA1Y6N5.s:2015   .bss.attitude_control_count.1:0000000000000000 $d
     /tmp/ccA1Y6N5.s:2017   .bss.biquad_AccParameterX:0000000000000000 $d
     /tmp/ccA1Y6N5.s:2024   .bss.biquad_AccParameterY:0000000000000000 $d
     /tmp/ccA1Y6N5.s:2031   .bss.biquad_AccParameterZ:0000000000000000 $d
     /tmp/ccA1Y6N5.s:2038   .bss.biquad_GyroParameterX:0000000000000000 $d
     /tmp/ccA1Y6N5.s:2045   .bss.biquad_GyroParameterY:0000000000000000 $d
     /tmp/ccA1Y6N5.s:2052   .bss.biquad_GyroParameterZ:0000000000000000 $d
     /tmp/ccA1Y6N5.s:2059   .bss.biquad_PitchDItemParam:0000000000000000 $d
     /tmp/ccA1Y6N5.s:2066   .bss.biquad_RollDItemParam:0000000000000000 $d
     /tmp/ccA1Y6N5.s:2073   .bss.biquad_YawDItemParam:0000000000000000 $d
     /tmp/ccA1Y6N5.s:2080   .bss.estimate_acc:0000000000000000 $d
     /tmp/ccA1Y6N5.s:2087   .bss.estimate_position:0000000000000000 $d
     /tmp/ccA1Y6N5.s:2094   .bss.estimate_velocity:0000000000000000 $d
     /tmp/ccA1Y6N5.s:2101   .bss.exp_cst2:0000000000000000 $d
     /tmp/ccA1Y6N5.s:2108   .bss.pos_correction:0000000000000000 $d
     /tmp/ccA1Y6N5.s:2115   .bss.position_z_d_ltem_biquad_parameter:0000000000000000 $d
     /tmp/ccA1Y6N5.s:2122   .bss.vel_correction:0000000000000000 $d
     /tmp/ccA1Y6N5.s:2129   .data.AltitudeLPFParam:0000000000000000 $d
     /tmp/ccA1Y6N5.s:2136   .data.AltitudeSlidingFilterParam:0000000000000000 $d
     /tmp/ccA1Y6N5.s:2145   .data.High_Filter:0000000000000000 $d
     /tmp/ccA1Y6N5.s:2154   .data.PID_PitchAngle:0000000000000000 $d
     /tmp/ccA1Y6N5.s:2170   .data.PID_PitchRate:0000000000000000 $d
     /tmp/ccA1Y6N5.s:2186   .data.PID_RollAngle:0000000000000000 $d
     /tmp/ccA1Y6N5.s:2202   .data.PID_RollRate:0000000000000000 $d
ARM GAS  /tmp/ccA1Y6N5.s 			page 59


     /tmp/ccA1Y6N5.s:2218   .data.PID_YawAngle:0000000000000000 $d
     /tmp/ccA1Y6N5.s:2234   .data.PID_YawRate:0000000000000000 $d
     /tmp/ccA1Y6N5.s:2250   .data.Quaternion:0000000000000000 $d
     /tmp/ccA1Y6N5.s:2263   .data.Quaternion_PIOffset:0000000000000000 $d
     /tmp/ccA1Y6N5.s:2274   .data.baro_compensate_k:0000000000000000 $d
     /tmp/ccA1Y6N5.s:2281   .data.exp_cst1:0000000000000000 $d

UNDEFINED SYMBOLS
biquad_filter
Motor_Out
Motor
biquad_filter_init_lpf
__aeabi_f2d
__aeabi_dsub
__aeabi_d2f
PID_Control
int_range
powf
__aeabi_dmul
__aeabi_dadd
Quaternion_BodyToEarth
xTaskGetTickCount
MPU6050_GetBaseAcc
MPU6050_GetBaseGyro
MPU6050_ConvertDataAcc
MPU6050_ConvertDataGyro
Quaternion_IMUCalculation
RemoteData_GetRockerValue
PID_ISumClean
vTaskDelayUntil
xQueueGenericReceive
SPL06_GetDataAll
xQueueGenericSend
MPU6050
RemoteDataQueue
SPL06
BaroAltitudeQueue
AltitudeQueue
AccQueue
