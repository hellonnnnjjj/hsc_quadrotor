ARM GAS  /tmp/cco68ac0.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"usart_config.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.USART_ConfigInitAll,"ax",%progbits
  18              		.align	1
  19              		.global	USART_ConfigInitAll
  20              		.arch armv7e-m
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  24              		.fpu fpv4-sp-d16
  26              	USART_ConfigInitAll:
  27              	.LFB123:
  28              		.file 1 "./hardware/usart/usart_config.c"
   1:./hardware/usart/usart_config.c **** #include "usart_config.h"
   2:./hardware/usart/usart_config.c **** 
   3:./hardware/usart/usart_config.c **** #include "at32f4xx_usart.h"
   4:./hardware/usart/usart_config.c **** 
   5:./hardware/usart/usart_config.c ****             
   6:./hardware/usart/usart_config.c **** uint8_t USART2_Buffer[USART2_BUFFER_SIZE];
   7:./hardware/usart/usart_config.c **** CircularQueue_t USART2_Queue = 
   8:./hardware/usart/usart_config.c **** {
   9:./hardware/usart/usart_config.c **** 	.Buffer = USART2_Buffer,
  10:./hardware/usart/usart_config.c **** 	.BufferSize = USART2_BUFFER_SIZE,
  11:./hardware/usart/usart_config.c **** 
  12:./hardware/usart/usart_config.c **** 	.WriteIndex = 0,
  13:./hardware/usart/usart_config.c **** 	.ReadIndex = 0,
  14:./hardware/usart/usart_config.c **** };
  15:./hardware/usart/usart_config.c **** 
  16:./hardware/usart/usart_config.c **** 
  17:./hardware/usart/usart_config.c **** 
  18:./hardware/usart/usart_config.c **** 
  19:./hardware/usart/usart_config.c **** 
  20:./hardware/usart/usart_config.c **** void USART_ConfigInitAll()
  21:./hardware/usart/usart_config.c **** {
  29              		.loc 1 21 1 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 24
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33 0000 70B5     		push	{r4, r5, r6, lr}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 16
  36              		.cfi_offset 4, -16
  37              		.cfi_offset 5, -12
ARM GAS  /tmp/cco68ac0.s 			page 2


  38              		.cfi_offset 6, -8
  39              		.cfi_offset 14, -4
  40 0002 86B0     		sub	sp, sp, #24
  41              	.LCFI1:
  42              		.cfi_def_cfa_offset 40
  22:./hardware/usart/usart_config.c **** 	USART_InitType USART_InitStructure;
  43              		.loc 1 22 2 view .LVU1
  23:./hardware/usart/usart_config.c **** 	NVIC_InitType NVIC_InitStructure;
  44              		.loc 1 23 2 view .LVU2
  24:./hardware/usart/usart_config.c **** 
  25:./hardware/usart/usart_config.c **** 	/*************************USART1********************************/
  26:./hardware/usart/usart_config.c **** #if TRUE
  27:./hardware/usart/usart_config.c **** 	USART_StructInit(&USART_InitStructure);
  45              		.loc 1 27 2 view .LVU3
  46 0004 02A8     		add	r0, sp, #8
  47 0006 FFF7FEFF 		bl	USART_StructInit
  48              	.LVL0:
  28:./hardware/usart/usart_config.c **** 	USART_InitStructure.USART_BaudRate = 115200;
  49              		.loc 1 28 2 view .LVU4
  50              		.loc 1 28 37 is_stmt 0 view .LVU5
  51 000a 4FF4E135 		mov	r5, #115200
  52 000e 0295     		str	r5, [sp, #8]
  29:./hardware/usart/usart_config.c **** 	USART_InitStructure.USART_WordLength = USART_WordLength_8b;
  53              		.loc 1 29 2 is_stmt 1 view .LVU6
  54              		.loc 1 29 39 is_stmt 0 view .LVU7
  55 0010 0024     		movs	r4, #0
  56 0012 ADF80C40 		strh	r4, [sp, #12]	@ movhi
  30:./hardware/usart/usart_config.c **** 	USART_InitStructure.USART_StopBits = USART_StopBits_1;
  57              		.loc 1 30 2 is_stmt 1 view .LVU8
  58              		.loc 1 30 37 is_stmt 0 view .LVU9
  59 0016 ADF80E40 		strh	r4, [sp, #14]	@ movhi
  31:./hardware/usart/usart_config.c **** 	USART_InitStructure.USART_Parity = USART_Parity_No;
  60              		.loc 1 31 2 is_stmt 1 view .LVU10
  61              		.loc 1 31 35 is_stmt 0 view .LVU11
  62 001a ADF81040 		strh	r4, [sp, #16]	@ movhi
  32:./hardware/usart/usart_config.c **** 	USART_InitStructure.USART_HardwareFlowControl = USART_HardwareFlowControl_None;
  63              		.loc 1 32 2 is_stmt 1 view .LVU12
  64              		.loc 1 32 48 is_stmt 0 view .LVU13
  65 001e ADF81440 		strh	r4, [sp, #20]	@ movhi
  33:./hardware/usart/usart_config.c **** 	USART_InitStructure.USART_Mode = USART_Mode_Rx | USART_Mode_Tx;
  66              		.loc 1 33 2 is_stmt 1 view .LVU14
  67              		.loc 1 33 33 is_stmt 0 view .LVU15
  68 0022 0C23     		movs	r3, #12
  69 0024 ADF81230 		strh	r3, [sp, #18]	@ movhi
  34:./hardware/usart/usart_config.c **** 
  35:./hardware/usart/usart_config.c **** 	USART_Init(USART1, &USART_InitStructure);
  70              		.loc 1 35 2 is_stmt 1 view .LVU16
  71 0028 1C4E     		ldr	r6, .L3
  72 002a 02A9     		add	r1, sp, #8
  73 002c 3046     		mov	r0, r6
  74 002e FFF7FEFF 		bl	USART_Init
  75              	.LVL1:
  36:./hardware/usart/usart_config.c **** 
  37:./hardware/usart/usart_config.c **** 	//USART_INTConfig(USART1, USART_INT_RDNE, ENABLE);
  38:./hardware/usart/usart_config.c **** 	//USART_INTConfig(USART1, USART_INT_TDE, ENABLE);
  39:./hardware/usart/usart_config.c **** 
  40:./hardware/usart/usart_config.c **** 	USART_Cmd(USART1, ENABLE);
ARM GAS  /tmp/cco68ac0.s 			page 3


  76              		.loc 1 40 2 view .LVU17
  77 0032 0121     		movs	r1, #1
  78 0034 3046     		mov	r0, r6
  79 0036 FFF7FEFF 		bl	USART_Cmd
  80              	.LVL2:
  41:./hardware/usart/usart_config.c **** 	/*
  42:./hardware/usart/usart_config.c **** 	NVIC_InitStructure.NVIC_IRQChannel = USART1_IRQn;
  43:./hardware/usart/usart_config.c **** 	NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = 14;
  44:./hardware/usart/usart_config.c **** 	NVIC_InitStructure.NVIC_IRQChannelSubPriority = 0;
  45:./hardware/usart/usart_config.c **** 	NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;
  46:./hardware/usart/usart_config.c **** 	NVIC_Init(&NVIC_InitStructure);*/
  47:./hardware/usart/usart_config.c **** 
  48:./hardware/usart/usart_config.c **** #endif
  49:./hardware/usart/usart_config.c **** 
  50:./hardware/usart/usart_config.c **** 	/*************************USART2********************************/
  51:./hardware/usart/usart_config.c **** #if TRUE	
  52:./hardware/usart/usart_config.c **** 	USART_InitStructure.USART_BaudRate = 115200;
  81              		.loc 1 52 2 view .LVU18
  82              		.loc 1 52 37 is_stmt 0 view .LVU19
  83 003a 0295     		str	r5, [sp, #8]
  53:./hardware/usart/usart_config.c **** 	USART_InitStructure.USART_WordLength = USART_WordLength_8b;
  84              		.loc 1 53 2 is_stmt 1 view .LVU20
  85              		.loc 1 53 39 is_stmt 0 view .LVU21
  86 003c ADF80C40 		strh	r4, [sp, #12]	@ movhi
  54:./hardware/usart/usart_config.c **** 	USART_InitStructure.USART_StopBits = USART_StopBits_1;
  87              		.loc 1 54 2 is_stmt 1 view .LVU22
  88              		.loc 1 54 37 is_stmt 0 view .LVU23
  89 0040 ADF80E40 		strh	r4, [sp, #14]	@ movhi
  55:./hardware/usart/usart_config.c **** 	USART_InitStructure.USART_Parity = USART_Parity_No;     //USART_Parity_No  USART_Parity_Even
  90              		.loc 1 55 2 is_stmt 1 view .LVU24
  91              		.loc 1 55 35 is_stmt 0 view .LVU25
  92 0044 ADF81040 		strh	r4, [sp, #16]	@ movhi
  56:./hardware/usart/usart_config.c **** 	USART_InitStructure.USART_HardwareFlowControl = USART_HardwareFlowControl_None;
  93              		.loc 1 56 2 is_stmt 1 view .LVU26
  94              		.loc 1 56 48 is_stmt 0 view .LVU27
  95 0048 ADF81440 		strh	r4, [sp, #20]	@ movhi
  57:./hardware/usart/usart_config.c **** 	USART_InitStructure.USART_Mode = USART_Mode_Rx;
  96              		.loc 1 57 2 is_stmt 1 view .LVU28
  97              		.loc 1 57 33 is_stmt 0 view .LVU29
  98 004c 0423     		movs	r3, #4
  99 004e ADF81230 		strh	r3, [sp, #18]	@ movhi
  58:./hardware/usart/usart_config.c **** 
  59:./hardware/usart/usart_config.c ****   	USART_Init(USART2, &USART_InitStructure);
 100              		.loc 1 59 4 is_stmt 1 view .LVU30
 101 0052 134D     		ldr	r5, .L3+4
 102 0054 02A9     		add	r1, sp, #8
 103 0056 2846     		mov	r0, r5
 104 0058 FFF7FEFF 		bl	USART_Init
 105              	.LVL3:
  60:./hardware/usart/usart_config.c ****   
  61:./hardware/usart/usart_config.c ****   	//USART_INTConfig(USART2, USART_INT_RDNE, ENABLE);
  62:./hardware/usart/usart_config.c **** 	USART_INTConfig(USART2, USART_INT_IDLEF, ENABLE);
 106              		.loc 1 62 2 view .LVU31
 107 005c 0122     		movs	r2, #1
 108 005e 40F22441 		movw	r1, #1060
 109 0062 2846     		mov	r0, r5
 110 0064 FFF7FEFF 		bl	USART_INTConfig
ARM GAS  /tmp/cco68ac0.s 			page 4


 111              	.LVL4:
  63:./hardware/usart/usart_config.c ****   	//USART_INTConfig(UARTx, USART_INT_TDE, ENABLE);
  64:./hardware/usart/usart_config.c **** 
  65:./hardware/usart/usart_config.c ****   	USART_Cmd(USART2, ENABLE);
 112              		.loc 1 65 4 view .LVU32
 113 0068 0121     		movs	r1, #1
 114 006a 2846     		mov	r0, r5
 115 006c FFF7FEFF 		bl	USART_Cmd
 116              	.LVL5:
  66:./hardware/usart/usart_config.c **** 	
  67:./hardware/usart/usart_config.c **** 	USART_DMACmd(USART2, USART_DMAReq_Rx, ENABLE);
 117              		.loc 1 67 2 view .LVU33
 118 0070 0122     		movs	r2, #1
 119 0072 4021     		movs	r1, #64
 120 0074 2846     		mov	r0, r5
 121 0076 FFF7FEFF 		bl	USART_DMACmd
 122              	.LVL6:
  68:./hardware/usart/usart_config.c ****   
  69:./hardware/usart/usart_config.c **** 	NVIC_InitStructure.NVIC_IRQChannel = USART2_IRQn;
 123              		.loc 1 69 2 view .LVU34
 124              		.loc 1 69 37 is_stmt 0 view .LVU35
 125 007a 1C23     		movs	r3, #28
 126 007c 8DF80430 		strb	r3, [sp, #4]
  70:./hardware/usart/usart_config.c **** 	NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = 14;
 127              		.loc 1 70 2 is_stmt 1 view .LVU36
 128              		.loc 1 70 55 is_stmt 0 view .LVU37
 129 0080 0E23     		movs	r3, #14
 130 0082 8DF80530 		strb	r3, [sp, #5]
  71:./hardware/usart/usart_config.c **** 	NVIC_InitStructure.NVIC_IRQChannelSubPriority = 0;
 131              		.loc 1 71 2 is_stmt 1 view .LVU38
 132              		.loc 1 71 48 is_stmt 0 view .LVU39
 133 0086 8DF80640 		strb	r4, [sp, #6]
  72:./hardware/usart/usart_config.c **** 	NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;
 134              		.loc 1 72 2 is_stmt 1 view .LVU40
 135              		.loc 1 72 40 is_stmt 0 view .LVU41
 136 008a 0123     		movs	r3, #1
 137 008c 8DF80730 		strb	r3, [sp, #7]
  73:./hardware/usart/usart_config.c **** 	NVIC_Init(&NVIC_InitStructure);
 138              		.loc 1 73 2 is_stmt 1 view .LVU42
 139 0090 01A8     		add	r0, sp, #4
 140 0092 FFF7FEFF 		bl	NVIC_Init
 141              	.LVL7:
  74:./hardware/usart/usart_config.c **** 
  75:./hardware/usart/usart_config.c **** #endif
  76:./hardware/usart/usart_config.c **** 
  77:./hardware/usart/usart_config.c **** 	
  78:./hardware/usart/usart_config.c **** }
 142              		.loc 1 78 1 is_stmt 0 view .LVU43
 143 0096 06B0     		add	sp, sp, #24
 144              	.LCFI2:
 145              		.cfi_def_cfa_offset 16
 146              		@ sp needed
 147 0098 70BD     		pop	{r4, r5, r6, pc}
 148              	.L4:
 149 009a 00BF     		.align	2
 150              	.L3:
 151 009c 00380140 		.word	1073821696
ARM GAS  /tmp/cco68ac0.s 			page 5


 152 00a0 00440040 		.word	1073759232
 153              		.cfi_endproc
 154              	.LFE123:
 156              		.section	.text.USART_TransmissionData,"ax",%progbits
 157              		.align	1
 158              		.global	USART_TransmissionData
 159              		.syntax unified
 160              		.thumb
 161              		.thumb_func
 162              		.fpu fpv4-sp-d16
 164              	USART_TransmissionData:
 165              	.LVL8:
 166              	.LFB124:
  79:./hardware/usart/usart_config.c **** 
  80:./hardware/usart/usart_config.c **** 
  81:./hardware/usart/usart_config.c **** 
  82:./hardware/usart/usart_config.c **** 
  83:./hardware/usart/usart_config.c **** void USART_TransmissionData(USART_Type * USARTx,  uint8_t * data, uint32_t len)
  84:./hardware/usart/usart_config.c **** {
 167              		.loc 1 84 1 is_stmt 1 view -0
 168              		.cfi_startproc
 169              		@ args = 0, pretend = 0, frame = 0
 170              		@ frame_needed = 0, uses_anonymous_args = 0
 171              		.loc 1 84 1 is_stmt 0 view .LVU45
 172 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 173              	.LCFI3:
 174              		.cfi_def_cfa_offset 24
 175              		.cfi_offset 3, -24
 176              		.cfi_offset 4, -20
 177              		.cfi_offset 5, -16
 178              		.cfi_offset 6, -12
 179              		.cfi_offset 7, -8
 180              		.cfi_offset 14, -4
 181 0002 0446     		mov	r4, r0
 182 0004 0E46     		mov	r6, r1
 183 0006 1746     		mov	r7, r2
  85:./hardware/usart/usart_config.c **** 	uint32_t i;
 184              		.loc 1 85 2 is_stmt 1 view .LVU46
  86:./hardware/usart/usart_config.c **** 	for(i = 0;i < len;i++)
 185              		.loc 1 86 2 view .LVU47
 186              	.LVL9:
 187              		.loc 1 86 8 is_stmt 0 view .LVU48
 188 0008 0025     		movs	r5, #0
 189              		.loc 1 86 2 view .LVU49
 190 000a 0BE0     		b	.L6
 191              	.LVL10:
 192              	.L7:
  87:./hardware/usart/usart_config.c **** 	{
  88:./hardware/usart/usart_config.c **** 		while(USART_GetFlagStatus(USARTx, USART_FLAG_TDE) == RESET);
 193              		.loc 1 88 62 is_stmt 1 discriminator 1 view .LVU50
 194              		.loc 1 88 8 discriminator 1 view .LVU51
 195              		.loc 1 88 9 is_stmt 0 discriminator 1 view .LVU52
 196 000c 8021     		movs	r1, #128
 197 000e 2046     		mov	r0, r4
 198 0010 FFF7FEFF 		bl	USART_GetFlagStatus
 199              	.LVL11:
 200              		.loc 1 88 8 discriminator 1 view .LVU53
ARM GAS  /tmp/cco68ac0.s 			page 6


 201 0014 0028     		cmp	r0, #0
 202 0016 F9D0     		beq	.L7
  89:./hardware/usart/usart_config.c ****     	USART_SendData(USARTx, *data);
 203              		.loc 1 89 6 is_stmt 1 discriminator 2 view .LVU54
 204 0018 16F8011B 		ldrb	r1, [r6], #1	@ zero_extendqisi2
 205              	.LVL12:
 206              		.loc 1 89 6 is_stmt 0 discriminator 2 view .LVU55
 207 001c 2046     		mov	r0, r4
 208 001e FFF7FEFF 		bl	USART_SendData
 209              	.LVL13:
  90:./hardware/usart/usart_config.c **** 		++data;
 210              		.loc 1 90 3 is_stmt 1 discriminator 2 view .LVU56
  86:./hardware/usart/usart_config.c **** 	{
 211              		.loc 1 86 20 discriminator 2 view .LVU57
  86:./hardware/usart/usart_config.c **** 	{
 212              		.loc 1 86 21 is_stmt 0 discriminator 2 view .LVU58
 213 0022 0135     		adds	r5, r5, #1
 214              	.LVL14:
 215              	.L6:
  86:./hardware/usart/usart_config.c **** 	{
 216              		.loc 1 86 12 is_stmt 1 discriminator 1 view .LVU59
  86:./hardware/usart/usart_config.c **** 	{
 217              		.loc 1 86 2 is_stmt 0 discriminator 1 view .LVU60
 218 0024 BD42     		cmp	r5, r7
 219 0026 F1D3     		bcc	.L7
  91:./hardware/usart/usart_config.c **** 	}
  92:./hardware/usart/usart_config.c **** }
 220              		.loc 1 92 1 view .LVU61
 221 0028 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 222              		.loc 1 92 1 view .LVU62
 223              		.cfi_endproc
 224              	.LFE124:
 226              		.global	USART2_Queue
 227              		.global	USART2_Buffer
 228              		.section	.bss.USART2_Buffer,"aw",%nobits
 229              		.align	2
 232              	USART2_Buffer:
 233 0000 00000000 		.space	64
 233      00000000 
 233      00000000 
 233      00000000 
 233      00000000 
 234              		.section	.data.USART2_Queue,"aw"
 235              		.align	2
 238              	USART2_Queue:
 239 0000 00000000 		.space	4
 240 0004 00000000 		.word	USART2_Buffer
 241 0008 40000000 		.word	64
 242 000c 00000000 		.word	0
 243 0010 00000000 		.word	0
 244              		.text
 245              	.Letext0:
 246              		.file 2 "/usr/lib/gcc/arm-none-eabi/10.3.1/include/stdint.h"
 247              		.file 3 "CMSIS/at32f4xx.h"
 248              		.file 4 "lib/inc/at32f4xx_usart.h"
 249              		.file 5 "lib/inc/misc.h"
 250              		.file 6 "common/circular_queue/circular_queue.h"
ARM GAS  /tmp/cco68ac0.s 			page 7


 251              		.file 7 "./hardware/usart/usart_config.h"
ARM GAS  /tmp/cco68ac0.s 			page 8


DEFINED SYMBOLS
                            *ABS*:0000000000000000 usart_config.c
     /tmp/cco68ac0.s:18     .text.USART_ConfigInitAll:0000000000000000 $t
     /tmp/cco68ac0.s:26     .text.USART_ConfigInitAll:0000000000000000 USART_ConfigInitAll
     /tmp/cco68ac0.s:151    .text.USART_ConfigInitAll:000000000000009c $d
     /tmp/cco68ac0.s:157    .text.USART_TransmissionData:0000000000000000 $t
     /tmp/cco68ac0.s:164    .text.USART_TransmissionData:0000000000000000 USART_TransmissionData
     /tmp/cco68ac0.s:238    .data.USART2_Queue:0000000000000000 USART2_Queue
     /tmp/cco68ac0.s:232    .bss.USART2_Buffer:0000000000000000 USART2_Buffer
     /tmp/cco68ac0.s:229    .bss.USART2_Buffer:0000000000000000 $d
     /tmp/cco68ac0.s:235    .data.USART2_Queue:0000000000000000 $d

UNDEFINED SYMBOLS
USART_StructInit
USART_Init
USART_Cmd
USART_INTConfig
USART_DMACmd
NVIC_Init
USART_GetFlagStatus
USART_SendData
